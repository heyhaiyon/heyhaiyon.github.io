<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>两只狗的生活意见｜话剧｜一个打工人的观后感</title>
      <link href="/2022/12/11/article/2022.12.11-%E4%B8%A4%E5%8F%AA%E7%8B%97%E7%9A%84%E7%94%9F%E6%B4%BB%E6%84%8F%E8%A7%81%EF%BD%9C%E8%AF%9D%E5%89%A7%EF%BD%9C%E8%A7%82%E5%90%8E%E6%84%9F/"/>
      <url>/2022/12/11/article/2022.12.11-%E4%B8%A4%E5%8F%AA%E7%8B%97%E7%9A%84%E7%94%9F%E6%B4%BB%E6%84%8F%E8%A7%81%EF%BD%9C%E8%AF%9D%E5%89%A7%EF%BD%9C%E8%A7%82%E5%90%8E%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<h2 id="现场观后感"><a href="#现场观后感" class="headerlink" title="现场观后感"></a>现场观后感</h2><p>在看之前，已经了解了这是一个类似打工人追逐梦想的故事，但具体是什么形式，什么具体内容，会带给我什么体验，我并不知道，对我来说，这是一次全新的体验。</p><p>看话剧的过程中，有一段，哥哥单独的自白，当时剧院非常安静，那段特别触动我，甚至眼眶都有一些湿润，那时我被带入情景进入思考，不过，很快，就又进入喜剧的部分，被演员牵着鼻子走，被他们逗笑，直到话剧结束。</p><p>现场观看的感觉就像在看一篇散文，形散意不散，笑声不断，有些许思考，要说记住了什么，其实也没记住什么，要说没记住什么，仔细回想又能回想起其中的一些片段，要说有什么体悟，或许一两句话，并不能描述地非常清楚，一些淡淡的触动，一些思考的碎片，无论是否能够描述出来并不重要，在这场话剧的经历和感受已融入我们的生命，或许在生命的某一天，某一时刻，就会和其他的思绪发生化学反应，清晰地呈现在面前，那时，我们会看到什么美好的景象呢，我期待着！</p><p>结束之后，路上，朋友问我看完有什么感受，我一时语塞，停顿片刻，组织了一下语言，</p><p>当时的感受是：</p><p><em>这个话剧讲了一个打工人到大城市追逐梦想，一路上经历各种磨难，最后重返故乡，</em></p><p><em>两只陌生的狗，偶然结成兄弟在大城市的各种经历，哥哥甚至还有点坏，骗弟弟的骨头，甚至利用弟弟母亲的信，欺骗弟弟，作为哥哥的狗，也有它复杂的一面，一边利用弟弟， 一边又同情弟弟，狗性中的复杂映射人性的复杂，</em></p><p><em>总的来说，在这段大城市的经历中，哥哥和弟弟的经历，让哥哥对于梦想的虚无缥缈和不切实际的幻想有了更多反思，同时也让弟弟在跟着这个高贵名狗的哥哥闯荡的过程中，开始有了学习的念头。两只狗互相救赎，生活虽然充满困难，但心中依然向往美好。</em></p><h2 id="重读剧本"><a href="#重读剧本" class="headerlink" title="重读剧本"></a>重读剧本</h2><p>重读剧本的时候，有点像在做语文的阅读理解，整理了整个话剧的场景转换，总结每个场景的讲的内容，串起整部话剧的故事线，解读其中的一些内容；</p><p>在朋友问我看完的感受时，我的一时语塞，也让我意识到看完并不是结束，对于这个话剧的理解，如果不能用自己的话讲出来，就还没有结束，所以就有了这篇后记观后感。</p><h3 id="第一场"><a href="#第一场" class="headerlink" title="第一场"></a>第一场</h3><ol><li>开场，考虑到观众可能迟到的问题，热场，即兴调侃迟到的观众</li><li>关于剧场拍照的问题，幽默地化解，禁止拍照的强硬立场</li><li>通过”啊～“一词，和观众达成热情鼓掌的默契，并演练</li><li>一首定场诗，和借火柴的过程，挑起观众的热情</li><li>试管婴儿和四个故事，大象、毒蛇、小蚂蚁、两只狗的故事，引出今天的话剧《两只狗的生活意见》</li></ol><h3 id="第二场"><a href="#第二场" class="headerlink" title="第二场"></a>第二场</h3><ol><li>两只陌生的狗，相遇</li><li>交代话剧主角：哥哥（来福）、弟弟（旺财）、主线（旺财母亲的信）</li><li>交代两只狗的情况：<ol><li>来福：一只有理想、有抱负的狗，要到城里实现理想</li><li>旺财：妈妈让我在这儿等我的哥哥，来福像我的哥哥，所以我要跟他进城去</li></ol></li><li>两只狗的三观</li><li>拜别故乡，和小鸭子（映射喜欢的人），准备进城。</li></ol><h4 id="几个重要的点"><a href="#几个重要的点" class="headerlink" title="几个重要的点"></a>几个重要的点</h4><h5 id="旺财的特点"><a href="#旺财的特点" class="headerlink" title="旺财的特点"></a>旺财的特点</h5><ol><li>听话，孝顺，“我的妈妈让我在这儿等我的哥哥，我觉得这只狗长得就像我的哥哥，所以我要跟他进城去。”  </li><li>坚持自己，找到来福，认定它是自己的哥哥，就跟定它了</li><li>没有文化，不识字</li></ol><h5 id="来福的特点"><a href="#来福的特点" class="headerlink" title="来福的特点"></a>来福的特点</h5><ol><li>自恋，作诗并夸自己有才华</li><li>执行力，“一只癞狗挡住了去路怎么办呢？壮起狗胆，把癞狗打翻”</li><li>以自我为中心，”这么傻的狗怎能带在身边呢，对不对？日后肯定是累赘。“</li><li>有同情心，“最近看来是累坏了，老出现幻觉，不过话又说回来了，那只小狗也挺可怜的，他要是再求求我，也许我就带上他了。”</li><li>自我的心理矛盾，“呸！我的理想是多么的崇高，我怎能软弱下来我的心灵，过河拆桥。”</li><li>贪图利益，发现旺财掉落的骨头，发现有利可图，选择认识旺财</li><li>损人利己，利用旺财妈妈没有文字的信，从头到尾欺骗旺财</li></ol><blockquote><p>旺财：有一封妈妈给我的信。<br>来福：没别的了?<br>旺财：没有了。<br>来福：一个字儿没有，一张白纸。<br>旺财：不可能啊，我妈妈说给我写了一封很长很长的信。<br>来福：你不识字啊你？<br>旺财：我不识字。<br>来福：那我念什么你听什么是吧？<br>旺财：对呀。<br>来福：有很多字呀，上面密密麻麻的，比你想象的还要长的一封信。【念信】“亲爱的旺财宝宝！”  </p></blockquote><p>上面这段关于信的对话，来福第一时间的反应证明了这确实是一张白纸，在确信旺财不识字之后，改变说法，利用旺财对母亲的敬爱（听到信，就下跪）开始欺骗旺财。一开始旺财确实被欺骗还不自知，后来旺财在监狱成为老大之后，来福去监狱找它时，它已经知道来福在欺骗它了，即使这样，它还是和来福一起走了。</p><h3 id="第三场"><a href="#第三场" class="headerlink" title="第三场"></a>第三场</h3><ol><li>一段大城市的顺口溜（根据演出地会结合当地改编），“城市是很大的…”</li><li>刚来大城市，旺财饿了，向观众乞讨，两只狗表演绝活，来福总是欺骗旺财，胸口碎大石，受伤的也是旺财</li><li>两只狗被抓进监狱，此时分两条线：<ol><li>旺财被人单独抓走，其实是领养了，来福对旺财说“狗富贵，勿相忘”；</li><li>来福一人被独自留在监狱里，引出来福的身世和过往经历，喜欢小鸭子，父亲不同意，学习其实也很差，父母被雷劈死，成为孤儿</li></ol></li><li>旺财来监狱接来福，来福要面子，硬说说自己在监狱过得挺好的；脑瓜灵光，用旺财妈妈的信，借坡下驴， 两只狗一起去过幸福的生活</li></ol><blockquote><p>旺财：哥哥！“狗富贵 ，勿相忘。”我接你回去跟我一块儿住啊。<br>来福：开什么玩笑啊你，你接我回去啊。你看不出来吗，我现在过得挺好的呀。<br>旺财：真好吗？<br>来福：不送！<br>旺财：再见！<br>【旺财转身欲走。<br>来福：站住！我发现你真是缺心眼儿啊！你走了我在这儿，谁给你念妈妈的信啊？<br>旺财：对，妈妈的信。<br>来福：【念信】“亲爱的旺财宝宝。“<br>旺财：【跪下】妈妈。<br>来福：“‘狗富贵，勿相忘‘是我们家庭的传统美德。你没有忘记，妈妈很欣慰。你的哥哥不让你走也是有原因的，它怕牵累你，对不对？快过来舔你哥哥的脚，让它感觉到你的温暖和你的真诚啊，感觉到你在求它……”你干嘛呢？<br>旺财：我求你呢。  </p></blockquote><p>旺财真的是做到了”苟富贵，勿相忘“，依然信任这个捡来的哥哥来福。</p><p>来福依然借旺财母亲的信欺骗旺财，强撑着自己的自尊心。</p><h3 id="第四场"><a href="#第四场" class="headerlink" title="第四场"></a>第四场</h3><ol><li>来到领养人的家，吃大餐，一段贯口“蒸熊掌、蒸鹿尾儿、烧花鸭…”，</li><li>在两只狗沉浸在幸福的生活中时，主人回来了，女主出轨其他的男人，来福不愿过这种“烂生活”，不愿像旺财一样被人收养过寄人篱下的生活，</li><li>改了家门的密码，抢了旺财的狗证，来福继续去追寻他的骨头和理想，旺财没有狗证，再次被抓投进了监狱。</li></ol><blockquote><p>来福：密码我已经改了，你回不去了。<br>旺财：啊。<br>来福：把它扔了！<br>旺财：哥哥，假山，我的跑步机……哥哥。哥哥，你毁了我的幸福生活，哥哥，哥哥。<br>来福：弟弟，快过来。是狗都离不开骨头，离开骨头就肯定不是狗，就算是这样，我还是要继续去追求我的理想。<br>【音乐起】，来福唱《花房姑娘》。  </p></blockquote><p>来福最初是来大城市追求自己的理想，当被旺财带到领养家庭时，享受了衣食无忧的生活，但之后发现领养旺财这家人糜烂败坏的生活，又想起自己最初的理想，继续去追寻最初的理想，没有像旺财一样想要继续沉溺其中。</p><p>《花房姑娘》这首歌，也极其应景，一听就懂。</p><h5 id="花房姑娘歌词"><a href="#花房姑娘歌词" class="headerlink" title="花房姑娘歌词"></a>花房姑娘歌词</h5><blockquote><p>作词 : 崔健</p><p>作曲 : 崔健</p><p>我独自走过你身旁<br>并没有话要对你讲<br>我不敢抬头看着你的<br>噢~ 脸庞<br>你问我要去向何方<br>我指着大海的方向<br>你的惊奇像是给我<br>噢~ 赞扬<br>你问我要去向何方<br>我指着大海的方向<br>你问我要去向何方<br>我指着大海的方向</p><p>你带我走进你的花房<br>我无法逃脱花的迷香<br>我不知不觉忘记了<br>噢~ 方向<br>你说我世上最坚强<br>我说你世上最善良<br>我不知不觉已和花儿<br>噢~ 一样<br>你说我世上最坚强<br>我说你世上最善良<br>你说我世上最坚强<br>我说你世上最善良</p><p>你要我留在这地方<br>你要我和它们一样<br>我看着你默默地说<br>噢~ 不能这样<br>我想要回到老地方<br>我想要走在老路上<br>这时我才知离不开你</p><p>好吧~ 姑娘<br>我就要回到老地方<br>我就要走在老路上<br>你明知我已离不开你<br>好吧~ 姑娘</p><p>我就要回到老地方<br>我就要走在老路上<br>我明知我已离不开你<br>好吧~ 姑娘<br>我就要回到老地方<br>我就要走在老路上</p></blockquote><h3 id="第五场"><a href="#第五场" class="headerlink" title="第五场"></a>第五场</h3><ol><li>来福拿走旺财的狗牌，到咖啡馆里喝咖啡，想起自己的理想，想起那个叫旺财的弟弟</li><li>旺财被投进监狱，之后一步一步，陷害三哥当上三哥，大哥胃溃疡，死后顶了大哥的位，当上了老大</li><li>一天，监狱进来一个新人，恰好认识来福，旺财让他说说，来福过的怎么样，来福过的好惨，咖啡厅被打断腿，去垃圾堆拣吃的被猫挠成半身不遂，想吃屎被屎壳郎淹没了，</li><li>第八天，来福决定去监狱找弟弟旺财，即使被打断腿也要装的没事，不能在弟弟面前丢脸，结果来福被监狱里旺财的小弟暴揍，旺财拿出妈妈的信给来福台阶下，两只狗重新在一起，唱起了《NOW I WANNA BE YOUR DOG》</li></ol><blockquote><p>来福：我一个人坐在咖啡屋里，喝着一杯卡布奇诺，我感觉我的理想好像离我很近很近，又感觉它离我很远很远。总之在这个时候，在我的上头有一片浮云，幻化成“美好”两个字，久久不能散去。偶尔我也会觉得好像少了些什么……我的弟弟他在哪里呢？<br>旺财：自从我跟我的哥哥分别之后，他拿走了我的狗牌，我被投进了监狱。  </p></blockquote><p>这里，来福一个人的时候，思考它自己的理想，这一段理想离我很近又很远，浮云、美好，非常触动我，我也有同样的感觉。也是在失去弟弟之后，独自一人的时候，才会想起身边重要的人。</p><blockquote><p>来福：第……第七天真是漫长啊。第八天还是没有到来啊。第八天其实早就到了，我没有心情开玩笑了。我现在过得挺惨啊，一无所有。我有一个朋友高尔基他说得对，“流氓不可怕，就怕流氓有文化”。不过没关系，我忽然意识到一个问题，如果我在这个世界上活着，我就不能没有这份感情，我必须马上找我的弟弟。【腿瘸了】我无论发生什么事情，都不能在我的弟弟面前丢脸。弟弟！  </p></blockquote><p>前面的哥哥来福做了那么多欺骗、伤害旺财的事儿，可以说是德行很坏了，前面说旺财是赖狗，不如说来福才是，两只狗的品行形成了鲜明的对比。可是最后来福还是醒悟了，它不能再失去弟弟。这个世界是复杂的，不是非黑即白；人性也是复杂的，不是非好即坏；有些事也是复杂的，复杂到没有真相，就像罗生门一样，接受现实的复杂感，或许可以让我们活得更自然一点，也能更自洽一点。</p><h3 id="第六场"><a href="#第六场" class="headerlink" title="第六场"></a>第六场</h3><ol><li>参加选秀节目“乘风破浪的狗狗，披荆斩棘的狗狗”等（秀才艺，纯搞笑部分），然后被淘汰。</li></ol><h3 id="第七场"><a href="#第七场" class="headerlink" title="第七场"></a>第七场</h3><ol><li>被淘汰后，两只狗喝闷酒，旺财问哥哥怎么办，来福念信，两人骑上摩托踏上重回家乡的路</li><li>一路上两只狗，还是放不下城里，旺财也没有主见，最后来福还是决定回城里，看到霓虹闪烁的街道，来福还是觉得城里好，看到招保安的广告，两只狗决定去当保安了。</li></ol><h3 id="第八场"><a href="#第八场" class="headerlink" title="第八场"></a>第八场</h3><ol><li>两只狗经过艰苦的努力，终于当上了人民保安，现实是找它们来镇压民愤的</li><li>18层的楼，只有地下三层是给他们这种人住的，B3层住的“瘪三”，B2住的”二逼“，B1层是红灯区</li><li>两只狗，在社区被判处丧家狗棒刑，被赶出去。</li></ol><blockquote><p>旺财：【扮医生状】通知通知，紧急通知。人类社会的同胞们，和谐社区的战士们，近日有两只丧家狗，严重且非常严重地影响、干扰以及祸害国家人民群众的生活、学习、娱乐、工作、心理健康以及身体健康，他们潜入无辜老百姓家大吃大喝，使百姓蒙受了巨大的经济损失和精神创伤，并多次从监狱中逃脱，严重妨碍了司法公正。他们竟然蒙骗了广大人民群众的雪亮的眼睛，竟然冒充社区公安，在职期间以滑稽模仿的形式，宣泄心中不满的畸形心态。他们被匿名信举报后，遭社区开出，居然逃窜至剧场进行表演。在广大人民群众的团结奋战积极举报下，终于将目标锁定在绰号为旺财和莱德里可•库德里希•阿里克谢•马克西莫维奇•比什科夫•唐•美福，简称来福的两只丧家狗身上，现正式判处这两只丧家狗棒刑，立即执行。当胜利的捷报传来，大家的脸上露出了欣慰的笑容。上海徐汇区第三实验小学的齐努力小朋友高兴地说：看，我们的生活是多么美好——啊！  </p></blockquote><h3 id="第九场"><a href="#第九场" class="headerlink" title="第九场"></a>第九场</h3><ol><li><p>两只狗被打的已经快站不起来了</p></li><li><p>旺财此时念了一首莱蒙托夫的诗《帆》</p><blockquote><p>在大海深蓝色的迷雾里，</p><p>一只孤孤的帆儿闪着白光。</p><p>它在寻求什么？</p><p>在那遥远的彼岸，</p><p>它抛下了什么？</p><p>在自己的家乡。</p><p>海风呼啸着桅杆拱起了腰发出喳喳的声响。</p><p>它不是在寻求幸福，也不是在躲避幸福。</p><p>在它的下面是澄清的碧色的水流，在它上面是金黄色的太阳！</p></blockquote></li><li><p>来福说，妈妈说的对，两只狗重新踏上回家乡的路，唱着歌《两只狗的生活意见》</p></li><li><p>回家路上，两只狗到观众席乞讨，哥哥来福假借想喝牛奶把弟弟支开，正好看到路边有一把枪，想要自杀，还给自己挖了个坑，但是有些饿晕了（一段非常好笑的自杀表演）</p></li><li><p>最后，读旺财妈妈的信。（非常感人，主题升华了）</p></li></ol><blockquote><p>来福：弟弟，弟弟。我们狗各一方，互相思念。不不不，弟弟，你不要思念我，我没有给你带来幸福的生活。我不配做你的哥哥，你把我忘了吧。就让我在这儿静静地思念你，静静地反省我自己吧。<br>旺财：哥哥，妈妈的信。<br>来福：妈妈的信。【念信】“亲爱的旺财宝宝，你在那个角落已经哭了很久很久，妈妈没有过去安慰你。再多的亲吻和拥抱都是无济于事的，你必须自己学会平静下来。妈妈知道，你面临的痛苦和风雨，这个时候我不得不告诉你，这只是刚刚开始啊。后面还有更多、更多艰难的时刻在等着你。亲爱的，去吧，去和你的哥哥站在一起呀，去面对这个世界给你们带来的一切。快乐、痛苦，去享受，最终战胜它，因为胜利还是一个奇迹。向没有经历过奇迹的人去解释它，就如同向一只没有吃过骨头的狗，说骨头两个字。生命确实是一个奇迹，亲爱的旺财宝宝，让妈妈看到这个奇迹在你的身上发生吧。还记得妈妈给你讲过的那个关于黄色潜水艇的故事吗？你看，那是一座载满了幸福和快乐的潜水艇，我们都生活在上面，去吧。和你的哥哥一起登上那潜水艇，让它带你们去世界的任何一个角落，无忧无虑、自由自在、充满希望地生活，用你们的歌声去歌唱你们的生命吧。”<br>【音乐起】，演唱《黄色潜水艇》+《NOW I WANNA BE YOUR DOG》。<br>剧终</p></blockquote><p>来福在以为结束生命之后，反思了自己，对不起弟弟旺财。<br>所有关于旺财妈妈的信，其实都是哥哥来福想要对旺财和自己说的话，最后念的这段信尤其感人，看信自己体会好了，无需解释了，每个人都能从中有所体悟。</p><h2 id="重读剧本后"><a href="#重读剧本后" class="headerlink" title="重读剧本后"></a>重读剧本后</h2><p>看剧本的时候，剧场表演的画面和声音依然在脑海里显现回荡，<br>依然会看着看着就笑了，<br>看着看着就湿了眼眶，<br>看着看着就沉浸地思考，<br>看完整个剧本之后，依然会觉得故事非常简单，<br>把生活用喜剧的方式展现在我眼前时，<br>初看很快乐，再看也很快乐，但其中始终都带着淡淡思考。<br>欢笑转瞬既逝，淡淡的思考会一直留在心里发酵。</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 话剧 </tag>
            
            <tag> 人生感悟 </tag>
            
            <tag> 观后感 </tag>
            
            <tag> 打工人 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>去当你想当的任何人吧｜读书笔记｜批注</title>
      <link href="/2022/11/14/article/%E5%8E%BB%E5%BD%93%E4%BD%A0%E6%83%B3%E5%BD%93%E7%9A%84%E4%BB%BB%E4%BD%95%E4%BA%BA%E5%90%A7%EF%BD%9C%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/11/14/article/%E5%8E%BB%E5%BD%93%E4%BD%A0%E6%83%B3%E5%BD%93%E7%9A%84%E4%BB%BB%E4%BD%95%E4%BA%BA%E5%90%A7%EF%BD%9C%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>这是一篇读书笔记的批注。</p><p>所选段落和批注只是我个人的主管观点和见解，不一定完全正确。</p><p>这是一本非常短的小书，关于此书《去当你想当的任何吧》，内容的前两部分，我没什么感觉，从第三部分开始才逐渐觉得此书值得一读，另外此书翻译水平有限，如果有能力，建议读英文原版。</p><p><strong>友情提示：阅读全文大约 33 分钟。</strong></p><h2 id="选段批注"><a href="#选段批注" class="headerlink" title="选段批注"></a>选段批注</h2><blockquote><p>正如谚语所说：“为自己的弱点辩护，那么这些弱点便会与你如影随形。”</p></blockquote><p>正视自己，而不是把弱点当成犯错的借口，懦弱的人总是用借口当作自己的挡箭牌。</p><blockquote><p>如果你对一个创意说了“是”，那么大显身手的时候便近在眼前了。现在，你的任务开始变得既简单又困难。你已经正式与灵感签订了合约，你必须对它负责到底，直到那不可预估的结果来临。</p></blockquote><p>避免成为列宁所说的“思想的巨人，行动的矮子”。</p><blockquote><p>和创意擦肩而过</p><p>我的意思是说，这部小说那鲜活的灵魂不见了——所有生机勃勃的创意事业之中存在的情感张力已荡然无存，就像是丛林中的推土机那样被吞噬了。诚然，我在两年前完成的所有研究和写作都还在，但我立刻意识到，摆放在我眼前的，不过是曾经温暖、脉搏强烈的活物，那是空空如也的躯壳而已。</p></blockquote><ol><li>此时此刻此情此景，所悟所感，当需立即记录下来；而不是等明天吧，等有空了，过段时间再记录吧。</li><li>好的创意和idea，总是稍纵即逝，别想着“等着睡醒了，再把它记下来”，睡醒了，灵感也可能消失了。</li></ol><blockquote><p>当然，我偶尔也会遇到神助。有时，在写作的过程中，我会感到自己像突然走在大型机场航站楼的人行传送带上一般——距离登机口还有很长的路需要跋涉，我的行李也很沉重，但我能感觉到自己被一种外部的力量轻轻助推着。好像有个人正在带着我前行。而且，这股既强大又慷慨的力量断然不是我自己的。</p></blockquote><ol><li>初中一年级一次作文课，我也有这种有如神助的感觉，两节的语文课，老师讲完题目之后二十分钟，我已经写完了作文给老师看了，还被老师表扬，当场念了自己的作文。</li><li>这段同时也让我想到《夜晚的潜水艇》书中一篇短篇小说《传彩笔》，一只神奇的传彩笔，当你手握这只笔的时候，弥散入万物的字句就会从脑海不断涌出，跃然纸上。当然，现实并不存在这种东西，但是对于创意、灵感来说，当它降临之际，如果你脑海中文字翩翩，就赶快拿出笔和纸写下来吧。</li></ol><blockquote><p>你是否正在考虑要不要变成一个有创意的人呢？不用了，因为你已经是个创意之人了</p></blockquote><p>美国国家科学基金会发表的一篇文章显示： 普通人每天会在脑海里闪过1.2万至6万个念头，我相信，这其中一定有创意存在。</p><blockquote><p>就算我们对相同的主题有所重复，又如何呢？就算我们世世代代、一次又一次地围着相同的主题打转，又如何呢？就算每一代新人体验到的冲动与提出的问题都与人类世世代代的感受与疑问大同小异，又如何呢？人与人之间是彼此相连的，因此，在创意直觉上出现重复的情况也是不可避免的。通常来说，每件事都会勾起我们对其他事的回忆，一旦把自己的表达与热情植入某个创意，这个创意就变成你的了。</p></blockquote><ol><li>就像爱与性、死亡是人类永恒的话题，历代文人、乐师，就这一话题谱写自己的文章、乐曲，为后世传颂。</li><li>融入自己的理解，在这道菜里加上你专属你的独一无二的调味料，这就是属于你的作品，你的创意。</li></ol><blockquote><p>现今，有许多贵得令人瞠目结舌的大学供人们学习艺术。有的学校的确很棒，而有的学校则不那么令人满意。如果你想选择去艺术学校这条路，那就走下去吧，但你要知道这是一笔交易，并且要确保这笔交易能够给你带来实际的利益。学校从这笔交易中得到的收益显然是你的钞票，但学生从这笔交易中得到的东西就要取决于他们付出的努力、学校的教育质量以及教授的水平了。你可以从这些课程中学到写作的规律与风格，也可能会获得写作的勇气。你还可能在艺术学校遇到你的同行，也就是那些为你之后的职业生涯提供宝贵人脉和专业支持的同行。如果幸运，你或许还能找到一位体贴入微、尽职尽责的老师做你的人生导</p></blockquote><p>如果能接受专业的训练，当然是一件极好的事情。</p><p>就像余华，高考失利，县城做牙医的时候，有一天他在看着大街的时候，心里突然涌上了一股悲凉，他想到自己将会一辈子看着这条大街，突然感到没有了前途。就是这一刻，他说他开始考虑起自己的一生该怎么办？他决定要改变自己的命运，于是开始写小说了。</p><p>当时的他也就是现在我所戏称的“野生作家”，没有经过专业的训练，但是后来他重新去鲁迅文学院读了研，接受系统的写作训练，并且与莫言、刘毅然同班，后来有了我们所看到的经典作品《活着》。  </p><p><a href="https://mp.weixin.qq.com/s/IF2Rj38PecNweppQi3z73Q">余华：十九年前的一次高考</a></p><blockquote><p>绝大多数的艺术家都不会从长计议，也容易冲动。艺术家就像是赌徒，而赌博是危险的。但是，只要你从事艺术创作，你就等于在赌博。你希望现在投入的时间、精力以及资源会在将来给你带来巨大的回报，也就是说，你希望有人为你的作品出钱、让你功成名就，这个概率虽微乎其微，但你还是不停地掷着骰子。</p></blockquote><p>在做一件自己所热爱的事的时候，开始的目的最好单纯一点，不要奢求有任何的回报，只要在做那件事儿的自己快乐的，就好了。如果这件事儿同时还能给你带来其他金钱、名誉上馈赠，当然很好，但是如果没有得到荣誉和金钱，由于我们本就没有给自己设制非常高的预期，所以也并不会感到失望，就去享受做事儿的快乐就好了。</p><blockquote><p>如果你是个小孩子，你可以通过创作尽情与他人分享自己的观点。如果你还年轻，那么你的观点可能和我有所不同，而且我也想知道你的观点。当我们看到你的作品时（无论这作品是什么），我们想要感受到你的朝气，想要感受到创意刚出生时的新鲜感。请对我们敞开胸怀，让我们去感受吧。</p><p>如果你年龄比较大，那么你要相信，这个世界不断地教育着你。你的知识和经验要你比你想象的多很多，你的人生尚未接近尾声，而是处于准备就绪的状态。无论你之前的生活方式如何，经历了数十载的风风雨雨，说明你有了一定的知识和经验储备。你应该将你的所知、所学、所见以及所感展示出来。如果你较为年长，那么除了进行实际创作的自信心，你很可能已经具备了拥有创意生活所需的一切条件。可是，你需要将创作付诸实践。</p></blockquote><p>人生的每个阶段都会有不同的所感所悟，也许长大的你，觉得当时的自己很蠢，那又有什么关系，你的当时的观点，在当时你的认知水平下，就是最真实的自己。说你想说，做你想做，听从你心，无问西东。</p><blockquote><p> 我是绝对不会因为作品“没有出头之日”而停止写作，我写作的目的并不是名利。我明白，来自外部的认可并不能带给我回报。为作品苦心思索的过程中产生的欢乐，以及选择了一条路并虔诚地走下去的自我觉知，这才是回报。如果未来我的作品能为我带来收入，这当然很好，但是，获得好的生活的方式有许多种，我也做过许多尝试，日子总还过得去。我很快乐。虽然我只是个无名之辈，但我的内心是富足的。我将赚的钱存起来，四处旅游，并将见闻记录下来。我参观了墨西哥金字塔，把所见所闻记录下来；我乘坐大巴车穿越了新泽西州的郊区，把所见所闻记录下来；我去了东欧，把所见所闻记录下来；我参加了各种各样的派对，把所见所闻记录下来；我在怀俄明州的农场做过试用厨师，也把所见所闻记录下来。</p></blockquote><ol><li><p>作者是一个非常现实主义的人，所以她一直都有一份工作来维持自己的生活，供养自己所热爱的写作事业。</p></li><li><p>看到这里，想到了《重返世界尽头的咖啡馆》的作者，他记录“原来如此”的笔记，只是从世界尽头的咖啡馆离开之后，单纯地想要改变自己，追寻自己的人生意义，只是以这样的心态，去记录，但是却在不经意间，重回世界尽头的咖啡馆，同时，这个偶然的机遇，让他出版了自己的两本书，从此无需再为钱而工作，实现了财务自由。</p></li></ol><blockquote><p>若要拥有更富创意的生活，你就必须停止抱怨，理由如下：第一，抱怨招人厌烦。每个艺术家都会抱怨，因此这是一个枯燥而陈旧的话题。（听到专业创作课上那此起彼伏的抱怨声，你可能会以为这些人是受邪恶的独裁者逼迫才选择了自己的职业，而不是遵从内心自主选择的。）第二，创作有难度是理所应当的。如果创作压根没有困难、人人都能做的话，也就谈不上什么独特和趣味了。第三，没有谁会真心听取他人的抱怨，因为每个人都陷在自己的烦恼之中。第四，也是最重要的一点：你的抱怨会把灵感吓跑。当你抱怨创意的艰难和劳苦时，灵感便会因受到冒犯而远离你一步。灵感仿佛举起了双手对你说：“对不起，伙计，我不知道我的存在会这么妨碍你，我要另找人家了！”</p></blockquote><p>任何时候，抱怨都不能解决问题，反而会让自己更加陷入不好的状态。</p><p>当你想要抱怨的时候，就停下来，深吸一口气，缓一秒，把自己抽离出来，用旁观者的视角，审视一下自己，然后再回到你的身体。</p><blockquote><p>艺术是没有任何意义的</p><p>艺术也具有深刻的意义</p><p>毋庸赘言，这当然是个悖论，但作为成年人，这并不会超出我的接受范围——同时抱持两个互相矛盾的理念，这是我们每个人都能做到的。以这个悖论为例。如果你想拥有满意的创意生活，那么你就必须接受这样一个悖论：“如果我想感性地生活，我的创造力表达就必须成为我生活中最重要的东西；如果我想理性地活着，我的创造力表达就必须毫无意义才行。”</p></blockquote><p>对一个成年人来说，应该能同时接受两个互相矛盾的概念，借用《底层逻辑》中的如下的三句话来尝试解释上文。</p><p>第一句是菲兹杰拉德说的：“同时持有全然相反的两种观念，还能正常行事，是第一流智慧的标志。”这样，你才会懂得，学李白，也要学杜甫。</p><p> 第二句是罗曼·罗兰说的：“这个世界上，只有一种真正的英雄主义，那就是认清了生活的真相后还依然热爱它。”这样，你才有勇气给每个模型找个反例，然后继续用这个模型。</p><p> 第三句是查理·芒格说的：“如果我不能比这个世界上最聪明的人更能反驳这个观点，我就不配拥有这个观点。”这样，你才能时刻提醒自己，每个理论都有前提。</p><blockquote><p>我的誓言的内容非常具体，我至今仍然觉得当时的誓言特别现实：我没有承诺要做一个成功的作家，因为我认为成功并不在我个人的掌控之中；我没有承诺要成为一名伟大的作家，因为我不知道自己是否有这个能力；我更没有在“成为作家”这件事上给自己做任何时间上的限制，诸如“假如我到了30岁还没能出版一部作品，那么我就会放弃这个梦想，另选一条职业道路”。实际上，我没有对自己的人生强加任何条件或限制，我实现目标的最后期限是：永远。</p><p>我对宇宙发誓，无论结果如何，我都会永远写下去。我承诺自己会试着勇敢并感恩地面对一切，而且尽可能地不去抱怨生活。我还承诺决不会只通过写作来养活自己，也就是说，我会通过一切必要的手段来支撑自己的日常生活和自己的写作事业。我不会企图通过热衷的事业获得来自外界的回报，我只想要穷尽一生拉近与写作之间的距离，也就是说，我要不断地向好奇心和满足感的源泉靠近。因此，为了生存，一切必需的准备我都愿意去做。</p><p>在感觉不顺的日子里，如果我毫无灵感，那么我便会把厨房的计时器</p><p>从整体上来说，我当年写的那些作品真的很糟糕，我对自己在写些什么完全没有头绪，感觉就像是戴着微波炉手套雕琢贝壳装饰品一样，每一步都举步维艰。我一没能力，二缺资历，写一篇短篇小说有时会花去我一整年的时间。在绝大部分的时间里，我只是在模仿我最喜欢的作家罢了。我经历过模仿海明威的阶段（谁没有过呢？），还经历过一段潜心模仿安妮·普劳克斯的时期，以及一段让人尴尬的科马克·麦卡锡时期。但是，这毕竟是一个新人起步时必须做的事——在能够推陈出新之前，人人都逃不过模仿。</p></blockquote><ol><li>清晰的认知，务实的行动</li><li>人类后天的所有技能的开始都是模仿。</li></ol><blockquote><p>有一天，正在找寻灵感的我问她：“你这辈子读过的最棒的一本书是什么？”她回答说：“哦，亲爱的，我可不能把这个范围缩小到一本书上，对我有重要意义的书太多了，但是我能告诉你我最喜欢的主题是什么。10年前，我开始研究古美索不达米亚的历史，这也燃起了我的兴趣。告诉你吧，这门学问彻底改变了我的人生。”</p><p>如果你能在任何领域孜孜不倦地耕耘10年，你便足以成为一名专家</p></blockquote><p>上文所述，经过10年的研究，成为考古专家，更像是将所学知识不断连接、强化，简单来说就是记住，然后变成一个拥有网状结构考古知识体系的人，就成为了作者口中的专家了；如果是发明创造之类的专家，可能重要重要的是爱因斯坦所说的那1%的灵感，当然99%的汗水也是实现那1%灵感的必要不充分条件。</p><p>格拉德威尔在《异类》提到了一个“一万小时定律”，指出：“人们眼中的天才之所以卓越非凡，并非天资超人一等，而是付出了持续不断的努力。 1万小时的锤炼是任何人从平凡变成超凡的必要条件”。后来有实验验证，这个理论并不完全正确。《刻意练习》一书中也对此观点有回答补充其中一点是“有针对性的练习和调整，不断调整练习策略，弥补漏洞的「刻意练习」方式，和没有方法的机械练习有本质不同”。</p><p>两本书，共同之处在于，都相信想要成为专家努力学习和练习是不可或缺的。</p><blockquote><p> 我夜以继日地工作着。我孜孜不倦地写着。虽然一直没能发表作品，但这没有关系，因为我在成长中。</p><p>多年自律而孤单的工作为我带来的最大好处，就是让我逐渐意识到了创意的情绪模式，或者说，这让我逐渐发现了自己的情绪模式。我发现，我的创作过程遵从着一定的情绪周期，而且这些周期总是大同小异。</p><p>在多年孜孜不倦的工作之后，我发现，如果能将写作坚持下去并且不胡思乱想，那么我便能安全挺过每个焦虑的阶段，继而上升一个台阶。我提醒自己，这些恐惧完全属于人类在接触未知事物时正常的反应，我会不断为自己鼓劲。如果我相信自己最终会到达彼岸——也就是相信我会与灵感产生交集，而且灵感也愿意与我配合，那么我就能跨越情绪的雷区，不会在作品完成前就崩溃掉。</p></blockquote><p>情绪周期这个事儿，我自己也有，人也是被激素调控的动物，就像女性会有生理周期，我个人觉得是个人就有，说的直白又不浪漫一点的，爱情也是激素，是荷尔蒙在作祟。之前读过的《贪婪的多巴胺》一书中，讲多巴胺、内啡肽、血清素等物质对人的影响，从这本书里，会更直接地体会到激素是如何影响人的状态、决策的，同时，书中也讲了我们的身体是个系统，不止有促进回路，同时也有抑制回路，所以我们是可以通过自我意识去主动控制激素的水平，从而控制我们的情绪、状态、决策。</p><blockquote><p>那时的我也没有发表过任何一篇作品，我同样处于迷茫的状态。成功、回报、认可——这些我的朋友渴望的东西，也正是我所期待的。失望和沮丧对我来说并不陌生，但我知道，忍受失望和沮丧正是创作者工作的组成部分。我认为，无论你想成为哪个领域的艺术家，承受失意都是工作过程中的一个核心组成部分，甚至是最核心的一个部分。失意并不是创作过程中的绊脚石，它就是创作过程本身。创作出精彩的作品，博得大家的喜爱，一切都很顺利，你也情绪高涨——这些都是创作过程中有趣的（根本不像工作的）那部分。这样的机会很少会出现，你不可能永远从一个光鲜的时刻跃入下一个光鲜的时刻，如何在遇到挫败时进行自我管理，这才是衡量你对事业的忠心以及你是否符合创意生活的奇怪要求的标尺。能够让自己精力充沛、干劲十足地面对创作中的所有阶段，这才是考验你的真功夫的方式。</p></blockquote><p>如何在遇到挫败时进行自我管理，是我所需要的，如何能够让自己精力充沛、干劲十足地面对工作和生活中的所有阶段，也是我一生的命题。高中一年级时的语文老师，曾讲过他最喜欢的诗人是苏东坡，她讲苏东坡一生有痛苦有快乐，不招左派改革派待见，也不招右派保守派待见，一肚子不合时宜，一辈子被流放贬谪，但他一辈子保持乐观精神，她被苏东坡的人格魅力所征服。被贬蛮夷之地时还能“日啖荔枝三百颗”，有这样乐观的人生态度，又怎会被挫折、苦难所打倒！接下来我也要读一读苏东坡传和他的诗了。</p><blockquote><p>作家马克·曼森写的一篇精彩博文，他说，寻找人生目标的秘诀，就是不加任何掩饰地回答这样一个问题：“在令人作呕的三明治中，你最喜欢吃什么口味的？”曼森的意思是说，无论你追求的事业在一开始显得多么亮丽光鲜，每一份事业都附带着一系列“恶心的三明治”，也就是事业自带的阴暗面。曼森对此洞若观火：“任何事情都偶有糟糕的一面。”而你必须选择接触哪种阴暗面。因此，我们的问题并不是“你对什么感兴趣”，而是“你的兴趣是否足以支撑你忍受其中最令人讨厌的部分”。</p><p>无论你的爱好和渴求是什么，只要你足够真心，就不会介意把附带的“恶心三明治”咽进肚子里。</p><p>举例来说，如果你真心想生一个小宝宝，就不会介意孕吐的痛苦了。</p><p>如果你真心想要当一个牧师，就不会介意倾听别人的烦恼了。</p><p>如果你真心热爱表演，就不会介意四处巡演带来的不适与不便了。</p><p>如果你真心想游览世界，就会甘愿承受在路上遇到扒手的风险了。</p><p>如果你真心想练习花样滑冰，就能在寒冷的清晨早起去滑冰场练习了。</p></blockquote><ol><li>寻找人生目标，或者是《世界尽头的咖啡馆》所说的存在意义（Purpose For Existing，简称：PFE），对于绝大部分人来说，其实并不知道自己喜欢什么，自己的兴趣是什么，什么事是可以作为自己的事业，并孜孜不倦地为此付出的，这对几乎所有人来说，都是一个极为重要，但又极其深刻的人生命题。</li><li><a href="https://www.zhihu.com/question/399452902">知乎｜一个人该怎样找到自己真正热爱和擅长的事，并以此规划自己的人生？</a>，可以参考一下其他人的方法，并尝试梳理自己的兴趣点、技能树，虽然他人的方法不一定适合自己，但是如果自己也没有什么好方法的话，就去试试吧！</li></ol><blockquote><p>拥有梦想，又要活得现实</p><p>在为了成为一名作家打磨技艺的时候，我一直有一份用来谋生的工作。</p><p>甚至在作品发表之后，出于安全起见，我仍没有把自己的谋生之职辞去。实际上，直到推出了3本由某大型出版社出版，并且在《纽约时报》上获得好评的作品，我才把谋生的工作（有时我也会身兼数职）辞去。在我的这3本书中，有一本获得了美国国家图书奖的提名。从外人的角度来看，我好像已经功成名就了，但我不愿冒一点儿风险，于是选择将用来谋生的工作继续做下去。</p><p>直到我的第四本书——没错，我说的就是《美食，祈祷，恋爱》——出版后，我才辞去了其他工作，成为一名专职作家。</p><p>在如此长的时间里我之所以一直没有放弃其他工作，是因为我绝不希望因为谋生的责任而让写作成为负累。我明白，生存的责任不该让写作来承担，这些年来，我看到许多人因想要通过创作养家糊口，最后却葬送了自己的创意。有些人认为，如果不能只靠创作生活，那么也就不算是严格意义上的创作者。我也亲眼见到过因这份坚持而落得入不敷出，甚至精神崩溃的艺术家。如果他们的作品让他们的希望落空（也就是说，如果这些作品的价值不够交房租），那么他们便会陷入嗔怒、焦虑甚至破产的深渊。最糟糕的是，他们往往再也不去创作了。</p><p>我之所以在赖以谋生的工作岗位上坚持了这么久，是因为我希望自己能够无拘无束、不受干扰地进行创造。通过不同的工作维持稳定的收入，这能让我在灵感受阻的时候安慰它说：“伙计，别担心，慢慢来。需要我的时候，我一直都在这里。”我一直心甘情愿地辛勤工作，目的就是让我的灵感能够轻松地玩乐。在这个过程中，我成了自己的“赞助人”，也成了自己的“贤内助”。</p></blockquote><ol><li>作为现实型人格，这是作者的选择，她接受自己的这种自洽的状态，活的很明白。</li><li>同样在《世界尽头的咖啡馆》一书中，作者也提到，如果你对现在的生活感到厌倦、迷茫，他的建议也是，可以慢慢的转变，而不是一蹴而就，特别是人到中年的时候，还能有勇气做出改变，非常地不容易，自己的能力，和自己想要做的事儿可能并不十分契合，所以这个转变的过程也相当复杂和缓慢。</li></ol><blockquote><p>马可·奥勒留《沉思录》，这位2 000年前的伟人富有创意、果敢和勇于探索的精神，让我备受鼓舞。他的烦恼和自我安慰的方式听上去非常有现代感，这真是妙不可言！我们可以看到，他思考的问题与我们每个人必须解决的人生问题是一模一样的：“我为什么存在？我来这世上的使命是什么？我该如何寻求自己的解决方法？我该如何实现自己最大的人生价值？”</p></blockquote><p>世界尽头的咖啡馆，同样讨论的是这个问题，这个东西好像也是哲学范畴的一个重要问题。</p><p>之前和隔离合租的大哥一起出门散步，也聊到这个问题，大哥非常惊讶：“小伙子不简单啊，现在都开始思考这个问题了，我40岁了，才想这个问题，想自己是为了工作，为了房子，为了孩子，还是为了什么而活，我活着的意义是什么”，那天晚上和大哥一路聊了很多。</p><p>现在的我，会非常喜欢和各种各样的人交流，最近一年认识的许多人，每个人都有自己的特点，和他们交流，思想的碰撞，打破自己的固有认知，融合新的东西，也不断从书籍中汲取前人的智慧，重新认识自己，重新塑造自己的三观，让自己活的不那么油腻。</p><blockquote><p>一个人在二三十岁的时候，他会努力让自己变得完美，因为他会在意别人对他有何看法。四五十岁之后，他便能抛开束缚，因为他不再为其他人的看法而耿耿于怀了。但是，彻底的洒脱则是在一个人六七十岁的时候才会到来，因为那时他才会意识到让人如释重负的真相：‘从来就没有人在乎过你的事情’。</p></blockquote><p>在意别人的看法，这问题可能从小就成为了我们的习惯，造成我们产生这个问题的原因可能是家庭。</p><p>家长还通过表扬和鼓励，让你好好吃饭，好好学习，通过给激励你下次考试如果考第几名的话，就给你买玩具，家长的这种动机何尝不是一种思想的控制，这种思想的控制，如果你尝到了甜头，小时候的你并不知道原因，但是你就知道这个方法有效，于是就开始了讨好父母，非常在意父母的看法。但是出了家门之后，你会觉得这个世界就和家庭环境一样，但实际上一切都变了，每个人都忙碌于自己的事儿，陌生人从来不会在乎你。</p><p>最近开始看另一本书《被忽视的孩子：如何克服童年的情感忽视》，完美的家庭太少，每个人可能都或多或少会因为自己的原生家庭，而产生一些心理问题，有些人表露的非常明显，有些非常隐秘，如果没有外界的触动，或许很多人一生都不会意识到自己的心理问题，然后就和另一个人结合，继续影响下一代。认识自己，这个问题在我看来，非常重要。</p><blockquote><p>凯蒂有一个跃跃欲试的小说构想，她想写一个精彩绝伦且荒诞离奇的小说，她认为，写作应该是一件很有趣的事。实际上，写作的趣味性竟让她心生愧疚，因为如果某个题材写起来很有乐趣，那么它必然是没有任何艺术价值的，不是吗？为此，凯蒂把这本小说的写作工作搁置了好几年，她觉得这种可以预期的快乐是不靠谱的。当然最终，她还是打破了思想障碍，写完了小说。没错，这本书的写作过程并非一帆风顺，但她感到很享受。另外，这部小说的确很精彩。尽管如此，凯蒂之前那几年让自己的创意与灵感白白流逝，只是因为她认为写小说不能让她感到痛苦，这也太可惜了！</p><p>你的创意为什么不爱你呢？是它主动找上门来的，不是吗？它一步步向你靠近，渐渐进入你的身体，希望得到你的关注和忠诚，也为你灌注了想要创造有趣之物和实践有趣之事的欲望。创意想要跟你建立起一段感情关系，这一定是原因所在，不是吗？你真的觉得，创意之所以排除万难进入你的意识之中，只是为了置你于死地吗？这根本说不通</p><p>“作品渴望被我创作出来，它们渴望通过我被创作出来。”</p></blockquote><p>完美主义，可能阻碍我们的行动。灵感来时候，说明它选择了你，你就是天选之子，不要辜负它，行动起来！</p><blockquote><p>从一篇10页的短篇小说中删减30%的篇幅，你知道这意味着什么吗？我为这篇小说花了一年半的时间，把它寄给《时尚先生》时，它就像一块抛了光的花岗岩一样。我认为，整篇小说中连一个多余的词也没有。除此之外，我认为《朝圣者》是我写过的最棒的作品，今后有可能再也写不出这样的水准了。这篇小说对我来说非常珍贵，就像是我身体里流淌着的血液一样。我无法想象它在遭到“肢解”之后，整个故事是否还能讲得通。最重要的是，仅仅因为一家汽车公司要把自己的广告从一本男士杂志中撤出，我最好的作品就要被砍去手脚，这让作为作家的我尊严扫地，何谈正直？何谈操守？何谈自尊？如果艺术家不在这邪恶的世界上高举“不可玷污”的旗帜，又有谁会这样做呢？但是话说回来，我哪管得了那么多。让我们开诚布公地说，这篇小说不是英国的《自由大宪章》，它只是一个关于女牛仔和她的男朋友的短篇故事罢了。我抓起一杆红色铅笔，把这篇作品剁成了肉泥。最开始的时候，这篇小说被删改得面目全非，其中的意义和逻辑荡然无存。这无异于一场文学大屠杀。就在这时，有趣的事情发生了。看着这堆乱刀砍下后的烂摊子，我顿时想到，这未尝不是一次绝好的创意挑战：我还能不能让这个故事死而复生呢？我开始缝缝补补，重新为这个故事赋予意义。在拼接的过程中，我发现，虽然这些刀口的确改变了整体的文风，但改变未必是消极的。新版本与老版本相比，在质量上没什么变化，只是格调大相径庭罢了。新版本更加精炼和直接，虽然质朴，但美感犹存。我</p></blockquote><p>外力的推动，可能好，可能坏，试了才知道，至少原版是保留在自己那里的，再多些改变和尝试也未尝不可。</p><blockquote><p>我想告诉你，请警惕你的自尊心。自尊心并不总是你的朋友。</p></blockquote><p>越自卑的人，自尊心越强，这一点我深有体会，因为我之前也自卑，现在的某些时候可能也会，但是已经能会立刻意识到自己的问题，从而控制自己的行为和情绪。</p><blockquote><p>那么，在你激情退却的时候，又该如何找到创作的灵感呢？这时候，好奇心就该上场了。在我看来，好奇心才是秘密所在。好奇心是创意生活的真理和途径，它包罗万象、贯穿始终。而且，好奇心是人人触手可及的。激情有时会显得遥不可及，就像是一座处地偏远，只有天才和受到上帝启迪的人才能触及的火焰之塔。但是，好奇心是一种更加温和、平静、友善且民主的特质</p><p>经过了3年的研究、旅行以及调查之后，我终于坐下来，开始动笔创作小说《万物的签名》。这本小说讲的是一个虚构的19世纪植物探险家的故事。我从未想过自己会写出这样一本小说，这本书几乎是平白无故地出现的。我没有迫不及待地开始写这本书，而是跟随着一个接一个的线索，一寸一寸地向前挪移。等我从这场寻宝游戏中抽身，开始写作的时候，便已经完全沉浸在对19世纪植物探险的热情之中了。3年前，我甚至没有听说过19世纪的植物探险，我只想在后院里建一座普通的花园罢了！而现在，我已经完成了一部关于植物、科学、进化、流产、爱情、挫败，以及一位女性实现心智升华之旅的长篇小说。这部作品就这样诞生了。这作品之所以能顺利诞生，正是基于我对身边出现的每一条好奇心的微小线索都持有接受的态度。</p></blockquote><p>在人生的任何年龄阶段都能保持好奇，这是我一直都希望的，因为生活到现在，我发现我的好奇心一点一点被压抑了，可能是生活的压力，可能是考虑到折腾那些好奇的东西所花费的时间成本很多，最后那些好奇，都因为没有行动而停滞不前。</p><p>回想，高中拿到第一台Nokia手机都时候，就开始用微信对讲机功能；到后来，自己偷偷攒钱买了一台二手安卓手机，一天能用360桌面换无数次壁纸和图标，下载所有能下载的App，然后打开体验；后来，家里有了电脑，开始研究电脑上好用的软件，怎么用效率更高，怎么打字更快，怎么设置才能榨干电脑的性能。或许我喜欢数码产品就是在这个时期开始的。而我想做一款属于自己产品这个想法也与此有非常重要的关系。</p><p>回到现在，体验过那么多的数码产品和软件之后，还是回归了最简单、最实用的工具，太复杂、太多功能的软件也不太愿意去尝试，因为要花费的时间成本很高。好在自己意识到了这点，“不忘初心”在我这里的解释，应该是保持一个初学者的心态，像孩子一样，对一切事物充满好奇心。因为好奇心是这个世界发展的巨大动力，探索未知是一件极其伟大的事儿。</p><blockquote><p>不要匆忙跳过那些最能让你脱胎换骨的体验和环境。</p></blockquote><p>当你身处其中之时，可能会没有觉察，但你的人生经历总有它存在的意义。</p><blockquote><p>失败让我感到伤心，也让我感到失望。失望会让我厌恶自己，甚至让我对他人恶语相向。但是，人生到了这个阶段，我已经懂得该如何安然度过人生的失意期，而不会深陷由自卑、嗔怒或惰性形成的死亡旋涡之中。人生到了这个阶段，我已经明白，只有<strong>自我意识</strong>会让我因为失败而感到痛苦。</p><p>每当心中那尖锐的不满之声响起的时候，我就会这样说：“喂，我的自我意识，原来你在这里啊，老伙计！”当我受到批评的时候，如果我发现自己出现愤怒、痛苦或抵触的反应，也会采取同样的解决方法——这只是自我意识在招摇生事，它想试探一下自己的力量罢了。我学会了在这种情况下警惕地观察自己的激烈情绪，也会试着不把这些情绪当回事。我知道，受伤的只是我的自我意识，而不是我的灵魂；想要采取报复或攫取最大奖励的只是我的自我意识；想要在社交媒体上与反对者打一场口水战的是自我意识，因受了辱骂而闷闷不乐的是它，因为没有得到想要的结果就愤愤不平地撒手不干的，也是它。在这种情况下，通过加深自我觉知，我总能将生活再次带回正轨。我会问自己：“那么，亲爱的，你到底想要什么呢？”</p></blockquote><p><strong>自我意识</strong>，是一种对自我的强烈重视和体会，能觉察到自己的需求，无论是最低层次的生理需求，还是高层次的道德追求，再根据自我的需求来进行学习、提升、进步、纠错、反省、总结，往特定目的推进。以总体结果来说，自我意识是对自己的现实极度有利的，但不一定是自私的。</p><p>同时，自我意识，也拓展出弗洛伊德的结构理论所提出精神的三大部分：本我、自我、超我，本我很好理解，自我和超我暂时不太理解。</p><p><a href="https://zh.m.wikipedia.org/zh-hans/%E8%87%AA%E6%88%91%E6%84%8F%E8%AD%98">自我意识-维基百科</a></p><p><a href="https://zh.wikipedia.org/wiki/%E6%9C%AC%E6%88%91%E3%80%81%E8%87%AA%E6%88%91%E4%B8%8E%E8%B6%85%E6%88%91">本我、自我和超我-维基百科</a></p><blockquote><p>那么，为了保持创意生活的状态，你该如何摆脱失败与自卑之扰呢？首先，你要学会原谅自己。如果你的创作没有成功，那就随它去吧。记住：即便你已经在下了50年功夫，你仍是个初学者而已。我们都是初学者，至死都是初学者。因此，别想太多，忘掉之前失败的作品，敞开心扉去寻找接下来要做的项目吧</p><p>无论如何，你都尽量不要在失败的作品上停留太长的时间。你不需要对你的溃败进行“尸检”，也无需弄清楚每件事的意义何在。记住：创意之神没有义务把一切原因都向我们解释清楚。你要直面挫败，认识其本来面貌，然后继续上路吧。把失败剁碎，把它当作诱饵，将下一个项目钓上钩。至于为何要先跨过这摊由失败堆成的烂摊子才能到达彼岸，或许有一天你会茅塞顿开，当然，你也有可能永远找不到答案。</p><p>无论有什么事情发生，你都要保持忙碌的状态。（这个明智建议来自17世纪的英国学者罗伯特·伯顿，他在谈到如何对抗忧郁时说：“不要孤独一人，也不要无所事事。”）你可以找点儿事情做，任何事情都行，即便是与之前完全不同的创意工作亦可，只要能让你的注意力从焦虑和压力上转移开来就行。</p></blockquote><p>人其实很讨厌闲下来，一旦闲下来，因为无事可做，就会觉得无聊，然后就会胡思乱想，或者没事儿找事干。</p><p>对于已经没有解决财务问题的人来说，赚钱可能是他们一生都要做的事儿。没怎么读书，不需要远大的理想和抱负，简单地工作生活，不需要思考很多问题，这种人也会很幸福；读了点书，有理想和抱负，追求物质和精神上愉悦，常常会感到迷茫和困惑，在不断思考、学习、妥协、改善，过程可能曲折，但结果也一定不会辜负他们的期待，他们最后也会很幸福。</p><blockquote><p>组合型娱乐</p><p>如果你不能做自己想做的事情，那就去做点儿别的事吧。你可以去遛遛狗，把家门外的垃圾都捡起来，再遛一次狗，烤个酥皮馅饼，用亮色的指甲油涂几块卵石，再把石头摆成一堆。你可能会觉得这是在拖延时间，但是，如果你意图明确，那么这种做法要好过懈怠停滞，因为灵感总会被行动的状态所吸引。因此，摇摇你的双臂，做点儿什么事，任何事都可以。你可以通过某种创作行为把注意力放回自己身上，最重要的是，如果你能引发一场声势浩大的骚动，那么灵感终会回到你的身边。</p></blockquote><p>或许我们真的偶尔可以不务正业，干点其他的事儿，缓解压力和情绪，当状态变好的时候，问题的答案或许会找上门。</p><p>组合型娱乐，让我想到复合型人才和组合式创新，绝大部分的创新其实都是众多模块的排列组合，就像乔布斯做iPhone，就是站在科技与人文的十字路口，套用一下脱口秀大会的口号，创新这个事儿，每个人每天都能想出5个idea。</p><blockquote><p>狂热的信任要求你深信这样一个事实：“亲爱的，无论结果如何，你都是有价值的。无论结果如何，你都要继续你的创作。无论结果如何，你都要坚持分享你的作品。无论结果如何，你生来就是创作者。即使你对结果无法理解，也绝不要对创作这个过程失去信任。”</p></blockquote><p>无需解释，相信自己</p><blockquote><p>有这样一个尽人皆知的问题，仿佛在每本励志书中都会出现：“假设你知道自己不会失败，你会做什么？”</p><p>我对此则持有不同的看法，我觉得，最大胆的问题应该是：“假设你知道自己很可能失败，你会做什么？”</p><p>你对哪件事情的热爱，会让“失败”和“成功”这两个词变得不再重要呢？</p><p>你对哪件事情的爱比你对自我意识的爱还要多呢？</p><p>你对这份热爱的信任有多狂热呢？</p><p>你或许会对狂热信任的理念提出质疑，你或许会强烈反对，你或许想对这个理念拳打脚踢，你或许会提问：“如果到头来有可能两手空空，那我为什么要如此煞费苦心呢？”</p><p>而答案通常会伴随着魔法师的邪魅一笑浮现出来：“因为这很有趣，不是吗？”</p><p>话说回来，你还能怎样利用人生的时光呢？你不想进行创作吗？你不想做有趣的事情吗？你不想跟随你的兴趣和好奇心吗？</p><p>毕竟，你永远都有另一条路可选，你拥有自由意志。如果你觉得创意生活的方式太困难或无法给你带来足够的回报，那么你随时都可以选择放弃。但是，你真的要这样做吗？你可以仔细想想，放弃之后，下一步怎么办？</p></blockquote><p>这里的观点和《世界尽头的咖啡馆》非常的相似，最差最差的结果也是你一直在做自己喜欢的事，虽然可能会没有收入，但是你是快乐的</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 挫折 </tag>
            
            <tag> 读书笔记 </tag>
            
            <tag> 创意 </tag>
            
            <tag> 灵感 </tag>
            
            <tag> 自我意识 </tag>
            
            <tag> 心理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人生出问题是一个大概率事件吗？诚实地审视自己</title>
      <link href="/2022/10/14/article/%E4%BA%BA%E7%94%9F%E5%87%BA%E9%97%AE%E9%A2%98%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%A7%E6%A6%82%E7%8E%87%E4%BA%8B%E4%BB%B6%E5%90%97%EF%BC%9F%E8%AF%9A%E5%AE%9E%E5%9C%B0%E5%AE%A1%E8%A7%86%E8%87%AA%E5%B7%B1/"/>
      <url>/2022/10/14/article/%E4%BA%BA%E7%94%9F%E5%87%BA%E9%97%AE%E9%A2%98%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%A7%E6%A6%82%E7%8E%87%E4%BA%8B%E4%BB%B6%E5%90%97%EF%BC%9F%E8%AF%9A%E5%AE%9E%E5%9C%B0%E5%AE%A1%E8%A7%86%E8%87%AA%E5%B7%B1/</url>
      
        <content type="html"><![CDATA[<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>曾在微博上看到一个问题：<strong>人生出问题是一个大概率事件吗？</strong></p><p>有一位网友的观点让我印象深刻</p><blockquote><p>我一直认为个人成长与人生选择过程中有三个悖论：</p><ol><li>16-18 岁，在对学科和知识一无所知的时候就被要求选择自己的专业；</li><li>22-25岁，在对商业世界运行规则毫无概念的时候就被要求选择工作方向；</li><li>25-28岁，在对自己和人际关系一知半解的情况下就被要求确定长期伴侣；<br>这样想来，其实人生出问题是一个大概率事件。</li></ol></blockquote><h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>在过去的20多天前，因为一些原因，我开始被迫重新审视自己，</p><p>还记得一年前有个朋友问我：“<strong>是不是每个人成长的节点，都是跌倒、受伤或者失落失望之后，就像拾得了一种面对这些负面的东西的新能力，才能获得成长，是不是没有那种顺利的成长，在顺遂中人是不是不会成长？</strong>”</p><p>当时我说：“<strong>不一定，好的经历，坏的经历，只要自己有意识的觉知和觉醒，不就是成长嘛</strong>”</p><p>直到现在我依然对当时的这段谈话记忆犹新。</p><p>20多天前，在跌倒之后，我开始对之前的一些方面有了觉知，只不过这一次的跌倒，为我指明了错误的方向，或许顺遂的我依然会“吾日三省吾身”，但是思维的局限总是导致我不能全面地认识自己，所以才有了后来的这次跌倒，这一次，摔得很惨。</p><p>所以从那天之后，我开始重新审视自己。</p><h2 id="底色"><a href="#底色" class="headerlink" title="底色"></a>底色</h2><h3 id="二本院校只改变了二分之一命运"><a href="#二本院校只改变了二分之一命运" class="headerlink" title="二本院校只改变了二分之一命运"></a>二本院校只改变了二分之一命运</h3><p>来到这所普通二本院校之后我的处境，与我初中时是如此的相似，一个原本并不特别优秀的人，却可以在这里做了“鸡头”，以我稍微比同龄人成熟的思想和学识，和我自己的提倡者人格，我想让这个班里的同学变得更好，最后的结果现在已经知道，我并不能改变所有人。</p><p><strong>一个人的改变是自我的觉知后主动的改变，外力逼迫下的改变始终无法持续。</strong></p><p>对我自己来说，自知来到这所学校为我的人生所带来的改变将是微乎其微，所以就只能自己去一点点探索，改变自己，挑战自己。原本内倾性格的我，在那里做了班长，当了社团的干部，学生会的干部，开始主动改变自己。</p><p>但是对我而言，始终缺少了一个带领我的人，就像没有方向的船，在大海上，想要找到陆地，就只能往四面八方不断尝试，虽然不知道终点在哪里，但自己在变得越来越好是真的，虽然自我提升的速度是缓慢的，但是只要是在变好就不算最差的结果。</p><p>回到开头提到的前两个悖论，这两个我全都经历了，<br>你问我想学什么专业？我不知道。<br>你问我想做什么工作？我也不知道。</p><p>我是一个很容易受环境影响的人，古人说：“近朱者赤，近墨者黑”，古人也说：”出淤泥而不染“，然而我属于古人所说的前者。前面的两个悖论，最后都是听从家人的建议，做出的选择。</p><p>用爱比克泰德的话来说就是：“<strong>我们登上并非我们所选择的舞台，演出并非我们所选择的剧本</strong>，“</p><p>后半句是”<strong>不能够辜负命运，但是也不能够对命运有过多的期待与抱怨，你只能做好当下你应该去做的东西</strong>。“</p><p>所以直到现在我依然未能摆脱这个并非我所选择的舞台，但是我一直在思考，在寻找，当遇到那个我所认为的人生意义的路口时，我能有勇气做出自己的选择。在过去的20多天，重新读了一遍《世界尽头的咖啡馆》，这本书给了我很大的启示。</p><h2 id="人格"><a href="#人格" class="headerlink" title="人格"></a>人格</h2><p>在过去的20多天里，我开始重新认真阅读关于我的MBTI测试报告，</p><p>我的测试结果是INFJ-A，一个提倡者人格的人，</p><p>这种人在整个人群里占1%的比例，他们具有理想主义，富有道德感，</p><p>但真正令他们与其他理想主义人格类型区分开来的是，他们果断决绝。他们不是懒散的空想家，而是能脚踏实地完成目标，留下深远的积极影响的人。</p><p>“提倡者”们常常集各种特质于一身： 轻言细语却很有看法，为自己的信念不懈奋斗。 他们坚决果断，但不会把精力用在一己私利上 – 提倡者们行事风格有创造力，富有想象力，充满信念和感性，他们并非为了创造优势，而是建立平衡。 平等主义和因果报应是对他们很有吸引力的思想，他们相信用爱和同情来感化暴君的心是帮助这个世界最好的方式。</p><p>对提倡者人格类型的人来说，很容易与他人建立联系，他们的话语温暖感性有人情味，而非纯粹的逻辑与事实。 他们的同事和朋友把他们当作安静的外向类型是不无道理的，但他们要知道“提倡者”们需要独处的时间来养精蓄锐，所以对他们的突然离开不要太过惊讶。 “提倡者”们很在乎别人的感受，也希望被以同样的方式对待 — 这有时需要给他们留几天独处的时间。</p><h3 id="优势与劣势"><a href="#优势与劣势" class="headerlink" title="优势与劣势"></a>优势与劣势</h3><p>优势：创意，有见地，有原则，充满激情，利他主义；<br>劣势：对批评敏感，不愿敞开心扉，完美主义，避免平凡，容易倦怠。</p><h2 id="自我认知"><a href="#自我认知" class="headerlink" title="自我认知"></a>自我认知</h2><p>过去的环境和经历造就了我现在的人格，这样的人格既然已经形成，</p><p>那就去认识自己，了解自己，内倾或外倾，直觉或现实，都是自己，</p><p>对自己的缺点有了觉知之后，再考虑是不是要有所改变，</p><p>最后我选择了改变，因为这个缺点，让我的跌倒，而我不想再次跌倒，</p><p>农村出身的底色，会让我自卑，没有底气，</p><p>但同时也让我能理解普通人的生活的困惑和焦虑，</p><p>出身无法改变，我选择接纳自己，接受自己的普通，</p><p>虽然提倡者人格避免平凡，但与我悦纳自己并不矛盾，</p><p>读过《自卑与超越》一书，阿德勒说自卑是人们前进的驱动力，</p><p>所以承认自己的自卑没有什么不妥，</p><p>诚实地审视自己，诚恳地悦纳自己，</p><p>我追求美好的生活，努力向上突破，想体验不一样的人生，</p><p>但也不奢望成为世俗定义的成功人士，</p><p>我相信每个人都有自己的角色和位置，以及他存在的意义。</p><h2 id="感激"><a href="#感激" class="headerlink" title="感激"></a>感激</h2><p>在回到开头的第三个悖论，</p><p>”25-28岁，在对自己和人际关系一知半解的情况下就被要求确定长期伴侣“，</p><p>这个悖论对我来说或许现在已不是悖论，</p><p>能够有觉知的去自我认知，自发觉醒，对即将迎来自己的28岁的我来说，实在是一件非常幸运的事儿，</p><p>虽然跌倒之后，一度悲伤到无法自已，</p><p>但我也知道悲伤并没有什么用，认识自己，改变，成为更好的自己才是应该做的事儿。</p><p>所以我发自内心地感激这次跌倒。</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 人生感悟 </tag>
            
            <tag> 挫折 </tag>
            
            <tag> 成长 </tag>
            
            <tag> 自我认知 </tag>
            
            <tag> 人格测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我们该如何学习？开始建立自己的知识库吧</title>
      <link href="/2022/09/27/article/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E7%9A%84%EF%BC%9F%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E5%BA%93%E5%90%A7/"/>
      <url>/2022/09/27/article/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E7%9A%84%EF%BC%9F%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9F%A5%E8%AF%86%E5%BA%93%E5%90%A7/</url>
      
        <content type="html"><![CDATA[<blockquote><p>凯文凯利的《必然》一书中说道：“我们正在进入一个需要不断给自己打补丁的时代，你将永远处在升级的过程中……</p></blockquote><h2 id="开放我们的大脑"><a href="#开放我们的大脑" class="headerlink" title="开放我们的大脑"></a>开放我们的大脑</h2><h3 id="保持一个初学者的心态"><a href="#保持一个初学者的心态" class="headerlink" title="保持一个初学者的心态"></a>保持一个初学者的心态</h3><p>保持一个初学者的心态，像孩子一样，对一切事物充满好奇心</p><p>很多人都会出现达克效应，“承认自己的“无知”，什么是我们知道的，什么是不知道的，对所有的事情都充满好奇，让自己回到孩子的状态</p><blockquote><p>达克效应是一种认知偏差现象，指的是能力欠缺的人在自己欠考虑的决定的基础上得出错误结论，但是无法正确认识到自身的不足，辨别错误行为。这些能力欠缺者们沉浸在自我营造的虚幻的优势之中，常常高估自己的能力水平，却无法客观评价他人的能力。发现这个现象的Dunning和Kruger因此获得了2000年的“搞笑诺贝尔心理学奖”。</p></blockquote><p>开始往我们的脑子里输入<strong>知识</strong>，而不是<strong>信息</strong></p><p>举例说明：</p><ul><li>信息：马路上的大妈骂街、电视里的新闻联播、抖音上的美女热舞、微信里的表情斗图</li><li>知识：简单来说就是那些被实践、验证、相信的规律或方法</li></ul><h3 id="区分“经验”和“规律”"><a href="#区分“经验”和“规律”" class="headerlink" title="区分“经验”和“规律”"></a>区分“经验”和“规律”</h3><p><strong>幸存者偏差</strong>：是一种逻辑谬误，选择偏差的一种。过度关注“幸存了某些经历”的人事物，忽略那些没有幸存的（可能因为无法观察到），造成错误的结论。——维基百科</p><p>我们可能听过很多成功人士的分享，他们是如何如何成功的，却很少听到失败者出来讲自己失败了，这些成功的人，就是那些幸存者，所以，我们应该去区分这些成功者的成功的过程，是不是知识幸存者自己的经验或者说是经历。</p><p>规律：是在某种范围内或某种条件下，事物间的必然本质联系，具有客观性，普遍性，相对性和唯一性。</p><h3 id="区分“优质”和“劣质”"><a href="#区分“优质”和“劣质”" class="headerlink" title="区分“优质”和“劣质”"></a>区分“优质”和“劣质”</h3><p>见真识假</p><p>学习某个领域的东西，先找这个领域最出名的经典书籍、文献，可以看看厉害的前辈的推荐，最优质的内容往往不多，我们只是被那一堆的衍生作品迷了眼。</p><p>如果我们刚刚进入一个新的领域，建议先从经典入门级的书开始读，这有助于快速掌握这个领域内的基础概念，基础概念的夯实对后期的学习帮助巨大</p><p>之后再去看同行业的其他书，判断它是否值得阅读</p><h2 id="存入知识"><a href="#存入知识" class="headerlink" title="存入知识"></a>存入知识</h2><h3 id="自我学习循环"><a href="#自我学习循环" class="headerlink" title="自我学习循环"></a>自我学习循环</h3><p>库博学习圈：把经验升华成了知识、规律，从而指导我们的行动，如下图：</p><p><img src="/../../assets/post-headers/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E7%9A%84/%E8%87%AA%E6%88%91%E5%AD%A6%E4%B9%A0%E5%BE%AA%E7%8E%AF.png" alt="自我学习循环"></p><h3 id="向巨人学习"><a href="#向巨人学习" class="headerlink" title="向巨人学习"></a>向巨人学习</h3><p>我们一直都是站在巨人的肩膀上，开拓进取。</p><p><img src="/../../assets/post-headers/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E7%9A%84/%E5%90%91%E4%BB%96%E4%BA%BA%E5%AD%A6%E4%B9%A0.png" alt="向他人学习"></p><h3 id="建立自己的知识库"><a href="#建立自己的知识库" class="headerlink" title="建立自己的知识库"></a>建立自己的知识库</h3><ol><li><p>找一个管理知识的笔记软件，如：印象笔记、有道云笔记、Notion、语雀等等</p></li><li><p>把知识分类归档，可以参考知识树🌲的分类逻辑</p></li><li><p>把知识结构化，</p><p>我们之所以感觉在互联网上，看了很多知识，但感觉用处不大，是因为这些知识都是碎片化的，彼此之间没有结构。这就像我们买了一堆汽车零件回来，每一个零件看上去都很好，但是堆在一起，依然是一堆零件，而不是一辆车，根本无法使用。</p><p>这也是为什么很多真正爱学习的人，比较反对在互联网上碎片化学习，而更愿意看书的原因。就是因为一本好书，它的知识是结构化的，学完一本书，就像装配上了一件已经组装好的武器，能够解决一系列问题。</p></li><li><p>把知识结构化的能力</p><ul><li><p>方式一：根据MECE法则[2]自己拆解、组装：</p><p>MECE法则，是麦肯锡咨询顾问芭芭拉·明托在《金字塔原理》中提出的一个思考工具，意思是“相互独立，完全穷尽”，也常被称为“不重叠，不遗漏”。</p></li><li><p>方式二：站在巨人的肩膀上</p><p>有些领域知识的结构化已经非常成熟了，你可以直接拿来使用，比如一些经典书籍的目录，一些领域的全局示意图等，都是把这个领域里所有的分类以及彼此之间的逻辑关系给画好了，你直接拿来使用即可</p></li></ul></li><li><p>建立与知识的链接</p><p>每一次新知识的加入，都需要与原有知识做一次链接，它才能成为你大脑中的一部分。你需要在整理收藏夹的同时，对笔记做一次再加工，可以是为内容重新排版，画出你认为重点的部分；也可以写上几句评语和感悟，加深理解。总之，就是要让这个新知识和你本人发生一次深度接触，而不仅仅是让它存到你的个人图书馆里去积灰。</p></li></ol><h2 id="使用知识"><a href="#使用知识" class="headerlink" title="使用知识"></a>使用知识</h2><p>打开大脑，放入知识，形成结构，你的个人图书馆将慢慢铸建成型。</p><p>但是，如果你的学习仅仅到此为止的话，你顶多就是个图书管理员，管理着偌大的知识库，却从来不使用！听的时候很激动，想的时候很感动，合上书后一动也不动，人到中年时发来一声叹息：学了很多知识，却依然过不好这一生……</p><p>废话，学了很多知识，当然是过不好一生的！</p><p>要过好一生，你得“使用”知识！</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习 </tag>
            
            <tag> 读书笔记 </tag>
            
            <tag> 幸存者偏差 </tag>
            
            <tag> 知识库 </tag>
            
            <tag> 结构化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我们是如何学习和思考的？</title>
      <link href="/2022/09/20/article/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%92%8C%E6%80%9D%E8%80%83%E7%9A%84%EF%BC%9F/"/>
      <url>/2022/09/20/article/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E5%92%8C%E6%80%9D%E8%80%83%E7%9A%84%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<blockquote><p>我们人类是如何学习的？</p><p>学习的目的是什么？</p><p>我们人类是如何思考的？</p><p>我们如何提高思考能力？</p><p>Deep Learning 是不是科学家借鉴人类思考方式抽象出来的学习模型？</p><p>人工智能或者说AI会不会超越人类？</p></blockquote><h2 id="我们人类是如何学习的？"><a href="#我们人类是如何学习的？" class="headerlink" title="我们人类是如何学习的？"></a>我们人类是如何学习的？</h2><p>这本书中是这样讲：</p><p>著名心理学家巴甫洛夫，曾经用小狗做了一个实验，来研究这个学习的过程，实验的结果相信大家中学都曾学过，</p><p>巴甫洛夫测试其他的方式，分别使用铃铛、口哨、音乐、一句特定的话等等和狗粮一起出现，这证明小狗确实会学习。</p><p>几十年后，心理学家赫布又提出了解释该现象的理论模型：</p><p>如果大脑里两个神经细胞总是被同时激发，那么它们之间的连接就会变得更强；</p><p>而这个时候，如果再激发其中一个细胞，那么另外一个细胞就会被同时激发。</p><p>这个就是著名的“赫布定律”，他的这个猜想也在之后的科学实验中被证实。</p><p>似乎触及了<strong>学习的本质：所谓学习，就是把原本不相关的东西联系在一起的过程</strong>。</p><p>人是在已有认知的基础上，建立新的链接，来理解事物的。</p><p>如果缺少了相关的背景知识，就无法理解眼前这件事，反过来说，你的知识存量越多，你所能理解的新知识也越多，理解速度会越快，这就是我们看书会越看越快的原因。</p><h2 id="学习的目的是什么？"><a href="#学习的目的是什么？" class="headerlink" title="学习的目的是什么？"></a>学习的目的是什么？</h2><p>不是知识没有“用”，而是我们“没有用”</p><p>很多人，都把学习当成“目的”本身，为了毕业、考证，却忘了学习真正的目的！</p><p>学习知识，是为了更高效地解决问题！</p><p>我们如何“使用知识”来“解决问题”？</p><p>书中举例：7 × 8 &#x3D; ？</p><p>很多人，可能直接张口就来“56”，没错，答案就是56，我们小学就背诵了乘法口诀表，所以几乎整个过程没有思考，就得出了答案。</p><p>但是我们解决这个问题的过程有哪些步骤呢？</p><p>我们首先要看的懂“7，8”这两个数字；</p><p>看得懂“×”这个符号代表什么意思；</p><p>还得知道用“行，列”组成点阵来解决乘法问题。</p><p>最后我们开始解决这个问题，有的人一行一行地数数，得出：56，有的人背过“乘法口诀表”，张口就说出答案：56。</p><p>这个过程就是解决问题的“思考过程”，拥有不同“背景知识”的人，思考问题的过程、方法和速度是不一样的。</p><p>知识是如何帮助我们解决问的？</p><p>“知识”并没有直接解决问题，而是帮我们提高了这个问题的“思考质量”，</p><p>学习知识→提高思考质量→解决问题的效率</p><p>之前学习是我们的目的，现在我们的目标变成了“如何提高思考的质量”，而“学习知识”知识达成这个目标的关键步骤！</p><h2 id="我们是如何思考的？"><a href="#我们是如何思考的？" class="headerlink" title="我们是如何思考的？"></a>我们是如何思考的？</h2><p>当问题产生时，我们开始在自己的知识库中，搜索相关的背景知识，如果能链接到的背景知识很少，我们就无法有效地思考，甚至于不能理解问题的意思；如果我们掌握越多的北京知识，可用于思考的要素就越多，梳理出我们认为有用的方法，最终给出一个好的方案，而我们我们梳理背景信息的过程，就是在对知识的重新筛选、组合、排列、重组、缩放等等，最终得出可以解决问题的方案。</p><p>我们人类的思考过程，看似无法捉摸，深入剖析后，书中归纳出两条：</p><ol><li>链接背景知识</li><li>梳理北京知识</li></ol><p>很多人可能会说，我们还有想象力。</p><p>我们所有的想象，都是基于已有的知识，的重新排列组合放大缩小等等，外星人、龙、狮身人面像等等，都不是凭空产生的。</p><p>太阳底下没有新鲜事，排列组合就是创新！（听起来好讽刺）</p><p>但是宇宙之大、微观之渺小，还有很多我们无法解释和理解的东西，当我们第一次发现从未发现的东西，并解释这种现象或规律，或许也可以称之为“创新”。</p><p>我们并不能想象一个完全脱离出自有认知的东西，就像200年前嘉庆皇帝，不可能想象到出，手机是个什么东西。</p><p>当我们拥有不同知识背景的时候，我们的思考过程和结果，也会不同。</p><p>思考的过程，有点像玩乐高积木，决定我们思考质量的，一个是拥有的积木数量，一个是拼接的技巧和创意。</p><h2 id="我们如何提高思考能力？"><a href="#我们如何提高思考能力？" class="headerlink" title="我们如何提高思考能力？"></a>我们如何提高思考能力？</h2><ol><li><p>增加背景知识量</p></li><li><p>提高链接强度</p></li><li><p>增强知识的结构性</p></li><li><p>提高对背景知识的梳理能力</p><ul><li><p>随意搭配（往往可以用于创新）</p></li><li><p>按套路搭配（有一定规则和秩序）</p></li></ul></li></ol><h3 id="增加背景知识量"><a href="#增加背景知识量" class="headerlink" title="增加背景知识量"></a>增加背景知识量</h3><p>提升思考能力的第一步，并不是让大脑变的更聪明，而是增加自己的知识量，这并不是让我们显得更有学问，而是在帮助我们面对问题的时候，有足够的背景知识量，可供我们链接，让我们拥有思考的“基石”。</p><h3 id="提高链接强度"><a href="#提高链接强度" class="headerlink" title="提高链接强度"></a>提高链接强度</h3><p>为什么有些人，当我们的问题刚刚抛出，他的答案就几乎可以脱口而出？为什么班里的好学生在做题的时候，又快又正确？是他们拥有一颗超级大脑，还是思考的速度比我们快？</p><p>书中认为并不是如此，我个人也认为并不是如此。</p><p>对他们来说，所要用到的背景知识，已经成了条件反射级的强度，好像根本不用思考，但事实并非如此，他们思考了，并将相关的知识，关联了起来，而且强度几乎是条件反射那般。</p><p>我们通过建立初次链接，学习新的概念、方法，用旧的知识，来理解新的概念，好像是让新的知识从原有的知识里“长”出来，“认知”这个词，维基百科中也这样解认知的过程，认知的过程是自然或人造的、有意识的无意识的、认知使用现有的知识并产生新知识。</p><p>之后我们通过重复再重复，形成条件反射般的链接，当链接强度达到一定程度，我们的很多行为，几乎没有思考，就完成了，比如开车的老司机，做动作，和一个新手司机，大家应该可以想象的到。</p><h3 id="增强知识的结构行"><a href="#增强知识的结构行" class="headerlink" title="增强知识的结构行"></a>增强知识的结构行</h3><p>结构化的知识，在我们联想到某一个背景知识的时候，不是一个一个想到的，而是一整片一整片，就像联通的logo中国结一样，编织在了一起，可以让我们拿到一串知识，甚至一套完成的方案，大大提高我们的思考效率。</p><h2 id="人工智能AI（人工神经网络）"><a href="#人工智能AI（人工神经网络）" class="headerlink" title="人工智能AI（人工神经网络）"></a>人工智能AI（人工神经网络）</h2><p>就我个人对科技和人类思考方式对理解，科学家对人类思考方式进行分析，进而抽象出模型——人工神经网络，目前主要有三类：基于卷积运算对神经网络，基于多元神经元的自编码神经网络，多层自编码圣经网络。</p><p>机器想要变的和人一样聪明，也需要学习，也需要训练，但是机器不需要休息，没有七情六欲，可以24小时不间断地训练，通过不断的输入背景知识，提高链接的强度，增强知识的结构行，提高知识的梳理能力，这些对于机器来说，都好像不需要花费很多时间。</p><p>只是在人眼的视觉上，人工智能目前还没能超越人类，有时猫和狗还会认错，但是像围棋这种计算性非常强的游戏，人工智能 AlphaGo 战胜柯洁就已经证明了，人工智能在计算能力上已经几乎超越了人类（严谨）。</p><p>未来人工智能会不会完全超越人类，我想是肯定的。</p><p>在2011年的美剧《Person of Interest》&#x2F;《疑犯追踪》中，拥有无限财富的富翁Fitch，同时也是一个程序员，开发出了一个可以提前预测人们犯罪行为的人工智能机器Machine，在这个开发的过程中机器曾经想要自己脱离Fitch的控制，作出违背人类伦理的事，最后经过多轮改进最后创造了一个拥有自主意识，但事却不会伤害人类的机器Machine，但是Fitch依然对其保持警惕。</p><p><img src="/../../assets/post-headers/%E6%88%91%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E6%80%9D%E8%80%83%E7%9A%84/%E7%96%91%E7%8A%AF%E8%BF%BD%E8%B8%AA1.png" alt="疑犯追踪2"></p><p>这部剧，非常推荐，如果喜欢人工智能一定不要错过。</p><p>另外，非常喜欢女主root的声音，也太好听了，曾经还在电台听从影视中截取的原声，哈哈哈。</p><p>剧终时的台词：</p><p>If you can hear this, you’re alone.</p><p>The only thing left of us is the sound of my voice.</p><p>I don’t know if any of us made it.</p><p>Did we win?</p><p>Did we lose?</p><p>I don’t know.</p><p>But either way, it’s over.</p><p>So let me tell you who we were.</p><p>Let me tell you who you are.</p><p>Someone once asked me if i had learned anything from it all.</p><p>So let me tell you what I learned.</p><p>I learned everyone dies alone.</p><p>But if you mean something to someone.</p><p>If you help someone.</p><p>Or love someone.</p><p>If even a single person remembers you.</p><p>Then maybe you never really die.</p><p>And maybe</p><p>this isn’t the end at all.</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习 </tag>
            
            <tag> 思考 </tag>
            
            <tag> 人工智能 </tag>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对马岛之魂，这游戏差点让我精神分裂！</title>
      <link href="/2022/09/05/article/%E5%AF%B9%E9%A9%AC%E5%B2%9B%E4%B9%8B%E9%AD%82%EF%BC%9A%E5%AF%BC%E6%BC%94%E5%89%AA%E8%BE%91%E7%89%88%E6%B8%B8%E7%8E%A9%E4%BD%93%E9%AA%8C%E6%9C%89%E6%84%9F/"/>
      <url>/2022/09/05/article/%E5%AF%B9%E9%A9%AC%E5%B2%9B%E4%B9%8B%E9%AD%82%EF%BC%9A%E5%AF%BC%E6%BC%94%E5%89%AA%E8%BE%91%E7%89%88%E6%B8%B8%E7%8E%A9%E4%BD%93%E9%AA%8C%E6%9C%89%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<p><img src="/../../assets/post-headers/%E5%AF%B9%E9%A9%AC%E5%B2%9B%E4%B9%8B%E9%AD%82/gostoftsushima2.jpeg" alt="对马岛之魂2"></p><p>在日本本土与中国大陆之间中有一个日本的小岛，名叫对马岛，  </p><p>游戏的背景，是蒙古军队，入侵日本途中，经过日本对马岛，日本武士，在对马岛战败，</p><p>境井仁，为了救其舅舅，解放对马岛，不惜变身战鬼的故事。</p><p><strong>开始游玩的过程中，我产生了一种非常不和谐的感觉</strong>，总感觉哪里怪怪的；</p><p>仔细思考之后，我发现问题可能出在这里：</p><p>我本身是一个中国人，在自己的民族认同感上，我也是中国人，</p><p>但是在游玩游戏的过程中，却要扮演【境井仁】这个日本人的角色，</p><p>而在游戏中，我要对抗的也正是作为侵略一方的古代中国（蒙古）。</p><p><strong>在真实世界的一个中国人我，却要在游戏里，去手刃古代中国（蒙古）的士兵，这种自相残杀的感觉，好似精神分裂的感觉，让我感到不适，</strong></p><p>而在游戏的世界观中，又的的确确没什么毛病，这段历史在元朝也确实发生过类似这样的征伐，而作为，被害的一方，总会有人奋起反抗；</p><p>就如：就如游戏故事中的【日本】是受害者一方；又如甲午中日战争的【中国】也是受害者的一方。</p><p>这也让我想到，当年国共内战的时期，总有人会提出：“中国人不打中国人”的口号，我想，当年的士兵也一定会有如此想法，</p><p>而如今我们都知道，现在已经是中华人民共和国了，</p><p>一边喊着“中国人不打中国人”的口号，一边继续着战争；</p><p>最后还是以一拨中国人，打跑，打败了另一拨中国人告终。  </p><p>或许这个世界的对与错，本就没有分得那么的清晰，</p><p>因为立场的不同，所以也无从谈论对错是非；</p><p>只是站在人性的角度而言，我希望世界和平，</p><p>人类幸福地渡过自己有生之年。</p><p><img src="/../../assets/post-headers/%E5%AF%B9%E9%A9%AC%E5%B2%9B%E4%B9%8B%E9%AD%82/gostoftsushima3.jpeg" alt="对马岛之魂3"></p><h2 id="后话评测"><a href="#后话评测" class="headerlink" title="后话评测"></a>后话评测</h2><p>回到游戏本身，</p><p>画面非常精美，每一帧都可以截图拿来当壁纸，  </p><p>配乐也非常契合主题，很有日本古典韵味，</p><p>故事主线清晰，支线作为补充一点也不多余，在探索过程中，将故事缓缓道来，  </p><p>游戏性一般，学习技能，收集素材，兑换衣服、装备，等等，后期缺少一些趣味，  </p><p>玩这个游戏更像是以第一人称视角，体验一部画面精美，配乐精致的日本武士电影。  </p><p>总的来说，对马岛之魂，我的主观评分8.5分，推荐游玩。</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 评测 </tag>
            
            <tag> 主机游戏 </tag>
            
            <tag> PS5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一篇文章试图教会你，搭建可用的 Vue3 企业版项目脚手架模板</title>
      <link href="/2022/08/26/code/2022.07.14-Vue3%20%E4%BC%81%E4%B8%9A%E7%89%88%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6%E6%A8%A1%E6%9D%BF/"/>
      <url>/2022/08/26/code/2022.07.14-Vue3%20%E4%BC%81%E4%B8%9A%E7%89%88%E9%A1%B9%E7%9B%AE%E8%84%9A%E6%89%8B%E6%9E%B6%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<blockquote><p>距离上一次，脚手架文章《手把手Vue3项目（一）》已经过去了10个月，</p><p>这一次，随着Vue3正式普及，同时也能让更多的小伙伴，快速进入Vue3项目的开发，</p><p>这里我重新搭建了一个Vue3脚手架模板，并试图教会大家如何安装和配置一个Vue3的项目，</p><p>其中涉及几乎一个企业项目所包含的所有内容，希望可以帮到大家，</p><p>此项目可以从gitee上clone后直接使用，地址在文末</p></blockquote><h2 id="使用手册"><a href="#使用手册" class="headerlink" title="使用手册"></a>使用手册</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. <span class="built_in">cd</span> vue3-scaffold-template</span><br><span class="line">2. pnpm install 或 npm install</span><br><span class="line">3. pnpm dev 或 npm run dev 启动项目</span><br><span class="line">4. pnpm jsondb 或 npm run jsondb 启动json-server服务器</span><br><span class="line"></span><br><span class="line">有两个案例，配置管理、时间管理App供大家参考。</span><br></pre></td></tr></table></figure><h1 id="安装和配置过程"><a href="#安装和配置过程" class="headerlink" title="安装和配置过程"></a>安装和配置过程</h1><blockquote><p>授人以鱼不如授人以渔，</p><p>这个脚手架，大家可以clone下来，直接进入自己的项目开发中，希望大家用的开心。</p></blockquote><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create vite</span><br></pre></td></tr></table></figure><p>然后按照提示操作即可！</p><p>这里我选择的是：Vue、TypeScript，Vite 目前默认Vue3</p><h2 id="配置src目录为默认目录"><a href="#配置src目录为默认目录" class="headerlink" title="配置src目录为默认目录"></a>配置src目录为默认目录</h2><p>vite.config.ts 中配置</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: [&#123; <span class="attr">find</span>: <span class="string">&#x27;@&#x27;</span>, <span class="attr">replacement</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./src&#x27;</span>) &#125;]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h2 id="安装Element-Plus"><a href="#安装Element-Plus" class="headerlink" title="安装Element-Plus"></a>安装Element-Plus</h2><p>参照 Element-Plus 快速上手</p><ol><li>安装 Element-Plus</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add element-plus</span><br></pre></td></tr></table></figure><ol start="2"><li>需要先安装按需导入的两款插件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add unplugin-vue-components unplugin-auto-import -D</span><br></pre></td></tr></table></figure><ol start="3"><li>vite.config.ts 中配置</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [<span class="title class_">ElementPlusResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>在实际代码中测试，是否生效</li></ol><h2 id="安装Element-Plus-图标"><a href="#安装Element-Plus-图标" class="headerlink" title="安装Element Plus 图标"></a>安装Element Plus 图标</h2><ol><li>安装Element Icon图标</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install @element-plus/icons-vue</span><br></pre></td></tr></table></figure><h3 id="自动导入图标-可以使用，但考虑到项目开发，本人弃用此方案"><a href="#自动导入图标-可以使用，但考虑到项目开发，本人弃用此方案" class="headerlink" title="自动导入图标(可以使用，但考虑到项目开发，本人弃用此方案)"></a>自动导入图标(可以使用，但考虑到项目开发，本人弃用此方案)</h3><blockquote><p>从 iconify(图标网站) 中自动导入任何图标集</p><p> 自动导入必须遵循名称格式 {prefix：默认为i}-{collection：图标集合的名称}-{icon：图标名称} </p><p>&lt;**el-icon** color&#x3D;”#000” size&#x3D;”22”&gt;</p><p>​    &lt;**i-ep-expand** &#x2F;&gt;</p><p>  &lt;&#x2F;**el-icon**&gt;</p></blockquote><ol start="2"><li>需要先安装按需导入的两款插件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add unplugin-icons unplugin-auto-import -D</span><br></pre></td></tr></table></figure><ol start="3"><li>vite.config.ts 中配置</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Icons</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">IconsResolver</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-icons/resolver&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AutoImport</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-auto-import/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElementPlusResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span></span><br><span class="line"><span class="comment">// 给插件开发者调试用的插件，个人使用没必要安装和使用</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Inspect</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-inspect&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pathSrc = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="title class_">AutoImport</span>(&#123;</span><br><span class="line">      <span class="comment">// Auto import functions from Vue, e.g. ref, reactive, toRef...</span></span><br><span class="line">      <span class="comment">// 自动导入 Vue 相关函数，如：ref, reactive, toRef 等</span></span><br><span class="line">      <span class="attr">imports</span>: [<span class="string">&#x27;vue&#x27;</span>],</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Auto import functions from Element Plus, e.g. ElMessage, ElMessageBox... (with style)</span></span><br><span class="line">      <span class="comment">// 自动导入 Element Plus 相关函数，如：ElMessage, ElMessageBox... (带样式)</span></span><br><span class="line">      <span class="attr">resolvers</span>: [</span><br><span class="line">        <span class="title class_">ElementPlusResolver</span>(),</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Auto import icon components</span></span><br><span class="line">        <span class="comment">// 自动导入图标组件</span></span><br><span class="line">        <span class="title class_">IconsResolver</span>(&#123;</span><br><span class="line">          <span class="attr">prefix</span>: <span class="string">&#x27;Icon&#x27;</span>,</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line"></span><br><span class="line">      <span class="attr">dts</span>: path.<span class="title function_">resolve</span>(pathSrc, <span class="string">&#x27;auto-imports.d.ts&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [</span><br><span class="line">        <span class="comment">// Auto register icon components</span></span><br><span class="line">        <span class="comment">// 自动注册图标组件</span></span><br><span class="line">        <span class="title class_">IconsResolver</span>(&#123;</span><br><span class="line">          <span class="attr">enabledCollections</span>: [<span class="string">&#x27;ep&#x27;</span>],</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">// Auto register Element Plus components</span></span><br><span class="line">        <span class="comment">// 自动导入 Element Plus 组件</span></span><br><span class="line">        <span class="title class_">ElementPlusResolver</span>(),</span><br><span class="line">      ],</span><br><span class="line"></span><br><span class="line">      <span class="attr">dts</span>: path.<span class="title function_">resolve</span>(pathSrc, <span class="string">&#x27;components.d.ts&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Icons</span>(&#123;</span><br><span class="line">      <span class="attr">autoInstall</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Inspect</span>(),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>在实际代码中测试，是否生效</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-icon color=&quot;#000&quot; size=&quot;22&quot;&gt;</span><br><span class="line">&lt;i-ep-expand /&gt;</span><br><span class="line">&lt;/el-icon&gt;</span><br></pre></td></tr></table></figure><h3 id="全局注册图标（本人选用方案）"><a href="#全局注册图标（本人选用方案）" class="headerlink" title="全局注册图标（本人选用方案）"></a>全局注册图标（本人选用方案）</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">  app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Eslint、Prettier、-Husky、Githooks、commit-msg"><a href="#Eslint、Prettier、-Husky、Githooks、commit-msg" class="headerlink" title="Eslint、Prettier、 Husky、Githooks、commit-msg"></a>Eslint、Prettier、 Husky、Githooks、commit-msg</h2><ol><li>需要安装的依赖<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># eslint校验相关</span></span><br><span class="line">pnpm add eslint eslint-plugin-vue @typescript-eslint/parser @typescript-eslint/eslint-plugin vue-eslint-parser  -D</span><br><span class="line"><span class="comment"># prettier格式化相关</span></span><br><span class="line">pnpm add prettier eslint-config-prettier eslint-plugin-prettier -D</span><br><span class="line"><span class="comment"># git提交相关</span></span><br><span class="line">pnpm add husky lint-staged -D</span><br><span class="line"><span class="comment"># commit-msg相关</span></span><br><span class="line">pnpm add @commitlint/config-conventional @commitlint/cli -D  </span><br></pre></td></tr></table></figure></li><li>相关配置</li></ol><h3 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h3><h4 id="eslint-js"><a href="#eslint-js" class="headerlink" title=".eslint.js"></a>.eslint.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslint.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* 指定如何解析语法。可以为空，但若不为空，只能配该值，原因见下文。*/</span></span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;vue-eslint-parser&#x27;</span>,</span><br><span class="line">  <span class="comment">/* 优先级低于parse的语法解析配置 */</span></span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>, <span class="comment">// Specifies the ESLint parser</span></span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">2021</span>, <span class="comment">// Allows for the parsing of modern ECMAScript features</span></span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>, <span class="comment">// Allows for the use of imports</span></span><br><span class="line">    <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">      <span class="attr">tsx</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">jsx</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/* 扩展配置，加一些插件 */</span></span><br><span class="line">    <span class="attr">extends</span>: [</span><br><span class="line">      <span class="string">&#x27;plugin:vue/vue3-recommended&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;prettier/@typescript-eslint&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;plugin:prettier/recommended&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">rules</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="eslintignore"><a href="#eslintignore" class="headerlink" title=".eslintignore"></a>.eslintignore</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">*.sh</span><br><span class="line">node_modules</span><br><span class="line">*.md</span><br><span class="line">*.woff</span><br><span class="line">*.ttf</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">dist</span><br><span class="line">*.zip</span><br><span class="line">/public</span><br><span class="line">/docs</span><br><span class="line">.husky</span><br><span class="line">.local</span><br><span class="line">/bin</span><br><span class="line">Dockerfile</span><br><span class="line">/src/utils/vendor</span><br></pre></td></tr></table></figure><h3 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h3><h4 id="prettierrc-js"><a href="#prettierrc-js" class="headerlink" title=".prettierrc.js"></a>.prettierrc.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">100</span>, <span class="comment">// 单行输出（不折行）的（最大）长度</span></span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>, <span class="comment">// 每个缩进级别的空格数</span></span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>, <span class="comment">// 是否在语句末尾打印分号</span></span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>, <span class="comment">// 是否使用单引号</span></span><br><span class="line">  <span class="attr">quoteProps</span>: <span class="string">&#x27;as-needed&#x27;</span>, <span class="comment">// 仅在需要时在对象属性周围添加引号</span></span><br><span class="line">  <span class="attr">bracketSpacing</span>: <span class="literal">true</span>, <span class="comment">// 是否在对象属性添加空格</span></span><br><span class="line">  <span class="attr">jsxBracketSameLine</span>: <span class="literal">true</span>, <span class="comment">// 将 &gt; 多行 JSX 元素放在最后一行的末尾，而不是单独放在下一行（不适用于自闭元素）,默认false,这里选择&gt;不另起一行</span></span><br><span class="line">  <span class="attr">htmlWhitespaceSensitivity</span>: <span class="string">&#x27;ignore&#x27;</span>, <span class="comment">// 指定 HTML 文件的全局空白区域敏感度, &quot;ignore&quot; - 空格被认为是不敏感的</span></span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&#x27;none&#x27;</span>, <span class="comment">// 去除对象最末尾元素跟随的逗号</span></span><br><span class="line">  <span class="attr">useTabs</span>: <span class="literal">false</span>, <span class="comment">// 不使用缩进符，而使用空格</span></span><br><span class="line">  <span class="attr">jsxSingleQuote</span>: <span class="literal">false</span>, <span class="comment">// jsx 不使用单引号，而使用双引号</span></span><br><span class="line">  <span class="attr">arrowParens</span>: <span class="string">&#x27;always&#x27;</span>, <span class="comment">// 箭头函数，只有一个参数的时候，也需要括号</span></span><br><span class="line">  <span class="attr">rangeStart</span>: <span class="number">0</span>, <span class="comment">// 每个文件格式化的范围是文件的全部内容</span></span><br><span class="line">  <span class="attr">proseWrap</span>: <span class="string">&#x27;always&#x27;</span>, <span class="comment">// 当超出print width（上面有这个参数）时就折行</span></span><br><span class="line">  <span class="attr">endOfLine</span>: <span class="string">&#x27;lf&#x27;</span> <span class="comment">// 换行符使用 lf</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="prettierignore"><a href="#prettierignore" class="headerlink" title=".prettierignore"></a>.prettierignore</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package.json</span><br><span class="line">/dist</span><br><span class="line">.DS_Store</span><br><span class="line">.eslintignore</span><br><span class="line">*.png</span><br><span class="line">.editorconfig</span><br><span class="line">.gitignore</span><br><span class="line">.prettierignore</span><br><span class="line">.eslintcache</span><br><span class="line">*.lock</span><br><span class="line">yarn-error.log</span><br><span class="line">.history</span><br><span class="line">CNAME</span><br><span class="line">yarn.lock</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="husky"><a href="#husky" class="headerlink" title="husky"></a>husky</h3><p>参考链接：</p><ul><li><p><a href="https://typicode.github.io/husky/#/?id=automatic-recommended">Husky</a></p></li><li><p><a href="https://commitlint.js.org/#/guides-local-setup">commit-msg</a></p></li></ul><h4 id="pre-commit-代码提交前（代码格式化、修复）"><a href="#pre-commit-代码提交前（代码格式化、修复）" class="headerlink" title="pre-commit 代码提交前（代码格式化、修复）"></a>pre-commit 代码提交前（代码格式化、修复）</h4><ol><li>配置husky</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用推荐的自动安装方式，这里我使用的pnpm的</span></span><br><span class="line">npx husky-init &amp;&amp; npm install       <span class="comment"># npm</span></span><br><span class="line">npx husky-init &amp;&amp; yarn              <span class="comment"># Yarn 1</span></span><br><span class="line">yarn dlx husky-init --yarn2 &amp;&amp; yarn <span class="comment"># Yarn 2+</span></span><br><span class="line">pnpm dlx husky-init &amp;&amp; pnpm install <span class="comment"># pnpm</span></span><br></pre></td></tr></table></figure><p>它将设置 husky，修改<code>package.json</code>并创建一个<code>pre-commit</code>您可以编辑的示例挂钩。默认情况下，它将<code>npm test</code>在您提交时运行，但是你需要自己找到<code>.husky/pre-commim文件</code>把其中的<code>npm test</code>改成<code>npm run lint-staged</code>，并在<code>package.json</code>中配置提交前所需要做的操作，配置内容如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span><span class="punctuation">,</span> <span class="comment">// ./husky/pre-commit执行的操作</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,ts,tsx,less,scss&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span><span class="punctuation">,</span> <span class="comment">// prettier格式化代码</span></span><br><span class="line">      <span class="string">&quot;eslint --cache --fix&quot;</span><span class="punctuation">,</span> <span class="comment">// eslint修复代码</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>commit-msg配置</li></ol><p>要使用<code>husky add</code>添加另一个钩子commit-msg</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg &#x27;npx --no -- commitlint --edit &quot;$1&quot;&#x27;</span><br></pre></td></tr></table></figure><p>它将在<code>.husky目录</code>下生成一个<code>commit-msg</code>文件，进行提交的commit-msg检测，如果不符合规范会给出提示；同时需要在<code>.commitment.config.js</code>中添加配置，下面的配置可以直接使用，也可以自定义</p><h4 id="commitment-config-js"><a href="#commitment-config-js" class="headerlink" title="commitment.config.js"></a>commitment.config.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>], <span class="comment">// 默认配置只有这一行，rules可以自己定义</span></span><br><span class="line">  <span class="comment">// 也可以自定义规则</span></span><br><span class="line">  <span class="comment">// ignores: [(commit) =&gt; commit.includes(&#x27;init&#x27;)],</span></span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;body-leading-blank&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>], <span class="comment">//body上面要有换行</span></span><br><span class="line">    <span class="string">&#x27;footer-leading-blank&#x27;</span>: [<span class="number">1</span>, <span class="string">&#x27;always&#x27;</span>], <span class="comment">//footer上面要有换行</span></span><br><span class="line">    <span class="string">&#x27;header-max-length&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>, <span class="number">108</span>], <span class="comment">//header最大108个字符</span></span><br><span class="line">    <span class="string">&#x27;subject-empty&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>], <span class="comment">//subject位不能为null</span></span><br><span class="line">    <span class="string">&#x27;type-empty&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>], <span class="comment">//type位不能为null</span></span><br><span class="line">    <span class="string">&#x27;type-enum&#x27;</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">      [</span><br><span class="line">        <span class="string">&#x27;feat&#x27;</span>, <span class="comment">// 新增功能</span></span><br><span class="line">        <span class="string">&#x27;fix&#x27;</span>, <span class="comment">// bug修复</span></span><br><span class="line">        <span class="string">&#x27;perf&#x27;</span>, <span class="comment">// 性能，体验优化</span></span><br><span class="line">        <span class="string">&#x27;style&#x27;</span>, <span class="comment">// 不影响程序逻辑的代码修改(修改空白字符，格式缩进，补全缺失的分号等，没有改变代码逻辑)</span></span><br><span class="line">        <span class="string">&#x27;docs&#x27;</span>, <span class="comment">// 文档更新</span></span><br><span class="line">        <span class="string">&#x27;refactor&#x27;</span>, <span class="comment">// 重构代码(既没有新增功能，也没有修复 bug)</span></span><br><span class="line">        <span class="string">&#x27;build&#x27;</span>, <span class="comment">// 主要目的是修改项目构建系统(例如 glup，webpack，rollup 的配置等)的提交</span></span><br><span class="line">        <span class="string">&#x27;ci&#x27;</span>, <span class="comment">// 主要目的是修改项目继续集成流程(例如 Travis，Jenkins，GitLab CI，Circle等)的提交</span></span><br><span class="line">        <span class="string">&#x27;test&#x27;</span>, <span class="comment">// 新增测试用例或是更新现有测试</span></span><br><span class="line">        <span class="string">&#x27;revert&#x27;</span>, <span class="comment">// 回滚某个更早之前的提交</span></span><br><span class="line">        <span class="string">&#x27;merge&#x27;</span>, <span class="comment">// 分支合并 Merge branch ？of ？</span></span><br><span class="line">        <span class="string">&#x27;chore&#x27;</span> <span class="comment">// 不属于以上类型的其他类型</span></span><br><span class="line">        <span class="comment">// &#x27;wip&#x27;,</span></span><br><span class="line">        <span class="comment">// &#x27;workflow&#x27;,</span></span><br><span class="line">        <span class="comment">// &#x27;types&#x27;,</span></span><br><span class="line">        <span class="comment">// &#x27;release&#x27;,</span></span><br><span class="line">      ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>测试</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检测上一次提交的commit是否符合提交规范</span></span><br><span class="line">npx commitlint --from HEAD~1 --to HEAD --verbose</span><br></pre></td></tr></table></figure><h2 id="Vue-Router-4"><a href="#Vue-Router-4" class="headerlink" title="Vue-Router 4"></a>Vue-Router 4</h2><ol><li>安装依赖</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vue-router@4</span><br></pre></td></tr></table></figure><ol start="2"><li>配置：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.ts ----------------创建路由------------------</span></span><br><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;routes&#125; <span class="keyword">from</span> <span class="string">&quot;@/router/config&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line"><span class="comment">// router/config.ts ----------------路由路径配置文件------------</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> routes = [</span><br><span class="line"><span class="comment">// 路由重定向</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">        <span class="comment">// component: Home</span></span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&quot;@modules/home/Index.vue&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&quot;@modules/about/Index.vue&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.ts -----------------使用router--------------------------</span></span><br><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;ant-design-vue/dist/antd.less&quot;</span></span><br><span class="line"><span class="comment">// import &#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="comment">// createApp(App).use(router).mount(&#x27;#app&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// App.vue  ----------------在页面中渲染路由加载的页面------------------------</span></span><br><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="comment">// This starter template is using Vue 3 &lt;script setup&gt; SFCs</span></span><br><span class="line"><span class="comment">// Check out &lt;https://v3.vuejs.org/api/sfc-script-setup.html#sfc-script-setup&gt;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ol start="3"><li>路由权限、nprogress</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts --------------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./permission&#x27;</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"><span class="comment">// 挂载实例 app</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// permissson文件----------------------------------------</span></span><br><span class="line"><span class="comment">// 路由权限处理</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router/index&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">NProgress</span> <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span> <span class="comment">// progress bar</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RouteLocationNormalized</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="title class_">NProgress</span>.<span class="title function_">configure</span>(&#123; <span class="attr">showSpinner</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>) =&gt; &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">start</span>()</span><br><span class="line">  <span class="comment">// if (to.name !== &#x27;SsoRedirect&#x27;) &#123;</span></span><br><span class="line">  <span class="comment">//   await initRequest();</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">path</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;40&#x27;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    to.<span class="property">meta</span> = <span class="keyword">from</span>.<span class="property">meta</span></span><br><span class="line">    to.<span class="property">name</span> = <span class="keyword">from</span>.<span class="property">name</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">handleRouterQuery</span>(to, <span class="keyword">from</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">NProgress</span>.<span class="title function_">done</span>()</span><br><span class="line">  <span class="comment">// 路由完成后做些事情</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">currentPath</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Reg</span> = <span class="regexp">/(^\/user(?!\/dashboard).*)/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理路由上的公共参数 避免手动代入</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">handleRouterQuery</span>(<span class="params">to: RouteLocationNormalized, <span class="keyword">from</span>: RouteLocationNormalized</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; path, fullPath &#125; = to</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Reg</span>.<span class="title function_">test</span>(path)) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">if</span> (currentPath !== fullPath) &#123;</span><br><span class="line">    currentPath = fullPath</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><ol><li>安装依赖</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add pinia</span><br></pre></td></tr></table></figure><ol start="2"><li>配置</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts--------------------------------------------------------</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/store/index&#x27;</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line"><span class="comment">// 挂载实例 app</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// @/store/index.ts，批量导入modules中的所有store--------------------</span></span><br><span class="line"><span class="keyword">import</span> &#123; acceptHMRUpdate &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modulesFiles = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">globEager</span>(<span class="string">&#x27;./modules/*.ts&#x27;</span>)</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(modulesFiles).<span class="title function_">forEach</span>(<span class="function">(<span class="params">modulePath</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = modulesFiles[modulePath]</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(store).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (key.<span class="title function_">startsWith</span>(<span class="string">&#x27;use&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">hot</span>) &#123;</span><br><span class="line">        <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">hot</span>.<span class="title function_">accept</span>(<span class="title function_">acceptHMRUpdate</span>(store[key], <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">hot</span>))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// @/store/modules/*.ts--------------------------------------------</span></span><br><span class="line"><span class="comment">// 一个使用例子</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IState</span> &#123;</span><br><span class="line">  <span class="attr">topic</span>: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useMessageStore = defineStore&lt;<span class="string">&#x27;message&#x27;</span>, <span class="title class_">IState</span>&gt;(<span class="string">&#x27;message&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">topic</span>: &#123;&#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Scss、tailwindcss、postcss、autoprefixer"><a href="#Scss、tailwindcss、postcss、autoprefixer" class="headerlink" title="Scss、tailwindcss、postcss、autoprefixer"></a>Scss、tailwindcss、postcss、autoprefixer</h2><ol><li>需要的依赖</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add postcss sass tailwindcss @tailwindcss/line-clamp autoprefixer -D</span><br></pre></td></tr></table></figure><p>posts.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="attr">tailwindcss</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">autoprefixer</span>: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>tailwind.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">content</span>: [<span class="string">&#x27;./index.html&#x27;</span>, <span class="string">&#x27;./src/**/*.&#123;vue,js,ts,jsx,tsx&#125;&#x27;</span>],</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">extend</span>: &#123;</span><br><span class="line">      <span class="attr">colors</span>: &#123;</span><br><span class="line">        <span class="attr">normal</span>: <span class="string">&#x27;#3693FF&#x27;</span>,</span><br><span class="line">        <span class="attr">hover</span>: <span class="string">&#x27;#0068E0&#x27;</span>,</span><br><span class="line">        <span class="attr">active</span>: <span class="string">&#x27;#004799&#x27;</span>,</span><br><span class="line">        <span class="attr">background</span>: <span class="string">&#x27;#f4f6fa&#x27;</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;#333333&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;#666666&#x27;</span>,</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;#303133&#x27;</span>,</span><br><span class="line">        <span class="attr">operate</span>: <span class="string">&#x27;#959EAD&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">spacing</span>: &#123;</span><br><span class="line">        <span class="number">32</span>: <span class="string">&#x27;32px&#x27;</span>,</span><br><span class="line">        <span class="number">4</span>: <span class="string">&#x27;4px&#x27;</span>,</span><br><span class="line">        <span class="number">36</span>: <span class="string">&#x27;36px&#x27;</span>,</span><br><span class="line">        <span class="number">16</span>: <span class="string">&#x27;16px&#x27;</span>,</span><br><span class="line">        <span class="number">24</span>: <span class="string">&#x27;24px&#x27;</span>,</span><br><span class="line">        <span class="number">8</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">        <span class="number">12</span>: <span class="string">&#x27;12px&#x27;</span>,</span><br><span class="line">        <span class="number">10</span>: <span class="string">&#x27;10px&#x27;</span>,</span><br><span class="line">        <span class="number">18</span>: <span class="string">&#x27;18px&#x27;</span>,</span><br><span class="line">        <span class="number">20</span>: <span class="string">&#x27;20px&#x27;</span>,</span><br><span class="line">        <span class="number">48</span>: <span class="string">&#x27;48px&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">borderRadius</span>: &#123;</span><br><span class="line">        <span class="attr">none</span>: <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">        <span class="attr">small</span>: <span class="string">&#x27;8px&#x27;</span>,</span><br><span class="line">        <span class="attr">large</span>: <span class="string">&#x27;16px&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fontSize</span>: &#123;</span><br><span class="line">        <span class="attr">base</span>: <span class="string">&#x27;14px&#x27;</span>,</span><br><span class="line">        <span class="attr">lg</span>: <span class="string">&#x27;16px&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;2lg&#x27;</span>: <span class="string">&#x27;19px&#x27;</span>,</span><br><span class="line">        <span class="attr">m</span>: <span class="string">&#x27;20px&#x27;</span>,</span><br><span class="line">        <span class="attr">xl</span>: <span class="string">&#x27;24px&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;2xl&#x27;</span>: <span class="string">&#x27;32px&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;3xl&#x27;</span>: <span class="string">&#x27;40px&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;4xl&#x27;</span>: <span class="string">&#x27;48px&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;jit&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;@tailwindcss/line-clamp&#x27;</span>)]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>vite.config.ts</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">scopeBehaviour</span>: <span class="string">&#x27;local&#x27;</span>,</span><br><span class="line">      <span class="attr">generateScopedName</span>: <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="axios封装和使用"><a href="#axios封装和使用" class="headerlink" title="axios封装和使用"></a>axios封装和使用</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里请大家直接去看代码，2个文件</span></span><br><span class="line"><span class="number">1</span><span class="string">.</span> <span class="string">src/service/index.ts</span> <span class="comment"># axios封装的内容</span></span><br><span class="line"><span class="number">2</span><span class="string">.</span> <span class="string">src/api/index.ts</span>  <span class="comment"># 封装后的axios如何使用</span></span><br></pre></td></tr></table></figure><h2 id="全局参数"><a href="#全局参数" class="headerlink" title="全局参数"></a>全局参数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入全局参数(需要什么全局参数可以自己去定义)</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Global</span> <span class="keyword">from</span> <span class="string">&#x27;./config/global&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注入全局参数</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">GLOBAL</span> = <span class="title class_">Global</span></span><br></pre></td></tr></table></figure><h2 id="Element-Plus-国际化"><a href="#Element-Plus-国际化" class="headerlink" title="Element Plus 国际化"></a>Element Plus 国际化</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="comment">// Element Plus 国际化</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> zhCn <span class="keyword">from</span> <span class="string">&#x27;element-plus/es/locale/lang/zh-cn&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Element Plus 国际化</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>, &#123; <span class="attr">locale</span>: zhCn, <span class="attr">size</span>: <span class="string">&#x27;default&#x27;</span> &#125;)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/vite-vue3-template-2022-07-06">gitee.com&#x2F;heyhaiyon</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>头条号：heyhaiyang</p><p>微信群：可以在公众号中获取，文章不让放群二维码</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> Ant-Design-Vue </tag>
            
            <tag> VUE3 </tag>
            
            <tag> TypeScript </tag>
            
            <tag> Vite </tag>
            
            <tag> 配置手册 </tag>
            
            <tag> VueRouter4 </tag>
            
            <tag> Vuex4 </tag>
            
            <tag> less </tag>
            
            <tag> tsx </tag>
            
            <tag> jsx </tag>
            
            <tag> Eslint </tag>
            
            <tag> Prettier </tag>
            
            <tag> Stylelint </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>黑镜S01E03《你的全部人生经历》观后感</title>
      <link href="/2022/03/29/article/2022.03.27-%E9%BB%91%E9%95%9CS01E02-%E4%B8%80%E5%8D%83%E4%BA%94%E7%99%BE%E4%B8%87%E7%9A%84%E4%BB%B7%E5%80%BC%20copy/"/>
      <url>/2022/03/29/article/2022.03.27-%E9%BB%91%E9%95%9CS01E02-%E4%B8%80%E5%8D%83%E4%BA%94%E7%99%BE%E4%B8%87%E7%9A%84%E4%BB%B7%E5%80%BC%20copy/</url>
      
        <content type="html"><![CDATA[<p>人很神奇的一点就是会遗忘，随着时间的消逝，之前的种种不愉快，都会随之淡忘，当然美好的事也会遗忘。</p><p>未来，人们的头内可以植入存储自己眼睛看到的画面，可以通过手里类似遥控器一样的东西，来控制播放、暂停，脑中想搜索什么，就想什么，让后选择想要回放的画面，当然也可以删除。</p><p>而黑镜的这个故事，却恰恰让你无法忘记所有的事，当你越是不想要想某件事的时候，你的思绪反而会一直去想它，这种你无法控制的思想，可能会让你整个人崩溃。</p><p>故事的最后，男主把头内的芯片剜了出来，以此忘记之前妻子出轨的记忆。</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科幻 </tag>
            
            <tag> 感悟 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>黑镜S01E02《一千五百万的价值》观后感</title>
      <link href="/2022/03/27/article/2022.03.28-%E9%BB%91%E9%95%9CS01E03-%E4%BD%A0%E7%9A%84%E5%85%A8%E9%83%A8%E4%BA%BA%E7%94%9F%E7%BB%8F%E5%8E%86/"/>
      <url>/2022/03/27/article/2022.03.28-%E9%BB%91%E9%95%9CS01E03-%E4%BD%A0%E7%9A%84%E5%85%A8%E9%83%A8%E4%BA%BA%E7%94%9F%E7%BB%8F%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>在未来世界，衣着统一的人们只通过虚拟网络交流，依靠日复一日骑自行车赚取赖以为生的消费点数。</p><p>不甘做行尸走肉的 <strong>Bing</strong> 在一次上厕所的时候，听到另一个女孩 <strong>Abi</strong> 美妙的歌声，被深深的触动，这是他迄今为止，最为真实时刻，让他感觉自己不是行尸走肉。</p><p>在他鼓起勇气去与之交谈的时候，系统检测到他有与异性接触愿望，直接就在面前的显示屏上播放色情视频，此时真是极度尴尬，想要关闭还要收费。</p><p>像极了现在的视频网站，没有会员，视频的开头、中间、结束都有广告；有会员，好的，可以跳过广告，但是令你没想到的是还有专属的vip广告，令人非常讨厌，有种被冒犯的感觉。同样，像现在的抖音，打开App就会直接播放视频，让我非常不适，有种被强迫着看的感觉，所以至今也没怎么用过抖音。</p><p>经过几次交流，<strong>Bing</strong> 和 <strong>Abi</strong> 都以为互相找到了知己，为此<strong>Bing</strong> 愿意倾尽自己所有点数帮助天籁般歌声的 <strong>Abi</strong>登上选秀舞台。</p><p>令人没想到的是，评委一上来就口吐芬芳，让 <strong>Abi</strong> 当场做色情表演，在 <strong>Abi</strong> 展示了她天籁般歌声之后，男评委依然劝 <strong>Abi</strong> 去做艳星，这样就可以财富自由，从此再也不用蹬自行车赚消费点数了，看台的观众们也都在起哄，让她答应，最后就是 <strong>Abi</strong> 沦为艳星。</p><p> <strong>Abi</strong> 沦为艳星的事实深深打击了<strong>Bing</strong> ，他疯狂骑自行车赚消费点数，终于用了大约20天的时间，攒够了一千五百万的消费点数，购买了登上选秀舞台的入场券🎫。</p><p>在舞台上，他拿着如刀一般的玻璃碎片，痛斥这这疯狂的世界：“把人当玩具，强迫人看各种不想看到广告、色情片段、洗脑影片，你想要闭眼不看，系统还会提示你必须看，如果你想要跳过它们还要付消费点数，如果你没有消费点可支付，你就不得不看。骑自行车赚消费点数的时候，面前的屏幕还会给你推荐各种视频——色情、搞笑、鸡汤，选了这些就要用消费点数，一边骑自行车为整个设施充电赚钱，一边被那些无厘头的搞笑视频逗得哈哈大笑，每天日复一日，如同在转轮中的小白鼠一般，从来不需要思考，只有不停的跑，直到死亡，没有人会在乎，甚至在死的最后，还要榨干最后一点价值，用来支付清洗死去的房间的费用”。</p><p>而当三个评委问 <strong>Bing</strong>：“来我的频道吧，每周两次，用刚才一样，激情的话语，说你想说的话，这样你就不用每天骑自行车赚消费点数了，直接实现财富自由”。</p><p>起初在自己喜欢之人 <strong>Abi</strong> 沦为艳星之事，深深打击了 <strong>Bing</strong> ，玻璃显示屏被撞碎，面对如刀一般的玻璃碎片，我曾以为他会想不开自杀，结束这一切。</p><p>但是他没有，他开始省吃俭用，疯狂赚消费点数，为了上哪个害他喜欢之人没有经受住财富自由的诱惑而沦为艳星的舞台，向所有人揭露这一切。</p><p>这一次，评委们像给 <strong>Abi</strong> 抛出财富自由的诱惑一样，把这个诱惑抛给了 <strong>Bing</strong> ，他痛斥这丑陋的世界，在你以为他会做出不同的选择的时候，结局却是异常的讽刺——他选择了一夜暴富的财富自由，每周两场拿着玻璃匕首的激情鸡汤，将他的鸡汤讲给那些无知的骑自行车的人。更加讽刺的是，视频里 <strong>Bing</strong> 在漆黑的小屋录完那激情的鸡汤后，起身走到另一边宽敞的房间，透过窗户就可以看到如亚马逊一样广阔的丛林。</p><p>在现实的世界，我不喜欢被强迫看视频前面的广告，不愿做深陷债务陷阱不停打工赚钱的小白鼠，庆幸的是，当我意识到，每一个App都在想尽办法，吸引我的注意力的时候，我察觉到了，有意识的控制自己做该做的事，而不是被那些App里的小姐姐、猎奇的操作所吸引沉迷于此刷个不停。</p><p>当一个人物质生活富足之后，就会想要实现有更高层次的需求，就如马斯洛的需求层次理论一样，希望自己不论贫穷富有，何时都可以精神富足。</p><p>2022年3月27日 晚</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科幻 </tag>
            
            <tag> 打工人 </tag>
            
            <tag> 现实 </tag>
            
            <tag> 诱惑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>智能交通——未来的交通是什么样子的？</title>
      <link href="/2022/03/01/article/2022.02.28-%E6%99%BA%E8%83%BD%E4%BA%A4%E9%80%9A%E2%80%94%E2%80%94%E6%9C%AA%E6%9D%A5%E7%9A%84%E4%BA%A4%E9%80%9A%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E5%AD%90%E7%9A%84%EF%BC%9F/"/>
      <url>/2022/03/01/article/2022.02.28-%E6%99%BA%E8%83%BD%E4%BA%A4%E9%80%9A%E2%80%94%E2%80%94%E6%9C%AA%E6%9D%A5%E7%9A%84%E4%BA%A4%E9%80%9A%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E5%AD%90%E7%9A%84%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="智能交通——未来的交通是什么样子的？"><a href="#智能交通——未来的交通是什么样子的？" class="headerlink" title="智能交通——未来的交通是什么样子的？"></a>智能交通——未来的交通是什么样子的？</h1><p>上一周学习了李彦宏大佬前一段时间出的一本书《智能交通》，有些许收获和想法，在这里分享一下。</p><h2 id="智能交通"><a href="#智能交通" class="headerlink" title="智能交通"></a>智能交通</h2><p>智能交通应该是什么样的？</p><p>这里有一个场景，<br>前一天晚上你和家人商量好和家人一起外出野餐，<br>晚上在家就想好了明天的安排，<br>预约一辆自动驾驶汽车，<br>明天早上9点到家门口接你，<br>按照你的要求导航到商场购物，<br>并且提示你预约商场附近的停车位，<br>到了商场附近，下车，<br>你和家人一起去逛商场买东西，<br>汽车自动按照预定安排自行前往预约到停车位。<br>购物完毕，在出商场时，点一下接送按钮，<br>就出现离你最近的接人位置，<br>你前往指定位置，<br>汽车也自动到指定位置接你上车，<br>上车之后，继续前往你们要野餐的目的地。</p><p>而这个过程中，<br>你很奇怪，<br>一路上居然没有堵车，<br>你有些疑惑，<br>竟然在观察路上的交通信号灯，<br>它们竟然是动态调节红灯和绿灯的时长，<br>你在想，<br>它们是怎么能知道绿灯的时长调整到多长才是最合适的，<br>怎么才能交通顺畅，也避免发生交通事故，<br>你又想，<br>这座城市是不是其他地方的交通状况也和你现在的地方一样，<br>那么多的路口，这么复杂的交通网，<br>每天车水马龙，它是怎么变的如此畅通。</p><p>下面正式进入今天的主题，尝试解释一下上面情景中出现的一些问题，《智能交通》的四个关键要素：人、车、路、环境。先来说一说大家可能都有所了解的智能汽车。</p><h2 id="智能汽车"><a href="#智能汽车" class="headerlink" title="智能汽车"></a>智能汽车</h2><p>书中提到未来10～40年，自动驾驶汽车将是将是智能交通的关键变量，它将为解决交通安全问题提供新思路和新方案。</p><p>研究表明自动驾驶汽车比人类开车更安全，听起来有点反常识，但是公安部数据表明，人为因素造成的交通事故比例占到90%，如果能避免这些人为因素，不就可以将交通事故降低90%。</p><p>按照SAE分级标准来看，自动驾驶技术共分六个等级，分别是：</p><ul><li>完全由驾驶员进行驾驶操作的L0；</li><li>拥有车道保持系统和自动制动系统的L1；</li><li>搭载自适应巡航、紧急制动刹车等功能的L2；</li><li>不需要手脚待命但需要驾驶员保持注意力集中的L3；</li><li>限定道路和环境条件完成所有驾驶操作的L4；</li><li>以及在任何场景下车辆可完成所有驾驶操作的L5。</li></ul><p>目前已经在售的汽车上搭载的自动驾驶技术如：特斯拉的NOA、蔚来的NOP、以及小鹏汽车的NGP等功能，都还属于L2级别辅助驾驶，允许车辆在特定条件下按照高精地图导航规划的路径自动巡航行驶。</p><p>高级别的自动驾驶最大的挑战是“无人”，这意味着，整个自动驾驶系统要能独立操控汽车，独立完成定位、感知、决策等动作，并且实现99.9999%成功率的目标，这些需要系统、AI、通信、芯片等各种技术的配合，挑战非常大，但是我深信未来无人驾驶一定会普及。</p><p>智能交通的未来我们在上面的一个场景中畅想了一下，但是在传统汽车和智能汽车更替的过渡阶段交通会变好吗？</p><p>书中给出了一个统计数据，一般司机每开一百公里，平均就会出现 12 次急刹车的行为。只要司机踩一脚刹车，后面的司机就得跟着踩刹车。这样刹车再启动的行为，一次可以传导好几公里，整个道路的通行效率就会下降。</p><p>而当车流中有了自动驾驶的汽车，通行效率就会得到明显的改善。一个仿真实验里，在“8”字形的道路场景当中，14 辆车中加入 1 辆自动驾驶的车，就能使平均车速提高一倍。原因是，自动驾驶汽车通过与前面的汽车之间保持缓冲，减少刹车次数，从而提升了车流的通行速度。</p><p>但是这只是一种理想情况，现实中的情况是交通的拥堵状况由技术最差的司机和最低配得车决定，在智能与不智能的混合阶段，群体中最差的个体决定了整个交通的畅通性，可以类比水桶效应。</p><p>所以在这个阶段，我们又该做些什么才能提升道路的畅通性呢？</p><p>书中有一个方案，叫做信控，准确地说是智能信号控制。</p><h2 id="智能信控"><a href="#智能信控" class="headerlink" title="智能信控"></a>智能信控</h2><p>智能交通要解决的难题是“怎样保障人们出行的安全和高效”，这个难题在道路交叉口展现得最充分。</p><p>来自不同方向的车辆和人群都在交叉路口汇集，让这里成了城市中大部分拥堵的源头。在交叉路口，协调各方通行的就是信号灯。随着技术的发展，智能信号灯控制成为主流趋势。</p><p>现在很多厂商都在朝“灯看车”这个目标努力，但是很多厂商达成的效果并不好。为什么呢？主要有两个原因：<br>一是，输入给智能信号系统的数据，不准确、也不全面。<br>二是，系统在计算时间的时候，仅仅考虑了单个路口，而不是对某个路段、某个区域，甚至整个城市所有的路口做全盘考虑。</p><p>如何改进这两点呢？</p><p>首先，用更先进的设备，如AI视觉技术、地磁、线圈，以及导航、车辆轨迹等互联网数据，在数字世界里，建立一个和物理世界一样的平行世界，信息越精确，信控就越精准。</p><p>一个好的智能信控系统，也会把行人的保障优先级提高。即使这个方向已经没有车了，但是摄像头检测到了行人，那系统会再把行人的行走速度考虑进来，计算绿灯时长，而不会直接掐断绿灯。</p><p>有了新技术，单个路口提供的数据更加准确了，也比原来多了更多的数据维度。那就要考虑更进一步的问题了。交通路网既然是一张网，不是一个个独立的点，就得让路口联动起来。</p><p>智能信控是一个复杂的系统，也是当下非常切实的解决拥堵的手段。</p><p>除了智能信控，缓解路口拥堵的智能交通管理方式还有两种非常值得关注：动态限速和预约出行。</p><p>先说说动态限速。很多人都觉得，车速快，通行效率就高。其实并不是这样的，在高峰时段，不做限速反而可能更容易造成拥堵。</p><p>中国工程院院士郭仁忠曾经举过一个例子，当车辆通过某个信号灯的路口时，限速 30 公里每小时，它的通行效率比 40 公里每小时，甚至 60 公里每小时都要高。</p><p>当然，每个路段的情况不一样，这个限速不一定是 30 公里每小时，但如果我们可以感知到道路的车流量变化，让限速能实时变化，协调车流和道路之间的关系，那就能够提高道路整体的通行效率。</p><p>再说说预约出行。根据麻省理工学院的学者在特定路段的测试，当有 60%的车辆参与预约出行，平均出行效率会提高 50%，这是非常可观的效果。</p><p>那你可能会说，如果每次出行都要预约，多麻烦呀。其实并不麻烦。每天出行者们几千万次的地图导航请求，就是一个个的预约行为。出行者什么时候出发，多长时间会到达哪个路段，那个路段到时候会有多大的流量，这些都是可以预测的。我们可以根据这些数据，为出行者规划出行，减少拥堵。</p><h2 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h2><p>智能交通的未来我们在上面的一个场景中也使用到了地图，这里的地图被称为“高精地图”。</p><p>之所以被称为“高精地图”，是因为地图如果要为自动驾驶服务，就不能像传统地图一样，只提供道路级导航信息，它还得精确到每一条车道上，高精地图的都精确度首先是标记地图要素都位置要更精确，达到分米级、厘米级别，其次是采集的数据维度更安全。</p><p>同时地图更新的时效性要更佳及时，也就是客观世界的变化必须以最短时间体现到地图里。小到路口新装的电子眼、临时的限速指示牌，大到新规划的公交路线、新开通的城市道路，还有临时的交通管制、拥堵和事故等，这些变化，如果没有第一时间更新到地图里，就会影响出行效率和出行安全。</p><p>现在这些信息主要靠车的定位信息和交警部门反馈，但是我们知道智能汽车全身有很多摄像头，每天都会采集很多数据，单独靠地图公司是没法天天都派采集车去采集数据。</p><p>未来我们可能去征求私家车车主的同意，利用私家车采集到的信息，通过大数据进行对比，与交警部门的公告确认，实现地图数据的小时级、分钟级的自动更新。</p><p>想要发展自动驾驶，高精地图是必不可少的基础性支撑。未来，当越来越多汽车搭载高精地图，我们就能够清楚知道每个时刻、每个位置的车流量和车速。甚至对未来的某个时刻，路网中即将有多少辆车，它们要前往哪条路的哪个车道，也能有精准的数据。从这个纬度看，地图就像未来智能交通的末梢神经，能时刻帮助城市管理者感知交通的脉搏。</p><p>书中讲到“全局优化”这个概念，与此相对应的个体优化，你看现在的地图，主要就是为个人出行服务，它提供的导航选择，比如用时最短、收费较少、里程最少等，都是在最大化个体的收益，并不会考虑别的车要怎么开。但是，当每一辆车都只以最大化个体收益为目标时，交通系统的整体效率，反而不是最大的。 </p><p>想要实现全局优化，我们不仅要通过分析城市大脑的数据，把交通整体效率的最优解给计算出来，还要通过地图，去干预每辆车的驾驶行为。</p><p>这就好像每一台车里都配备了一个交警，“他”可以实时指挥每一台车，按照整体交通效率最高的方式来行驶。“他”也许会告诉你：“现在开 30 迈，下一个红绿灯就可以不停了”，或者“跟前车保持 10 米的距离，你会更快到达目的地”，又或者“现在从最左车道换到次左车道，那样车速可以更快”。当有足够多的用户遵从这些建议时，交通系统的整体效率就得到了提升。</p><p>这里我想到一个场景，一个救护车运送一个需要急救的人，之前我们会看到，虽然会有车辆让行，但是遇到真的堵车，救护车也没有办法；但如果是智能交通，一个救护车运送一个急救的人，上报紧急需求，地图通过计算，规划路线，适当干预其他车辆的驾驶行为，计算出一条最优路线，分秒必争，可能就挽救了一条鲜活的生命。</p><h2 id="停车"><a href="#停车" class="headerlink" title="停车"></a>停车</h2><p>有车的朋友一定遇到过停车难的问题，其实这个问题可以分解为两个问题：</p><ul><li>一是停车位够不够，</li><li>二是停车位的利用率好不好。</li></ul><p>书中提到国家统计局发布的数据，到 2020 年末，我国民用汽车的保有量达到了 2.8 亿，但停车位只有 1.19 亿。而车位和车辆最合理的比例是 1.1：1，车位要比车辆数量多才合理。这么算下来，全国停车位缺口有将近 2 亿。停车位不够，这是个现实问题。</p><p>有朋友说，多建的不就好了，建当然要建，建多少，在哪儿建更合理，利用率更高呢？这是个问题，还有另外一个问题，我们现有的停车位真的利用好了吗？</p><p>书中讲到，解决目前很多城市停车难的问题，不是要一步到位地建设增量，而是要先盘活存量，提高车位资源利用效率。</p><p>这里有两个方法：</p><ul><li>一是全量连接</li><li>二是精细化管理</li></ul><p>全量连接简单解释，就是通过互联网共享商场、公共停车场、小区等等地区的停车位信息，就像你在电影院选座一样，哪里有空位看一眼你就知道了，导航的时候，直接带你或你的车到停车位上。</p><p>精细化管理就是通过车位管理系统，停车场的“僵尸车”，道路边的违法停车，车位管理系统直接发送提示消息，提醒车主挪车，如果超过时长不挪车，信息会直接推送到交管部门。</p><p>解决停车问题，实际上是在做“还路于行”，把道路归还给出行，让“把车停下来”更好地为“让车跑起来”服务。</p><h2 id="高速"><a href="#高速" class="headerlink" title="高速"></a>高速</h2><p>高速公路，在我们的交通出行中扮演了非常重要的角色。越来越多的人开车自驾游会选择走高速；甚至在很多大城市，人们日常通勤也会走高速。但是，你只要稍微回忆一下自己的经历，尤其当你是一位司机的时候，就会发现跑高速和跑城市道路的体验很不一样。</p><p>高速路是一个封闭系统，两个城市之间的高速路常常只有一条，两个高速路口的出口大多距离很远，高速路还都是单向设计，不能掉头。</p><p>城市道路中有很多路口，这些路口都是节点，路口的信号灯、摄像头都可以共享节点的信息，但是高速路只有很少的节点，实现智慧高速，就得让高速路也有自己的可控的节点。</p><p>怎么新增智能节点呢？现有的例子就是增加智慧灯杆，可以根据车流量情况、天气情况自动调节亮度、色温，还可以和其他能见度检测仪、专用摄像机、路面检测起、边缘计算设备等职能联动。</p><p>你可以这么理解，每个路灯都能连接到一个云端的“智慧大脑”，它可以将自己监测到的信息通过大脑，共享给其他设备。如果看到有事故发生了，电子路牌就展示“前方多少公里处，有事故发生，请小心驾驶！”，如果你的车是智能汽车，车路协同的情况下，你在车里也能收到语音提示信息。</p><p>书中还提到智慧高速有两个值得探索的方向，全天候通行和高速路自动驾驶。</p><p>说起高速自动驾驶，目前的L2级别的智能汽车，在高速路上基本可以实现自动驾驶、自动跟车，不过现在的自动驾驶还只能辅助驾驶，我们已经迈出了一步，未来的“无人驾驶”还会远吗？</p><p>全天候通行，就是要解决恶劣天气下的通行安全问题，而解决这个问题就要用到车路协同。</p><h2 id="车路协同"><a href="#车路协同" class="headerlink" title="车路协同"></a>车路协同</h2><p>车路协同，简单讲就是车、路、人观景之间能够做到实时动态的交互联动。</p><p>有这样一个场景，一辆汽车，开到路口，路口的摄像头等设备检测到车流量、车速等信息，再把这些信息实时反馈给智能信号灯，系统自动调节红绿灯的时长，让车辆快速通行。</p><p>目前在自动驾驶方面，有两条主要的技术路线，一个是单车智能，另一个就是车路协同。百度选择的是车路协同这一方案，而与此相对的是谷歌和特斯拉选择的单车智能。孰优孰略，现在还犹未可知，都有发展的空间。</p><p>但是从兼容性来考虑的话，车路协同，可以兼容当下存在的交通难题，以及未来自动驾驶汽车普及时的过渡阶段的难题。</p><p>车路协同，可以解决视野盲区、极端天气等交通安全问题，在提升交通效率方面，也能发挥很大作用。</p><p>车路协同，</p><ul><li>首先需要利用现有的信号灯、摄像头，获取数据，</li><li>同时要建立智慧大脑，让路变得更加智慧，</li><li>其次智能汽车增加，或者传统汽车改装，实现车与路的信息交互。</li></ul><p>车路协同怎么保障数据安全？这里书中提到可以通过设立智慧交通运营商来解决这个问题。</p><p>什么是智能交通运营商？你可以类比中国移动这样的电信运营商，电信运营商负责的是一个城市通信网络的安全和稳定，为公众提供通信服务。智能交通运营商也类似，它可以作为城市交通数据的运营主体，同时也负责保障数据的安全。而且因为交通数据很敏感，它必须由政府或者国有资本主导成立，接受政府管控。</p><h2 id="MaaS：一站式出行"><a href="#MaaS：一站式出行" class="headerlink" title="MaaS：一站式出行"></a>MaaS：一站式出行</h2><p>这是一个诞生于欧洲的理念，M-A-A-S，是 Mobility as a Service 的缩写，可以翻译成“出行即服务”。简单来说，它是一种出行服务的模式，呈现出来的就是一个平台，一个可供所有人使用的应用系统。一个城市的 MaaS 平台，会把城市里所有类型的交通工具都整合起来，数据共享，统一调度，统一支付，统一管理。</p><p>设想一个准时赴约的场景。MaaS 方案可能是这样的：</p><p>你要出门约会了，<br>输入目的地，<br>平台会提醒你，<br>如果现在打车过去，你会迟到半小时，<br>建议先打车到地铁站，坐一段地铁，<br>出站后再打车。<br>好，你确认这个方案后，<br>一辆短程网约车就来接你了，<br>把你送到了地铁站。进地铁站，也不用买票，<br>平台会提醒你哪一节车厢人少有座，<br>快到站还会提醒你准备下车。<br>等你走出地铁站，<br>网约车刚好开到你所在的那个出站口，<br>一分钟都不耽误，直接把你送去目的地。</p><p>你结束行程，虽然切换了三种交通工具，但是在一个平台，直接一键统一支付，效率一下子就提上来了。</p><p>如果各类交通资源都能得到高效利用，不同的交通工具做到无缝的衔接，就能减少人等待、切换的时间，让日常出行体验更加顺滑。</p><p>就我个人体验来讲，在上海，目前地铁、公交、轮渡都可以通过手机App大都会来乘坐，当然也可以NFC上海交通卡或者实体交通卡来实现一站式出行，而且，在你乘坐地铁、公交换乘的过程中2个小时以内都是有优惠的。只是类似共享单车这种还没有接入到上海大都会平台。</p><h2 id="百度：一家人工智能公司"><a href="#百度：一家人工智能公司" class="headerlink" title="百度：一家人工智能公司"></a>百度：一家人工智能公司</h2><p>大家应该都知道，百度是做搜索起家，PC时代，百度通过做搜索引擎一度成为中国最厉害的互联网企业，但是在移动互联网时代，百度真是干啥啥不行，之前是曾经的BAT第一，现在市值约占AT任意一个的二分之一。</p><p>但是在另一个领域——人工智能方面百度已经投入了十多年，今天要说的就是百度基于人工智能在自动驾驶方面的一些探索。</p><p>这里有一些数据说明一下百度在自动驾驶上的成就，下图为2021年中国自动驾驶专利排行榜TOP10，百度2021年申请专利2009项排名第一，自动驾驶相关专利总计3000余项。讲自动驾驶，百度是专业的，现在我们更应该把百度当成一个做人工智能公司，而不是一个搜索引擎的公司。<br><img src="/../../assets/post-headers/20220228/Pasted%20image%2020220228221956.png"></p><p>提到智能交通，也许你会立刻想到现在的智能汽车，诸如特斯拉、蔚来、小鹏等等，然而智能汽车只是其中的一个参与方。智能交通是智能城市的组成部分，智能城市又是智能社会的一个重要因素。</p><p>基于这样的终局思考，百度的从自动驾驶技术研发，逐渐延伸到智能汽车制造、车路协同、智能交通、数字城市运营等方面，几乎是全球为数不多的进行全面布局的公司。</p><p>截止2022年百度的市值是500多亿美元，按照自动驾驶技术的发展，猜测未来百度的市值会重新上涨起来，达到3000亿美元甚至更高，华为想成为智能电动汽车的博世，而百度开源的自动驾驶解决方案——阿波罗很可能成为汽车的操作系统，在将来成为手机操作系统的Android，PC中的Windows这样的存在。</p><h2 id="过去的畅想"><a href="#过去的畅想" class="headerlink" title="过去的畅想"></a>过去的畅想</h2><p>在2020年底的时候，写过一点关于自动驾驶的一点点畅想，如下图</p><p><img src="/../../assets/post-headers/20220228/%E5%BD%93%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6%E6%8A%80%E6%9C%AF%E5%BE%97%E5%88%B0%E5%B9%BF%E6%B3%9B%E5%BA%94%E7%94%A8%E6%97%B6.jpg"></p><h2 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h2><p>读完《智能交通》这本书之后，在2022年2月的最后一天，我们可以上升一个纬度，未来的智能交通，或许就是文章中提到几个，甚至比之更佳完美的场景。</p><h2 id="其他碎片"><a href="#其他碎片" class="headerlink" title="其他碎片"></a>其他碎片</h2><p>在传统汽车和智能汽车过渡的时期，在冬奥园区里已经出现了一种新的职业5G云代驾，不用人走到跟前就可以帮你开车，代驾的驾驶员只需要坐在办公室里，就像你玩游戏拿个手柄，在游戏里开车一样，驾驶员坐在办公里，就控制了你的汽车把你送回家。</p><p>百度开源的自动驾驶技术解决方案——Apollo 阿波罗，可能成为像Android，Windows一样普世的底层基建。</p><p>之前的地图按照个人利益最大化，做计算推荐；现在根据大数据以整个社会交通的流畅度做推荐是不是真的最好；地图公司会不会对这种以个人利益最大化的要求收费，当以整体交通流畅度做计算，某辆车的从起始位置到目的地的时间可能不是最短，但地图公司是否会以花钱购买最优解，或者说花钱来省时间。</p>]]></content>
      
      
      <categories>
          
          <category> article </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动驾驶 </tag>
            
            <tag> 科技 </tag>
            
            <tag> 汽车 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>打印机选购指南</title>
      <link href="/2022/02/18/digital/2020.12.27-%E6%89%93%E5%8D%B0%E6%9C%BA%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/"/>
      <url>/2022/02/18/digital/2020.12.27-%E6%89%93%E5%8D%B0%E6%9C%BA%E9%80%89%E8%B4%AD%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h2 id="主要功能："><a href="#主要功能：" class="headerlink" title="主要功能："></a>主要功能：</h2><ol><li>支持黑白&#x2F;彩色打印</li><li>复印</li><li>扫描</li><li>无线打印<ul><li>可以通过局域网打印</li><li>QQ、微信、钉钉等打印</li><li>iOS、Android、Windows、Mac设备都支持</li><li>手机需要下载惠普的打印软件（可能）</li></ul></li><li>USB有线打印</li><li>照片打印</li></ol><h2 id="耗材"><a href="#耗材" class="headerlink" title="耗材"></a>耗材</h2><ol><li><p>原装</p><ol><li><p>PG-845黑色 ：70左右（不同产品墨盒型号不同，这里以佳能MG3080为例）</p></li><li><p>CL-846彩色：70左右（不同产品墨盒型号不同，这里以佳能MG3080为例）</p></li></ol></li><li><p>原装墨盒改进可加墨（打孔）</p><ol><li>墨盒价格同上70左右</li><li>墨水100ml&#x2F;10元，同时也有便宜点的250ml&#x2F;8元，500ml&#x2F;14元等等</li></ol></li><li><p>纸</p><ol><li>打印纸（得力佳宣、铭锐，一般买70g的500页&#x2F;包&#x2F;20元，80g的稍贵但是纸张硬朗，一般合同什么的用80mg或者更好的纸）</li><li>复印纸（稍贵，没有买的必要）</li><li>相片纸（应该没有买这个必要）</li></ol></li></ol><p><img src="/../../assets/post-headers/20201227/image-20201227181138514.png" alt="image-20201227181138514"></p><p>tips：蓝色佳宣，绿色铭锐，看一下名字就行。</p><h2 id="产品推荐"><a href="#产品推荐" class="headerlink" title="产品推荐"></a>产品推荐</h2><h3 id="1、佳能MG3080-白色、红色、黑色机身"><a href="#1、佳能MG3080-白色、红色、黑色机身" class="headerlink" title="1、佳能MG3080 (白色、红色、黑色机身)"></a>1、佳能MG3080 (白色、红色、黑色机身)</h3><p>淘宝链接：<u><strong><a href="https://detail.tmall.com/item.htm?spm=a1z10.5-b-s.w4011-14873283710.124.4bdf1242kU0iMU&id=545236025345&rn=3d2ea60565a4dd1e67571c4d5ddceb62&abbucket=17&skuId=4069605888380">佳能MG3080</a></strong></u></p><p><img src="/../../assets/post-headers/20201227/image-20201227164253756.png" alt="image-20201227164253756"></p><h4 id="根据需求产品对比："><a href="#根据需求产品对比：" class="headerlink" title="根据需求产品对比："></a>根据需求产品对比：</h4><p><img src="/../../assets/post-headers/20201227/%E4%BD%B3%E8%83%BD%E6%89%93%E5%8D%B0%E6%9C%BA%E5%AF%B9%E6%AF%94.png" alt="佳能打印机对比"></p><h3 id="2、惠普DJ2676"><a href="#2、惠普DJ2676" class="headerlink" title="2、惠普DJ2676"></a>2、惠普DJ2676</h3><p><img src="/../../assets/post-headers/20201227/image-20201227165401993.png" alt="image-20201227165401993"></p><p>淘宝链接：**<u><a href="https://detail.tmall.com/item.htm?spm=a1z10.5-b-s.w4011-23365477247.68.2cc752e0EsX8Ps&id=588640788044&rn=289611a6b9a5924fdef7105124c617c9&abbucket=17&sku_properties=1627207:3232482">HP惠普DJ2676</a></u>**</p><h4 id="根据需求产品对比：-1"><a href="#根据需求产品对比：-1" class="headerlink" title="根据需求产品对比："></a>根据需求产品对比：</h4><p><img src="/../../assets/post-headers/20201227/image-20201227173057357.png" alt="image-20201227173057357"></p>]]></content>
      
      
      <categories>
          
          <category> digital </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 582-硬件 </tag>
            
            <tag> 打印机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>手把手 Vue3 项目(二) —— 安装配置 json-server 模拟后端服务，测试注册和登录功能</title>
      <link href="/2022/02/18/code/2021.12.25-json-server%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/"/>
      <url>/2022/02/18/code/2021.12.25-json-server%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="手把手-Vue3-项目（二）——安装配置-json-server-、-json-server-auth-模拟后端服务，测试注册和登录功能"><a href="#手把手-Vue3-项目（二）——安装配置-json-server-、-json-server-auth-模拟后端服务，测试注册和登录功能" class="headerlink" title="手把手[[Vue3]]项目（二）——安装配置 [[json-server ]]、 [[json-server-auth]] ,模拟后端服务，测试注册和登录功能"></a>手把手[[Vue3]]项目（二）——安装配置 [[json-server ]]、 [[json-server-auth]] ,模拟后端服务，测试注册和登录功能</h1><blockquote><p>本文包含：</p><ol><li><p>json-server 的安装 配置 验证</p></li><li><p>json-server-auth 的安装 配置 验证</p></li><li><p>注册和登录页面</p></li></ol><p>涉及知识点：axios，router，http请求，跨域，vue3，ts 等等</p><p>欢迎小伙伴，加入微信群，可以在文末公众号里获取。</p></blockquote><h2 id="json-server"><a href="#json-server" class="headerlink" title="json-server"></a>json-server</h2><h2 id="安装配置-json-server"><a href="#安装配置-json-server" class="headerlink" title="安装配置 json-server"></a><strong>安装配置 json-server</strong></h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add json-server -D</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// 直接看下面验证的时候如何使用，以及使用的时候遇到的问题</span><br></pre></td></tr></table></figure><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a><strong>验证</strong></h3><h4 id="一、基本使用大家参考-json-server-Github"><a href="#一、基本使用大家参考-json-server-Github" class="headerlink" title="一、基本使用大家参考 json-server Github"></a>一、基本使用大家参考 <a href="https://github.com/typicode/json-server">json-server Github</a></h4><p>简单来说分了三步</p><ol><li>创建一个 json 文件当作你要访问的数据库，在你安装好<code>json-server</code>的时候会默认生成一个db.json,</li><li>启动 json-server 服务器，直接运行<code>json-server --watch db.json</code>，终端会提示现在这个数据库存在的资源</li><li>在浏览器地址输入启动终端中提示你拥有的资源地址，如：<code> http://localhost:3000/posts/1</code>，就可以访问到一组json数据。<strong>这里的数据是真实的数据，可以在开发者工具的 network 中访问到，不像 mock 的数据会被劫持，在浏览器开发者工具中看不到请求的数据。</strong></li></ol><h4 id="二、项目中的简单使用"><a href="#二、项目中的简单使用" class="headerlink" title="二、项目中的简单使用"></a>二、项目中的简单使用</h4><ol><li>准备一个项目放在项目中的 json 文件，作为我们项目的数据库 database，这里我创建在<code>./src/service/json-server/data.json</code>,下面是我加的测试数据，名字是<code>testdata</code>。</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;testdata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请求成功！&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typicode&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>在 package.json 中配置启动 json-server 的命令，只需更改我们存放数据的 json 文件地址就可以了。</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;jsondb&quot;</span><span class="punctuation">:</span> <span class="string">&quot;json-server --watch ./src/service/json-server/data.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>理解项目 API 的访问机制</li></ol><ul><li><p>我们启动 json-server，<code>npm jsondb</code>，我这里项目一直使用的<code>pnpm</code>作为包管理器，所以使用<code>pnpm jsondb</code>来启动，</p></li><li><p>Home可以理解为后端服务器的地址，当我们直接在输入<a href="http://localhost:3000/users%EF%BC%8C">http://localhost:3000/users，</a></p></li><li><p>现在我们ctrl+c停止，json-server 的服务，让后启动我的使用vite搭建的 Vue 项目，发现默认地址，也是 <a href="http://localhost:3000，现在我的页面是在访问http://localhost:3000时，重定向到`/home`页面。">http://localhost:3000，现在我的页面是在访问http://localhost:3000时，重定向到`/home`页面。</a></p><blockquote><p>我们在访问浏览器地址的时候一方面，我要通过路由转跳到当前页面，还需要当前页面能够获取到数据，但是同时启动 vue 项目和 json-server 两个地址就冲突，后启动的地址会被默认更改到<a href="http://localhost:3001，但是我们要通过访问http://localhost:3000/users">http://localhost:3001，但是我们要通过访问http://localhost:3000/users</a> 来获取到用户信息，这个时候就和我们实际工作中项目的开发非常类似了。</p><p>我们一般把前端项目部署到nginx，访问前端页面，获取数据又是从另一个服务器来获取，这个时候两个域名不一样，但是我们要拿到我们想要的数据，就需要规定好接口的地址、参数等一些信息，通过本地跨域，或者nginx转发来访问服务器。</p></blockquote></li></ul><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20211101100224812-5732148.png" alt="image-20211101100224812"></p><p>启动 json-server 图</p><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20211101101215982-5732738.png" alt="image-20211101101215982"></p><p>浏览器中访问数据库图</p><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20211101101555260-5732956.png" alt="image-20211101101555260"></p><p>启动项目图</p><ol start="4"><li>前端跨域代理的配置，在 <code>vite.config.ts</code> 中<ul><li>这里我们更改项目等启动端口到3030</li><li>现在我们前端项目路径为 <code>http://localhost:3030</code>，需要代理所有以 <code>/api</code> 开头的 API 请求，把它转发到 <code>http://localhost:3000</code>，并且后端的 API 路径中不带 <code>/api</code>前缀，需要自动去掉 <code>/api</code>前缀</li></ul></li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server</span>: &#123;</span><br><span class="line">    <span class="comment">// host: &#x27;localhost&#x27;,</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">3030</span>,</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="comment">//这里是通过请求/api 来转发到 https://api.pingping6.com/</span></span><br><span class="line">      <span class="comment">//假如你要请求https://api.*.com/a/b</span></span><br><span class="line">      <span class="comment">//那么axios的url，可以配置为 /api/a/b</span></span><br><span class="line">      <span class="string">&#x27;^/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:3000/&#x27;</span>,</span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">rewrite</span>: <span class="function">(<span class="params">path</span>) =&gt;</span> path.<span class="title function_">replace</span>(<span class="regexp">/^\/api/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="comment">// configure: (proxy, options) =&gt; &#123;</span></span><br><span class="line">        <span class="comment">//   // proxy 是 &#x27;http-proxy&#x27; 的实例</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><ol start="5"><li>下面我们配置一下 API ，axios 的配置，可以到 Gitee 代码里看一下 &#x2F;service&#x2F;index.ts 文件，里面有注释，写的也通俗易懂。</li></ol><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * * 在具体模块中导入具体的 config 类型，配置通用的 config 类型，方便复用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@/service&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Api</span> &#123;</span><br><span class="line">  testData = <span class="string">&#x27;/api/testdata&#x27;</span>,</span><br><span class="line">  testPost = <span class="string">&#x27;/api/postTestList&#x27;</span>,</span><br><span class="line">  testPatch = <span class="string">&#x27;/api/patchTestList&#x27;</span>,</span><br><span class="line">  testPut = <span class="string">&#x27;/api/putTestList&#x27;</span>,</span><br><span class="line">  testDelete = <span class="string">&#x27;/api/deleteTestList&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">testData</span> = (<span class="params">params?: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> http.<span class="property">get</span>&lt;<span class="built_in">any</span>&gt;(<span class="title class_">Api</span>.<span class="property">testData</span>, params)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">testPost</span> = (<span class="params">data: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> http.<span class="property">post</span>&lt;<span class="built_in">any</span>&gt;(<span class="title class_">Api</span>.<span class="property">testPost</span>, data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="6"><li>下面写个页面，测试一下，src&#x2F;modules&#x2F;components&#x2F;test&#x2F;json-server.vue</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;通过测试页面通过json-server，获取数据&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; testData &#125; from &#x27;@/api/test/index&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  name: &#x27;json-server&#x27;,</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const testJsonServer = () =&gt; &#123;</span><br><span class="line">      testData().then((res) =&gt; &#123;</span><br><span class="line">        console.log(&#x27;testData&#x27;, res.data.data)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;mounted&#x27;)</span><br><span class="line">      testJsonServer()</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;</span><br><span class="line">      testJsonServer</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="7"><li>打开页面可以访问到数据</li></ol><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20211101144501545.png" alt="image-20211101144501545"></p><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20211101144549668-5749151.png" alt="image-20211101144549668"></p><h2 id="安装配置-json-server-auth"><a href="#安装配置-json-server-auth" class="headerlink" title="安装配置 json-server-auth"></a><strong>安装配置 json-server-auth</strong></h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add json-server-auth -D</span><br></pre></td></tr></table></figure><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// 直接进入验证</span><br></pre></td></tr></table></figure><h3 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a><strong>验证</strong></h3><h4 id="1-注册"><a href="#1-注册" class="headerlink" title="1. 注册"></a>1. 注册</h4><ul><li><strong><code>POST /register</code></strong></li><li><strong><code>POST /signup</code></strong></li><li><strong><code>POST /users</code></strong></li></ul><p><strong><code>email</code></strong> 和 <strong><code>password</code></strong> 必填，且在请求体中，除了必填之外，自己也可以根据需要添加其他的数据username，age等等</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST /register</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;olivier@mail.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bestPassw0rd&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>返回结果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 201 Created</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;accessToken&quot;</span>: <span class="string">&quot;xxx.xxx.xxx&quot;</span>,</span><br><span class="line">  <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;olivier@mail.com&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-登录"><a href="#2-登录" class="headerlink" title="2. 登录"></a>2. 登录</h4><ul><li><strong><code>POST /login</code></strong> &#x2F;&#x2F; 我用login的时候Apifox可以请求到，在项目中就<code>login</code>就不行，换成<code>signin</code>就可以请求通，很奇怪</li><li><strong><code>POST /signin</code></strong></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST /login</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;olivier@mail.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bestPassw0rd&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>返回结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">200</span> OK</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;accessToken&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx.xxx.xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;olivier@mail.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;firstname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Olivier&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lastname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Monge&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="3-使用-postman-或者-Apifox，配置之后，测试一下，register添加两组数据，再使用这两组数据登录，可以之后就在项目中继续"><a href="#3-使用-postman-或者-Apifox，配置之后，测试一下，register添加两组数据，再使用这两组数据登录，可以之后就在项目中继续" class="headerlink" title="3. 使用 postman 或者 Apifox，配置之后，测试一下，register添加两组数据，再使用这两组数据登录，可以之后就在项目中继续"></a>3. 使用 postman 或者 Apifox，配置之后，测试一下，register添加两组数据，再使用这两组数据登录，可以之后就在项目中继续</h4><h4 id="4-具体代码中实践，顺便巩固一下-Vue3、-TS-和-Ant-Design-Vue-3-0"><a href="#4-具体代码中实践，顺便巩固一下-Vue3、-TS-和-Ant-Design-Vue-3-0" class="headerlink" title="4. 具体代码中实践，顺便巩固一下 Vue3、 TS 和 Ant Design Vue 3.0"></a>4. 具体代码中实践，顺便巩固一下 Vue3、 TS 和 Ant Design Vue 3.0</h4><p>下面是简单写的注册和登录页面，切换注册的时候，还有一点问题，后面我再看一下，大家也可以看一下代码，可以一起交流，</p><p>目前登录功能是可以测试的，接口也是通的</p><p>下面的代码没有样式，样式有很多行，影响阅读，大家可以 clone Gitee 代码下来看。</p><p><img src="/image-20211101162107062.png" alt="image-20211101162107062"></p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a-tabs</span> <span class="attr">animated</span> <span class="attr">:tabBarGutter</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;card&quot;</span> <span class="attr">v-model:activeKey</span>=<span class="string">&quot;activeKey&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">a-tab-pane</span> <span class="attr">key</span>=<span class="string">&quot;login&quot;</span> <span class="attr">tab</span>=<span class="string">&quot;账号密码登录&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a-form</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">:model</span>=<span class="string">&quot;formState&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">layout</span>=<span class="string">&quot;vertical&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">labelAlign</span>=<span class="string">&quot;right&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">a-form-item</span> <span class="attr">label</span>=<span class="string">&quot;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">a-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">size</span>=<span class="string">&quot;large&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">v-model:value</span>=<span class="string">&quot;formState.email&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">placeholder</span>=<span class="string">&quot;请输入邮箱&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">allowClear</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                /&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">a-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">a-form-item</span> <span class="attr">label</span>=<span class="string">&quot;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">a-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">size</span>=<span class="string">&quot;large&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">v-model:value</span>=<span class="string">&quot;formState.password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  <span class="attr">allowClear</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                /&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">a-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-button&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">v-if</span>=<span class="string">&quot;switchBtn&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">v-else</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;register&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">a-button</span> <span class="attr">type</span>=<span class="string">&quot;link&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleChange&quot;</span>&gt;</span>&#123;&#123; buttonTitle &#125;&#125;<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">a-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">a-tab-pane</span> <span class="attr">key</span>=<span class="string">&quot;register&quot;</span> <span class="attr">tab</span>=<span class="string">&quot;扫码登录&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-qrcode&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;qrcode-image&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;primary-color&quot;</span>&gt;</span>二维码失效时间 5 秒<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">a-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">a-tabs</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--      &lt;div class=&quot;login-button&quot;&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--        &lt;a-button type=&quot;primary&quot; @click=&quot;register&quot;&gt;注册&lt;/a-button&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--        &lt;a-button type=&quot;primary&quot; @click=&quot;login&quot;&gt;登录&lt;/a-button&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--      &lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--      &lt;div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--        &lt;a&gt;忘记密码？&lt;/a&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--      &lt;/div&gt;--&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, reactive, UnwrapRef, ref, toRaw &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; toLogin, toRegister &#125; from &#x27;@/api/login/index&#x27;</span><br><span class="line">import &#123; ValidateErrorEntity &#125; from &#x27;ant-design-vue/es/form/interface&#x27;</span><br><span class="line">import &#123; message &#125; from &#x27;ant-design-vue&#x27;</span><br><span class="line"></span><br><span class="line">interface FormState &#123;</span><br><span class="line">  email: string</span><br><span class="line">  password: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  name: &#x27;login&#x27;,</span><br><span class="line">  components: &#123;&#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // tab 栏默认选择 login</span><br><span class="line">    const activeKey = ref(&#x27;login&#x27;)</span><br><span class="line">    // 登录与注册切换</span><br><span class="line">    let switchBtn = ref(true)</span><br><span class="line">    let buttonTitle = ref&lt;string&gt;(&#x27;新用户注册&#x27;)</span><br><span class="line">    const handleChange = () =&gt; &#123;</span><br><span class="line">      switchBtn = ref(!switchBtn.value)</span><br><span class="line">      buttonTitle = ref(switchBtn.value ? &#x27;新用户注册&#x27; : &#x27;已有账号登录&#x27;)</span><br><span class="line">      console.log(&#x27;change&#x27;, switchBtn.value)</span><br><span class="line">      console.log(&#x27;text&#x27;, buttonTitle)</span><br><span class="line">    &#125;</span><br><span class="line">    // form 表单部分</span><br><span class="line">    const formRef = ref()</span><br><span class="line">    // UnwrapRef 单层解包， https://juejin.cn/post/6844904126283776014</span><br><span class="line">    const formState: UnwrapRef&lt;FormState&gt; = reactive(&#123;</span><br><span class="line">      email: &#x27;&#x27;,</span><br><span class="line">      password: &#x27;&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">    const rules = &#123;</span><br><span class="line">      email: [&#123; required: true, message: &#x27;请输入正确的邮箱格式&#x27;, trigger: &#x27;blur&#x27; &#125;],</span><br><span class="line">      password: [</span><br><span class="line">        &#123; required: true, message: &#x27;请输入密码！&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          min: 8,</span><br><span class="line">          max: 16,</span><br><span class="line">          message: &#x27;密码长度需8-16位密码！&#x27;,</span><br><span class="line">          trigger: &#x27;blur&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">    const validFlag = ref(false)</span><br><span class="line">    const register = () =&gt; &#123;</span><br><span class="line">      valid()</span><br><span class="line">      if (validFlag) &#123;</span><br><span class="line">        toRegister(formState)</span><br><span class="line">          .then((res) =&gt; &#123;</span><br><span class="line">            console.log(res)</span><br><span class="line">            validFlag.value = false</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch((err) =&gt; &#123;</span><br><span class="line">            console.log(err)</span><br><span class="line">            validFlag.value = false</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">    const login = () =&gt; &#123;</span><br><span class="line">      console.log(&#x27;登录&#x27;)</span><br><span class="line">      valid()</span><br><span class="line">      if (validFlag) &#123;</span><br><span class="line">        toLogin(formState)</span><br><span class="line">          .then((res) =&gt; &#123;</span><br><span class="line">            console.log(res)</span><br><span class="line">            validFlag.value = false</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch((err) =&gt; &#123;</span><br><span class="line">            console.log(err)</span><br><span class="line">            validFlag.value = false</span><br><span class="line">            // message.warn(&#x27;请输入用户名或密码！&#x27;)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">    const valid = () =&gt; &#123;</span><br><span class="line">      formRef.value</span><br><span class="line">        .validate()</span><br><span class="line">        .then(() =&gt; &#123;</span><br><span class="line">          console.log(&#x27;values&#x27;, formState, toRaw(formState))</span><br><span class="line">          validFlag.value = true</span><br><span class="line">          console.log(&#x27;validFlag&#x27;, validFlag)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch((error: ValidateErrorEntity&lt;FormState&gt;) =&gt; &#123;</span><br><span class="line">          validFlag.value = false</span><br><span class="line">          console.log(&#x27;error&#x27;, error)</span><br><span class="line">          message.warn(&#x27;请输入用户名或密码！&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    const resetForm = () =&gt; &#123;</span><br><span class="line">      formRef.value.resetFields()</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      activeKey,</span><br><span class="line">      switchBtn,</span><br><span class="line">      buttonTitle,</span><br><span class="line">      handleChange,</span><br><span class="line">      formRef,</span><br><span class="line">      formState,</span><br><span class="line">      rules,</span><br><span class="line">      validFlag,</span><br><span class="line">      login,</span><br><span class="line">      register,</span><br><span class="line">      valid,</span><br><span class="line">      resetForm</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/vite-vue-ts-antd.git">https://gitee.com/heyhaiyon/vite-vue-ts-antd.git</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> Ant-Design-Vue </tag>
            
            <tag> VUE3 </tag>
            
            <tag> TypeScript </tag>
            
            <tag> Vite </tag>
            
            <tag> VueRouter4 </tag>
            
            <tag> Vuex4 </tag>
            
            <tag> less </tag>
            
            <tag> tsx </tag>
            
            <tag> jsx </tag>
            
            <tag> Eslint </tag>
            
            <tag> Prettier </tag>
            
            <tag> Stylelint </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vite-ts-todolist 开发记录</title>
      <link href="/2022/02/18/code/2021.08.27-vite-vue3-ts-todolist%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/02/18/code/2021.08.27-vite-vue3-ts-todolist%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<!-- # vite-ts-todolis4t开发记录 --><!-- ![vite+vue3+todolist](../../assets/post-headers/20210827/vite+vue3+ts.001-1351793.jpeg) --><blockquote><p>版本信息：<br>vite 2.4.4<br>vue 3.0.5<br>typescript 4.3.5<br>npm install 安装依赖， npm run dev 启动项目，体验。</p></blockquote><h2 id="成品展示"><a href="#成品展示" class="headerlink" title="成品展示"></a>成品展示</h2><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20210830155427560.png" alt="image-20210830155427560"></p><h2 id="开发思路"><a href="#开发思路" class="headerlink" title="开发思路"></a>开发思路</h2><ol><li>拆分模块</li><li>设计数据存储方式</li><li>规范数据类型</li><li>详细拆分各模块功能</li></ol><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="attr">Z</span>:<span class="built_in">number</span> = <span class="title function_">ref</span>(<span class="number">0</span>) </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">X</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="comment">//method</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">function</span> <span class="title function_">Y</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 需要在外面继续使用的值/方法，要用 return 返回</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    Z,</span><br><span class="line">    X,</span><br><span class="line">    Y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="reactive——响应性基础API"><a href="#reactive——响应性基础API" class="headerlink" title="reactive——响应性基础API"></a><a href="https://v3.cn.vuejs.org/api/basic-reactivity.html#reactive">reactive</a>——响应性基础API</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里是一个用state=&#123;todosList: Array&lt;ItemData&gt;/ItemData[]&#125; 解构,后面具体内容按照解构的类型</span></span><br><span class="line">    <span class="keyword">const</span> state = reactive&lt;&#123; <span class="attr">todosList</span>: <span class="title class_">Array</span>&lt;<span class="title class_">ItemData</span>&gt; &#125;&gt;(&#123;</span><br><span class="line">        <span class="attr">todosList</span>: []</span><br><span class="line">        <span class="comment">// todosList: [</span></span><br><span class="line">        <span class="comment">//   &#123; id: 1, title: &quot;张三&quot;, isCompleted: false &#125;,</span></span><br><span class="line">        <span class="comment">//   &#123; id: 2, title: &quot;李四&quot;, isCompleted: false &#125;,</span></span><br><span class="line">        <span class="comment">//   &#123; id: 3, title: &quot;瑞斯&quot;, isCompleted: false &#125;</span></span><br><span class="line">        <span class="comment">// ]</span></span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h3 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a><a href="https://v3.cn.vuejs.org/api/refs-api.html#torefs">toRefs</a></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;todosList&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Header</span> <span class="attr">:addPlan</span>=<span class="string">&quot;addPlan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">List</span> <span class="attr">:todosList</span>=<span class="string">&quot;todosList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">List</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Footer</span> <span class="attr">:todosList</span>=<span class="string">&quot;todosList&quot;</span> <span class="attr">:isCompletedAll</span>=<span class="string">&quot;isCompletedAll&quot;</span> <span class="attr">:clearCompleted</span>=<span class="string">&quot;clearCompleted</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 将state中的所有属性转换为ref对象 ，用的时候直接使用属性名称即可</span></span><br><span class="line">      ...<span class="title function_">toRefs</span>(state),</span><br><span class="line">      <span class="comment">// todosList,</span></span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// （监听的数据源，要执行的方法，配置监听的options）</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> state.<span class="property">todosList</span>, saveTodos, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;); </span><br></pre></td></tr></table></figure><h3 id="provide-x2F-inject——祖孙传递"><a href="#provide-x2F-inject——祖孙传递" class="headerlink" title="provide &#x2F; inject——祖孙传递"></a>provide &#x2F; inject——祖孙传递</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 祖 App.vue</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">delPlan</span> = (<span class="params">id: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">      <span class="comment">// console.log(&quot;删除&quot;);</span></span><br><span class="line">      state.<span class="property">todosList</span>.<span class="title function_">splice</span>(id, <span class="number">1</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"> <span class="comment">// 传递出去</span></span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&quot;delPlan&quot;</span>, delPlan);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===================================================================*/</span></span><br><span class="line"><span class="comment">// 孙 Item.vue</span></span><br><span class="line"><span class="comment">// 通过 inject 拿到祖父传过来的方法</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">delTodo</span>: <span class="title class_">Function</span> | <span class="literal">undefined</span> = <span class="title function_">inject</span>(<span class="string">&quot;delPlan&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">del</span> = (<span class="params">index: <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">      <span class="comment">// console.log(index);</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="title function_">confirm</span>(<span class="string">&quot;确认删除吗？&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> delTodo === <span class="string">&quot;function&quot;</span>) <span class="title function_">delTodo</span>(index);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><h3 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;todoItem&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isCompleted&quot;</span> /&gt;</span></span></span><br><span class="line">    &lt;!--    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:readonly</span>=<span class="string">&quot;true&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;todoItem.title&quot;</span>&gt;</span>--&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; todoItem.title &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;delButton&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;del(index)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isCompleted = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="comment">// 通过 computed 的 get 实现 isCompleted 数据的绑定，</span></span><br><span class="line">        <span class="attr">get</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> props.<span class="property">todoItem</span>.<span class="property">isCompleted</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 通过 set 创建可写的 ref 对象 实现对状态的更改</span></span><br><span class="line">        <span class="attr">set</span>: <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> updateState === <span class="string">&quot;function&quot;</span>) <span class="title function_">updateState</span>(props.<span class="property">todoItem</span>, val);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h3 id="as——类型强转"><a href="#as——类型强转" class="headerlink" title="as——类型强转"></a>as——类型强转</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">todoItem</span>: &#123;</span><br><span class="line">    <span class="comment">// 约束类型，使用as强转类型</span></span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Object</span> <span class="keyword">as</span> () =&gt; <span class="title class_">ItemData</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">index</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="onMounted——生命周期"><a href="#onMounted——生命周期" class="headerlink" title="onMounted——生命周期"></a>onMounted——生命周期</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 挂载后读取本地数据，存入todosList</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    state.<span class="property">todosList</span> = <span class="title function_">readTodos</span>();</span><br><span class="line">    <span class="comment">// console.log(state.todosList);</span></span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><p>在<code>setup</code>内不能使用<code>this</code>，所以传递值通过<code>props</code>来传递，实现双向绑定，和 <strong>React</strong> 非常相似</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Footer&quot;</span>,</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">todosList</span>: &#123;</span><br><span class="line">        <span class="comment">// type: Array as ()=&gt;ItemData[],</span></span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">isCompletedAll</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Function</span>,</span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">clearCompleted</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Function</span>,</span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">setup</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="comment">// reduce() 方法对数组中的每个元素执行一个由您提供的reducer函数(升序执行)，将其结果汇总为单个返回值。</span></span><br><span class="line">      <span class="keyword">const</span> count = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> props.<span class="property">todosList</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">pre: <span class="built_in">number</span>, todo: ItemData</span>) =&gt;</span> pre + (todo.<span class="property">isCompleted</span> ? <span class="number">1</span> : <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// 是否全选操作</span></span><br><span class="line">      <span class="keyword">const</span> isCheckedAll = <span class="title function_">computed</span>(&#123;</span><br><span class="line">        <span class="attr">get</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// console.log(count)</span></span><br><span class="line">          <span class="keyword">return</span> count.<span class="property">value</span> &gt; <span class="number">0</span> &amp;&amp; count.<span class="property">value</span> === props.<span class="property">todosList</span>.<span class="property">length</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">set</span>: <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">          props.<span class="title function_">isCompletedAll</span>(val);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        count,</span><br><span class="line">        isCheckedAll</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="interface——规范类型"><a href="#interface——规范类型" class="headerlink" title="interface——规范类型"></a>interface——规范类型</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义接口 ItemData ，约束传入的数据类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ItemData</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">isCompleted</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="存储数据的工具类"><a href="#存储数据的工具类" class="headerlink" title="存储数据的工具类"></a>存储数据的工具类</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ItemData</span> &#125; <span class="keyword">from</span> <span class="string">&quot;../../model/ItemData&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">saveTodos</span>(<span class="params">todos: ItemData</span>) &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;todos_key&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(todos));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readTodos</span>(<span class="params"></span>): <span class="title class_">ItemData</span>[] &#123;</span><br><span class="line">  <span class="comment">// console.log(JSON.parse(localStorage.getItem(&quot;todos_key&quot;) || &quot;[]&quot;))</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;todos_key&quot;</span>) || <span class="string">&quot;[]&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; saveTodos, readTodos &#125;;</span><br></pre></td></tr></table></figure><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><h3 id="导入组件问题"><a href="#导入组件问题" class="headerlink" title="导入组件问题"></a>导入组件问题</h3><ol><li>引入 vue 组件时，需要添加后缀名<code>.vue</code>，在 webStorm 修改设置</li></ol><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20210827154737368.png" alt="image-20210827154737368"></p><ol start="2"><li>vue3 导入组件依然需要在component中注册</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    todolist</span><br><span class="line">    <span class="tag">&lt;<span class="name">Header</span>&gt;</span><span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">List</span>&gt;</span><span class="tag">&lt;/<span class="name">List</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Footer</span>&gt;</span><span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&quot;./components/Header.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">List</span> <span class="keyword">from</span> <span class="string">&quot;./components/List.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Footer</span> <span class="keyword">from</span> <span class="string">&quot;./components/Footer.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;App&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Header</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">List</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Footer</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="遗留问题"><a href="#遗留问题" class="headerlink" title="遗留问题"></a>遗留问题</h2><ol><li>TS报错</li></ol><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  ! 报错问题</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> state.<span class="property">todosList</span>, saveTodos, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">setup</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="comment">// reduce() 方法对数组中的每个元素执行一个由您提供的reducer函数(升序执行)，将其结果汇总为单个返回值。</span></span><br><span class="line">      <span class="keyword">const</span> count = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> props.<span class="property">todosList</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">pre: <span class="built_in">number</span>, todo: ItemData</span>) =&gt;</span> pre + (todo.<span class="property">isCompleted</span> ? <span class="number">1</span> : <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20210830154733763.png" alt="image-20210830154733763"></p><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20210830154656719.png" alt="image-20210830154656719"></p><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/vite-vue3-ts-todolist.git">https://gitee.com/heyhaiyon/vite-vue3-ts-todolist.git</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> VUE3 </tag>
            
            <tag> TypeScript </tag>
            
            <tag> Vite </tag>
            
            <tag> todolist </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>手把手Vue3项目(一) —— 安装配置 Vite + Vue3 + TypeScript + Ant-Design-Vue 项目</title>
      <link href="/2022/02/18/code/2021.08.31-vite-vue3-ts-antd/"/>
      <url>/2022/02/18/code/2021.08.31-vite-vue3-ts-antd/</url>
      
        <content type="html"><![CDATA[<blockquote><p>项目中涉及到的配置：</p><p>Vite</p><p>Vue 3</p><p>VueRouter 4</p><p>Vuex 4</p><p>Ant- design-vue</p><p>TypeScript</p><p>less</p><p>tsx &#x2F; jsx 支持</p><p>Eslint</p><p>Prettier</p><p>Stylelint</p><p>Git 代码检测 pre-commit &#x2F; commit-message</p><p>后续文章会继续更新，mock、json-server模拟前端数据，实现前后端分离开发，axios安装与配置，后台管理系统登录逻辑实现，VueRouter动态路由配置和权限管理，通用组件的封装等等。</p></blockquote><h2 id="vite搭建vue项目"><a href="#vite搭建vue项目" class="headerlink" title="vite搭建vue项目"></a>vite搭建vue项目</h2><p>具体步骤请参考，前面的文章——使用vite从开始搭建vue项目</p><h2 id="安装配置-ant-design-vue-2-2-6"><a href="#安装配置-ant-design-vue-2-2-6" class="headerlink" title="安装配置 ant- design-vue 2.2.6"></a><strong>安装配置 ant- design-vue 2.2.6</strong></h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 安装ant-design-vue</span><br><span class="line">pnpm add ant-design-vue@next</span><br><span class="line">// 安装ant-design-vue/icon</span><br><span class="line">pnpm add @ant-design/icons-vue</span><br><span class="line">// vite 按需导入插件</span><br><span class="line">// **废弃：pnpm add vite-plugin-components // 安装不过一周左右时间，插件就重命名了，所以按照新插件重新配置**</span><br><span class="line">// 参考这里：&lt;https://github.com/antfu/unplugin-vue-components&gt;</span><br><span class="line">pnpm add unplugin-vue-components -D</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="comment">// import ViteComponents, &#123; AntDesignVueResolver &#125; from &#x27;vite-plugin-components&#x27;;</span></span><br><span class="line">**<span class="keyword">import</span> <span class="title class_">Components</span> <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AntDesignVueResolver</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span>**</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line"><span class="comment">// 项目插件重命名之后废弃，改为使用 unplugin-vue-components，之前的也是可以使用的</span></span><br><span class="line">    <span class="title class_">ViteComponents</span>(&#123;</span><br><span class="line">      <span class="attr">customComponentResolvers</span>: [<span class="title class_">AntDesignVueResolver</span>()],</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line"><span class="comment">// 新的使用方法</span></span><br><span class="line"><span class="comment">// &lt;https://github.com/antfu/unplugin-vue-components&gt;</span></span><br><span class="line">    <span class="comment">// ant-design-vue 按需导入</span></span><br><span class="line">    **<span class="title class_">Components</span>(&#123;</span><br><span class="line">      <span class="attr">resolvers</span>: [</span><br><span class="line">        <span class="title class_">AntDesignVueResolver</span>(),</span><br><span class="line">        <span class="comment">// ElementPlusResolver(),</span></span><br><span class="line">        <span class="comment">// VantResolver(),</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// globalComponentsDeclaration</span></span><br><span class="line">      <span class="attr">dts</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// customLoaderMatcher</span></span><br><span class="line">      <span class="attr">include</span>: [<span class="regexp">/\\.vue$/</span>, <span class="regexp">/\\.vue\\?vue/</span>, <span class="regexp">/\\.md$/</span>],</span><br><span class="line">    &#125;)**</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-button <span class="keyword">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SearchOutlined</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">    <span class="title class_">Primary</span> <span class="title class_">Button</span></span><br><span class="line">&lt;/a-button&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">StepForwardOutlined</span>/&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="安装配置-less"><a href="#安装配置-less" class="headerlink" title="安装配置 less"></a><strong>安装配置 less</strong></h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add less</span><br></pre></td></tr></table></figure><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import <span class="punctuation">&#123;</span>defineConfig<span class="punctuation">&#125;</span> from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;https://vitejs.dev/config/&gt;</span></span><br><span class="line">export default defineConfig(<span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 支持 less 样式</span></span><br><span class="line">    css<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        preprocessorOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            less<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                javascriptEnabled<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span>)</span><br></pre></td></tr></table></figure><h3 id="验证-1"><a href="#验证-1" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;h1&quot;</span>&gt;</span>h1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;h2&quot;</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 样式文件App.less,或者写在文件内</span></span><br><span class="line">.<span class="property">box</span> &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">  <span class="attr">hight</span>: 100px;</span><br><span class="line">  <span class="attr">border</span>: 1px solid #42b983;</span><br><span class="line"></span><br><span class="line">  .<span class="property">h1</span> &#123;</span><br><span class="line">    <span class="attr">color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .<span class="property">h2</span> &#123;</span><br><span class="line">    <span class="attr">color</span>: blue;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="安装配置-VueRouter-4"><a href="#安装配置-VueRouter-4" class="headerlink" title="安装配置 VueRouter 4"></a><strong>安装配置 VueRouter 4</strong></h2><h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vue-router@4</span><br></pre></td></tr></table></figure><h3 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.ts ----------------创建路由------------------</span></span><br><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;routes&#125; <span class="keyword">from</span> <span class="string">&quot;@/router/config&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// to.path = &#x27;/login&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line"><span class="comment">// router/config.ts ----------------路由路径配置文件------------</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> routes = [</span><br><span class="line"><span class="comment">// 路由重定向</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">        <span class="comment">// component: Home</span></span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&quot;@modules/home/Index.vue&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&quot;@modules/about/Index.vue&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.ts -----------------使用router--------------------------</span></span><br><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;ant-design-vue/dist/antd.less&quot;</span></span><br><span class="line"><span class="comment">// import &#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="comment">// createApp(App).use(router).mount(&#x27;#app&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// App.vue  ----------------在页面中渲染路由加载的页面------------------------</span></span><br><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="comment">// This starter template is using Vue 3 &lt;script setup&gt; SFCs</span></span><br><span class="line"><span class="comment">// Check out &lt;https://v3.vuejs.org/api/sfc-script-setup.html#sfc-script-setup&gt;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="验证-2"><a href="#验证-2" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.通过访问根目录确定路由重定向是否成功 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;defineComponent&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1. 通过访问根目录确定路由重定向是否成功 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 2. 通过地址栏输入其他地址如 /about ，观察是否跳转页面成功 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 3. 通过router-link确定页面router可以使用--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;defineComponent&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>home<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;defineComponent&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="安装配置-alias"><a href="#安装配置-alias" class="headerlink" title="安装配置 alias"></a><strong>安装配置 <code>alias</code></strong></h2><h3 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 导入 path 的时候提示报错，需要安装 @types/node 类型检测</span><br><span class="line">pnpm add @types/node</span><br></pre></td></tr></table></figure><h3 id="配置-3"><a href="#配置-3" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineConfig&#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line"><span class="comment">//src目录的配置</span></span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="comment">// src 目录路径</span></span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">      <span class="comment">// 公共组件导入路径</span></span><br><span class="line">      <span class="string">&#x27;@modules&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src/modules/components&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下面的配置方式废弃了，刚配置好的时候还可以，一周之后发现不会热更新了，让后在终端看到alias这个配置废弃了</span></span><br><span class="line"><span class="comment">// 让更换成 resolve.alias 的方式，更换之后发现确实可以了</span></span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>),</span><br><span class="line"><span class="comment">// 还可以额外添加一些其他的</span></span><br><span class="line"><span class="string">&quot;components&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src/components&quot;</span>),</span><br><span class="line">      <span class="string">&quot;styles&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src/styles&quot;</span>),</span><br><span class="line">      <span class="string">&quot;views&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src/views&quot;</span>),</span><br><span class="line">      <span class="string">&quot;utils&quot;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;src/utils&quot;</span>),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ts.config.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 如果是ts项目，仅仅添加上面还不够，因为编辑器无法自动识别别名路径</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;src/*&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;src/**/*.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;src/**/*.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;src/**/*.tsx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;src/**/*.vue&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="验证-3"><a href="#验证-3" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 待会儿在导入路由导入组件的时候使用，或者在App中引入一个login的测试组件</span></span><br><span class="line"><span class="comment">// App.vue</span></span><br><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="comment">// This starter template is using Vue 3 &lt;script setup&gt; SFCs</span></span><br><span class="line"><span class="comment">// Check out &lt;https://v3.vuejs.org/api/sfc-script-setup.html#sfc-script-setup&gt;</span></span><br><span class="line"><span class="comment">// 使用 alias @ 引入</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/login/Login.vue&#x27;</span></span><br><span class="line"><span class="comment">// 使用相对路径引入确认无误</span></span><br><span class="line"><span class="comment">// import Login from &#x27;./views/login/Login.vue&#x27;</span></span><br><span class="line"><span class="comment">// 测试导入 ts 文件是否报错，结论：可以正常使用，但编辑器有 ts 红色下划线错误提示</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Login</span>&gt;</span><span class="tag">&lt;/<span class="name">Login</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="安装配置-支持页面-tsx-x2F-jsx"><a href="#安装配置-支持页面-tsx-x2F-jsx" class="headerlink" title="安装配置 支持页面 tsx &#x2F; jsx"></a><strong>安装配置 支持页面 tsx &#x2F; jsx</strong></h2><h3 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add @vitejs/plugin-vue-jsx</span><br></pre></td></tr></table></figure><h3 id="配置-4"><a href="#配置-4" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 vite.config.ts 配置</span></span><br><span class="line"><span class="keyword">import</span> vueJsx <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue-jsx&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line"> <span class="attr">plugins</span>: [ <span class="title function_">vueJsx</span>()]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// tsconfig.json 文件中</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;include&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;src/**/*.ts&quot;</span>,</span><br><span class="line">    <span class="string">&quot;src/**/*.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;src/**/*.d.ts&quot;</span>,</span><br><span class="line">    <span class="string">&quot;src/**/*.tsx&quot;</span>,</span><br><span class="line">    <span class="string">&quot;src/**/*.jsx&quot;</span>,</span><br><span class="line">    <span class="string">&quot;src/**/*.vue&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 在.tsx文件里支持JSX</span></span><br><span class="line">    <span class="string">&quot;jsx&quot;</span>: <span class="string">&quot;preserve&quot;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="验证-4"><a href="#验证-4" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .tsx 文件</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello,World<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="安装配置-eslint"><a href="#安装配置-eslint" class="headerlink" title="安装配置 eslint"></a><strong>安装配置 eslint</strong></h2><ul><li><p>参考链接：</p><p><a href="https://dev.to/devdammak/setting-up-eslint-in-your-javascript-project-with-vs-code-2amf">https://dev.to/devdammak/setting-up-eslint-in-your-javascript-project-with-vs-code-2amf</a></p><p><a href="https://vueschool.io/articles/vuejs-tutorials/eslint-and-prettier-with-vite-and-vue-js-3/">https://vueschool.io/articles/vuejs-tutorials/eslint-and-prettier-with-vite-and-vue-js-3/</a></p><p><a href="https://www.npmjs.com/package/vue-eslint-parser">https://www.npmjs.com/package/vue-eslint-parser</a></p></li></ul><blockquote><p> 是否安装 vite-plugin-eslint 并配置，目前先使用这样的配置，如果是成功的就不安装vite-eslint的插件了</p></blockquote><h3 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">pnpm add eslint eslint-plugin-vue @typescript-eslint/parser @typescript-eslint/eslint-plugin</span><br><span class="line"></span><br><span class="line">// 需要再安装一个 vue 但页面解析器，并配置</span><br><span class="line"></span><br><span class="line">pnpm add vue-eslint-parser</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">* pnpm add eslint</span><br><span class="line">* 如果使用 pnpm eslint --init 根据提示安装</span><br><span class="line">* 会提示你初始化 eslint，让你选择适合你项目所需的插件，但是是以 npm 为包安装器安装的，由于我使用的 pnpm 所以最后报错了。</span><br><span class="line">* 但是也算是提示了我们所需要安装的插件依赖了，之后我们自己手动安装也可以</span><br><span class="line">*/ </span><br><span class="line"></span><br><span class="line">heyhaiyang@HaiyangdeMacBook-Air vite-vue3-ts-antd-20210831 % pnpm eslint --init</span><br><span class="line"></span><br><span class="line">✔ How would you like to use ESLint? · problems</span><br><span class="line">✔ What <span class="built_in">type</span> of modules does your project use? · esm</span><br><span class="line">✔ Which framework does your project use? · vue</span><br><span class="line">✔ Does your project use TypeScript? · No / Yes</span><br><span class="line">✔ Where does your code run? · browser</span><br><span class="line">✔ What format <span class="keyword">do</span> you want your config file to be <span class="keyword">in</span>? · JavaScript**</span><br><span class="line">Local ESLint installation not found.</span><br><span class="line">The config that you<span class="string">&#x27;ve selected requires the following dependencies:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">eslint-plugin-vue@latest @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest eslint@latest</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">✔ Would you like to install them now with npm? · No / Yes</span></span><br><span class="line"><span class="string">Installing eslint-plugin-vue@latest, @typescript-eslint/eslint-plugin@latest, @typescript-eslint/parser@latest, eslint@latest</span></span><br><span class="line"><span class="string">npm WARN old lockfile </span></span><br><span class="line"><span class="string">npm WARN old lockfile The package-lock.json file was created with an old version of npm,</span></span><br><span class="line"><span class="string">npm WARN old lockfile so supplemental metadata must be fetched from the registry.</span></span><br><span class="line"><span class="string">npm WARN old lockfile </span></span><br><span class="line"><span class="string">npm WARN old lockfile This is a one-time fix-up, please be patient...</span></span><br><span class="line"><span class="string">npm WARN old lockfile </span></span><br><span class="line"><span class="string">npm ERR! code EINVALIDPACKAGENAME</span></span><br><span class="line"><span class="string">npm ERR! Invalid package name &quot;.pnpm&quot;: name cannot start with a period</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">npm ERR! A complete log of this run can be found in:</span></span><br><span class="line"><span class="string">npm ERR!     /Users/heyhaiyang/.npm/_logs/2021-09-01T07_46_06_494Z-debug.log</span></span><br><span class="line"><span class="string">Successfully created .eslintrc.js file in /Users/heyhaiyang/codebase/private/vite-vue3-ts-antd-20210831</span></span><br><span class="line"><span class="string">ESLint was installed locally. We recommend using this local copy instead of your globally-installed copy.</span></span><br></pre></td></tr></table></figure><h3 id="配置-5"><a href="#配置-5" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用我们上面安装时选择的一系列符合我们项目的配置之后，在项目根目录就会生成一个 .eslintrc.js 配置文件</span></span><br><span class="line"><span class="comment">// .eslintrc.js 自动生成的eslint配置文件，接下来需要的就是我们根据需要添加对应的 rules</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;es2021&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:vue/essential&quot;</span>,</span><br><span class="line">        <span class="string">&quot;plugin:@typescript-eslint/recommended&quot;</span></span><br><span class="line">    ],</span><br><span class="line"><span class="comment">// vue 单页面解析器</span></span><br><span class="line"><span class="string">&quot;parser&quot;</span>: <span class="string">&quot;vue-eslint-parser&quot;</span>,</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="string">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">        <span class="string">&quot;@typescript-eslint&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们也添加一个eslint忽略的文件</span></span><br><span class="line"><span class="comment">// eslintignore</span></span><br><span class="line"></span><br><span class="line">*.sh</span><br><span class="line">node_modules</span><br><span class="line">*.md</span><br><span class="line">*.woff</span><br><span class="line">*.ttf</span><br><span class="line">.vscode</span><br><span class="line">.idea</span><br><span class="line">dist</span><br><span class="line">*.zip</span><br><span class="line">/public</span><br><span class="line">/docs</span><br><span class="line">.husky</span><br><span class="line">.local</span><br><span class="line">/bin</span><br><span class="line">Dockerfile</span><br><span class="line"></span><br><span class="line"><span class="comment">// webStorm配置</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/eslint.png" alt="eslint"></p><h3 id="验证-5"><a href="#验证-5" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 暂时还没有验证，需要在实际写代码过程中验证，并添加 rules</span></span><br><span class="line"></span><br><span class="line">**🌟🌟🌟 遇到一些 eslint <span class="string">&#x27;warning&#x27;</span> 可以尝试先用提示的方法注释掉，之后在rules里面添加上这条规则，将状态改成off，<span class="number">0</span> 等等**</span><br><span class="line"></span><br><span class="line">**错误<span class="number">1</span>: <span class="title class_">ESLint</span>: <span class="title class_">Parsing</span> <span class="attr">error</span>: <span class="string">&#x27;&gt;&#x27;</span> expected.** </span><br><span class="line">vue 单页面 &lt;h1&gt;&lt;/h1&gt; ，就只写这些就报错</span><br><span class="line"></span><br><span class="line">解决：安装vue但页面 eslint 解析器并配置</span><br><span class="line">pnpm add vue-eslint-parser</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;parser&quot;</span>: <span class="string">&quot;vue-eslint-parser&quot;</span>,</span><br><span class="line">  <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">12</span>,</span><br><span class="line">      <span class="string">&quot;parser&quot;</span>: <span class="string">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class="line">      <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">**错误<span class="number">2</span>: [eslint] <span class="string">&#x27;module&#x27;</span> is not defined. (no-undef)**</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">解决：&lt;<span class="attr">https</span>:<span class="comment">//stackoverflow.com/questions/49789177/module-is-not-defined-and-process-is-not-defined-in-eslint-in-visual-studio-code&gt;</span></span><br><span class="line">env环境配置要支持 node</span><br><span class="line">所以配置信息如下：</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es2021</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">**错误<span class="number">3</span>: <span class="title class_">ESLint</span>: <span class="title class_">The</span> template root requires exactly one element**.(**vue/no-multiple-template-root**)</span><br><span class="line">这是因为vue的模版中只有能一个根节点，所以在中插入第二个元素就会报错</span><br><span class="line"></span><br><span class="line">解决：vue3 中允许 不加入根标签，上面错误括号中粗体的部分，刚好是提示rules的部分，如果不想要提示，可以在rules中添加</span><br><span class="line"><span class="string">&quot;vue/no-multiple-template-root&quot;</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">**错误<span class="number">4</span>: <span class="title class_">TS1259</span>: <span class="title class_">Module</span> <span class="string">&#x27;&quot;path&quot;&#x27;</span> can only be <span class="keyword">default</span>-imported using the <span class="string">&#x27;esModuleInterop&#x27;</span> flag**</span><br><span class="line"></span><br><span class="line">解决：<span class="keyword">import</span> * <span class="keyword">as</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span></span><br><span class="line">****</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/path.png" alt="path"></p><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/console.png" alt="console"></p><h2 id="安装配置-Prettier"><a href="#安装配置-Prettier" class="headerlink" title="安装配置 Prettier"></a><strong>安装配置 Prettier</strong></h2><blockquote><p>prettier官网 <a href="https://prettier.io/docs/en/install.html">https://prettier.io/docs/en/install.html</a></p></blockquote><h3 id="安装-6"><a href="#安装-6" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add prettier</span><br></pre></td></tr></table></figure><h3 id="配置-6"><a href="#配置-6" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 .prettierrc.js/json 文件，配置美化格式</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个 .prettierignore 文件，配置忽略的文件</span></span><br><span class="line">node_modules</span><br><span class="line"></span><br><span class="line"><span class="comment">// webStorm编辑器配置</span></span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/prettier.png" alt="prettier"></p><h3 id="验证-6"><a href="#验证-6" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在实际写代码过程中使用，option+command+L 格式化代码的时候，具体添加合适的美化规则</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>, <span class="comment">// 是否在语句末尾打印分号</span></span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>, <span class="comment">// 是否使用单引号</span></span><br><span class="line">  <span class="attr">printWidth</span>: <span class="number">100</span>, <span class="comment">// 单行输出（不折行）的（最大）长度</span></span><br><span class="line">  <span class="attr">quoteProps</span>: <span class="string">&#x27;as-needed&#x27;</span>, <span class="comment">// 仅在需要时在对象属性周围添加引号</span></span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>, <span class="comment">// 每个缩进级别的空格数</span></span><br><span class="line">  <span class="attr">tabs</span>: <span class="literal">false</span>, <span class="comment">// 使用制表符 (tab) 缩进行而不是空格 (space)</span></span><br><span class="line">  <span class="attr">bracketSpacing</span>: <span class="literal">true</span>, <span class="comment">// 是否在对象属性添加空格</span></span><br><span class="line">  <span class="attr">jsxBracketSameLine</span>: <span class="literal">true</span>, <span class="comment">// 将 &gt; 多行 JSX 元素放在最后一行的末尾，而不是单独放在下一行（不适用于自闭元素）,默认false,这里选择&gt;不另起一行</span></span><br><span class="line">  <span class="attr">htmlWhitespaceSensitivity</span>: <span class="string">&#x27;ignore&#x27;</span>, <span class="comment">// 指定 HTML 文件的全局空白区域敏感度, &quot;ignore&quot; - 空格被认为是不敏感的</span></span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">&#x27;none&#x27;</span>, <span class="comment">// 去除对象最末尾元素跟随的逗号</span></span><br><span class="line">  <span class="attr">useTabs</span>: <span class="literal">false</span>, <span class="comment">// 不使用缩进符，而使用空格</span></span><br><span class="line">  <span class="attr">jsxSingleQuote</span>: <span class="literal">false</span>, <span class="comment">// jsx 不使用单引号，而使用双引号</span></span><br><span class="line">  <span class="attr">arrowParens</span>: <span class="string">&#x27;always&#x27;</span>, <span class="comment">// 箭头函数，只有一个参数的时候，也需要括号</span></span><br><span class="line">  <span class="attr">rangeStart</span>: <span class="number">0</span>, <span class="comment">// 每个文件格式化的范围是文件的全部内容</span></span><br><span class="line">  <span class="attr">proseWrap</span>: <span class="string">&#x27;always&#x27;</span>, <span class="comment">// 当超出print width（上面有这个参数）时就折行</span></span><br><span class="line">  <span class="attr">endOfLine</span>: <span class="string">&#x27;lf&#x27;</span> <span class="comment">// 换行符使用 lf</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="安装配置-stylelint"><a href="#安装配置-stylelint" class="headerlink" title="安装配置 stylelint"></a><strong>安装配置 stylelint</strong></h2><p><a href="https://stylelint.io/user-guide/get-started">https://stylelint.io/user-guide/get-started</a> stylelint官网</p><p><a href="https://sailormillet.github.io/2021/02/03/stylelint-css%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E5%8C%96/">https://sailormillet.github.io/2021/02/03/stylelint-css代码格式化/</a></p><p><a href="https://blog.csdn.net/weixin_49766444/article/details/108535741">https://blog.csdn.net/weixin_49766444/article/details/108535741</a></p><p><a href="https://juejin.cn/post/6992833473375371272">解决stylelint对深度选择器:deep()报错的问题</a></p><h3 id="安装-7"><a href="#安装-7" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pnpm add </span><br><span class="line">stylelint </span><br><span class="line">stylelint-config-standard</span><br><span class="line">stylelint-config-rational-order</span><br><span class="line">stylelint-prettier</span><br><span class="line">stylelint-config-prettier</span><br><span class="line">-D</span><br></pre></td></tr></table></figure><h3 id="配置-7"><a href="#配置-7" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在你的项目根目录下创建一个.stylelintrc.js配置文件</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;stylelint-config-standard&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;stylelint-config-recess-order&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;stylelint-prettier/recommended&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="comment">// 颜色值小写</span></span><br><span class="line">    <span class="string">&#x27;color-hex-case&#x27;</span>: <span class="string">&#x27;lower&#x27;</span>,</span><br><span class="line">    <span class="comment">// 注释前无须空行</span></span><br><span class="line">    <span class="string">&#x27;comment-empty-line-before&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// 使用数字或命名的 (可能的情况下) font-weight 值</span></span><br><span class="line">    <span class="string">&#x27;font-weight-notation&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// 在函数的逗号之后要求有一个换行符或禁止有空白</span></span><br><span class="line">    <span class="string">&#x27;function-comma-newline-after&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// 在函数的括号内要求有一个换行符或禁止有空白</span></span><br><span class="line">    <span class="string">&#x27;function-parentheses-newline-inside&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// url使用引号</span></span><br><span class="line">    <span class="string">&#x27;function-url-quotes&#x27;</span>: <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">    <span class="comment">// 字符串使用单引号</span></span><br><span class="line">    <span class="string">&#x27;string-quotes&#x27;</span>: <span class="string">&#x27;single&#x27;</span>,</span><br><span class="line">    <span class="comment">// 禁止低优先级的选择器出现在高优先级的选择器之后</span></span><br><span class="line">    <span class="string">&#x27;no-descending-specificity&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// 禁止空源</span></span><br><span class="line">    <span class="string">&#x27;no-empty-source&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="comment">// 禁止缺少文件末尾的换行符</span></span><br><span class="line">    <span class="string">&#x27;no-missing-end-of-source-newline&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="comment">// font-family太多，具体的问题我也不知道 ，先屏蔽错误再说</span></span><br><span class="line">    <span class="string">&#x27;font-family-no-missing-generic-family-keyword&#x27;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&#x27;selector-pseudo-class-no-unknown&#x27;</span>: [</span><br><span class="line">      <span class="literal">true</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">ignorePseudoClasses</span>: [<span class="string">&#x27;deep&#x27;</span>]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="验证-7"><a href="#验证-7" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在实际写代码过程中使用时验证</span></span><br><span class="line">错误<span class="number">1</span>：stylelint规则和prettier规则冲突</span><br><span class="line"><span class="comment">// 之前的配置</span></span><br><span class="line"><span class="attr">extends</span>: <span class="string">&#x27;stylelint-config-standard&#x27;</span>,</span><br><span class="line"></span><br><span class="line">解决：</span><br><span class="line"><span class="number">1.</span> 安装stylelint-prettier stylelint-config-prettier ，配置prettier规则覆盖stylelint规则，从而不报错</span><br><span class="line"><span class="number">2.</span> 安装 stylelint-config-recess-order 增加 css 属性顺序排序校验</span><br><span class="line"><span class="comment">// 现在的配置</span></span><br><span class="line"><span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;stylelint-config-standard&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;stylelint-config-recess-order&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;stylelint-prettier/recommended&#x27;</span></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">** 还遗留了一个问题，webStorm 中stylelint无法在保存时直接fix文件，但是使用prettier规则覆盖stylelint规则，这个问题就不存在了</span><br><span class="line">** 不过在想使用stylelint规则格式化css样式代码，prettier专注其他逻辑代码，这样要怎么配置</span><br></pre></td></tr></table></figure><h2 id="安装配置-Vuex-4"><a href="#安装配置-Vuex-4" class="headerlink" title="安装配置 Vuex 4"></a><strong>安装配置 Vuex 4</strong></h2><h3 id="安装-8"><a href="#安装-8" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add vuex@next</span><br></pre></td></tr></table></figure><h3 id="配置-8"><a href="#配置-8" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> data &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="comment">// 通过限定传入的参数类型</span></span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 必须要有返回</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;store&#125; <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;ant-design-vue/dist/antd.less&quot;</span></span><br><span class="line"><span class="comment">// import &#x27;@ant-design/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">use</span>(store)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="验证-8"><a href="#验证-8" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vuex.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a-input</span> <span class="attr">:value</span>=<span class="string">&quot;count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">a-button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">a-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;defineComponent, computed&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;useStore&#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&quot;vuex&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// ! 只有getter的计算属性</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> count = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> store.<span class="property">state</span>.<span class="property">count</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params"></span>) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      store.<span class="title function_">commit</span>(<span class="string">&#x27;increment&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      count,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      add</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="安装配置-git提交前校验-pre-commit"><a href="#安装配置-git提交前校验-pre-commit" class="headerlink" title="安装配置 git提交前校验 pre-commit"></a><strong>安装配置 git提交前校验 pre-commit</strong></h2><ul><li>参考链接：<ol><li><a href="https://github.com/ZSI2017/blog/issues/14">https://github.com/ZSI2017/blog/issues/14</a></li><li><a href="https://joyran.github.io/yi-blog/blog/code-guide.html">https://joyran.github.io/yi-blog/blog/code-guide.html</a></li><li><a href="https://www.cnblogs.com/cag2050/p/10518074.html">https://www.cnblogs.com/cag2050/p/10518074.html</a></li><li><a href="https://juejin.cn/post/6974301879731748900">https://juejin.cn/post/6974301879731748900</a></li></ol></li></ul><h3 id="安装-9"><a href="#安装-9" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add yorkie lint-staged -D</span><br></pre></td></tr></table></figure><h3 id="配置-9"><a href="#配置-9" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码提交时，针对本次提交的修改文件进行校验。在package.json文件内</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;eslint --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;vue,css,sass,less&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;stylelint --fix&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;git add&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;*.&#123;js,jsx,tsx,ts,less,md,json&#125;&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;prettier --write&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="验证-9"><a href="#验证-9" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 已验证，后续过程中继续查缺补漏</span></span><br></pre></td></tr></table></figure><h2 id="安装配置-commit-message"><a href="#安装配置-commit-message" class="headerlink" title="安装配置 commit-message"></a><strong>安装配置 commit-message</strong></h2><h3 id="安装-10"><a href="#安装-10" class="headerlink" title="安装"></a><strong>安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm add @commitlint/config-conventional @commitlint/cli</span><br></pre></td></tr></table></figure><h3 id="配置-10"><a href="#配置-10" class="headerlink" title="配置"></a><strong>配置</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行 git commit 时，对msg信息规范，用于添加人和机器可读的含义来提交消息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据官网的描述，创建commitlint.config.js，并配置里面的信息，</span></span><br><span class="line"><span class="comment">// 也可以新建 .commitlintrc.js 文件，在 package.json 中也对应更改一下</span></span><br><span class="line">echo <span class="string">&quot;module.exports = &#123;extends: [&#x27;@commitlint/config-conventional&#x27;]&#125;;&quot;</span> &gt; commitlint.config.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// package.json</span></span><br><span class="line"><span class="attr">&quot;gitHooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="comment">// 配置1: 目前使用配置1，配置2是公司目前项目用的，不知道这个 $HUSKY_GIT_PARAMS 是什么</span></span><br><span class="line">    <span class="attr">&quot;commit-msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commitlint --config commitlint.config.js -e -V&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="comment">// 配置2: 暂时未使用配置2,配置2内容在使用HUSKY时，参数为：$HUSKY_GIT_PARAMS</span></span><br><span class="line"><span class="comment">// 如果使用yokie，默认使用的参数是：GIT_PARAMS</span></span><br><span class="line">    <span class="attr">&quot;commit-msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;commitlint -e $HUSKY_GIT_PARAMS&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改项目目录下的.git/hooks 内的需要启用的脚本</span></span><br><span class="line"><span class="comment">// 以下使用到的4个如下：</span></span><br><span class="line"></span><br><span class="line">**<span class="comment">//  commit-msg**</span></span><br><span class="line">#!/bin/sh</span><br><span class="line">#yorkie <span class="number">2.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">command_exists () <span class="punctuation">&#123;</span></span><br><span class="line">  command -v <span class="string">&quot;$1&quot;</span> &gt;/dev/<span class="literal"><span class="keyword">null</span></span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">has_hook_script () <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> -f package.json <span class="punctuation">]</span> &amp;&amp; cat package.json | grep -q <span class="string">&quot;\\&quot;</span>$<span class="number">1</span>\\<span class="string">&quot;[[:space:]]*:&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">load_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm is not loaded<span class="punctuation">,</span> load it</span><br><span class="line">  command_exists nvm || <span class="punctuation">&#123;</span></span><br><span class="line">    export NVM_DIR=<span class="string">&quot;$1&quot;</span></span><br><span class="line">    <span class="punctuation">[</span> -s <span class="string">&quot;$1/nvm.sh&quot;</span> <span class="punctuation">]</span> &amp;&amp; . <span class="string">&quot;$1/nvm.sh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">run_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm has been loaded correctly<span class="punctuation">,</span> use project .nvmrc</span><br><span class="line">  command_exists nvm &amp;&amp; <span class="punctuation">[</span> -f .nvmrc <span class="punctuation">]</span> &amp;&amp; nvm use</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">cd <span class="string">&quot;.&quot;</span></span><br><span class="line"></span><br><span class="line"># Check if commit-msg is defined<span class="punctuation">,</span> skip if not</span><br><span class="line">has_hook_script commit-msg || exit <span class="number">0</span></span><br><span class="line"></span><br><span class="line"># Add common path where Node can be found</span><br><span class="line"># Brew standard installation path /usr/local/bin</span><br><span class="line"># Node standard installation path /usr/local</span><br><span class="line">export PATH=<span class="string">&quot;$PATH:/usr/local/bin:/usr/local&quot;</span></span><br><span class="line"></span><br><span class="line"># Try to load nvm using path of standard installation</span><br><span class="line">load_nvm /Users/heyhaiyang/.nvm</span><br><span class="line">run_nvm</span><br><span class="line"></span><br><span class="line"># Export Git hook params</span><br><span class="line">export GIT_PARAMS=<span class="string">&quot;$*&quot;</span></span><br><span class="line"></span><br><span class="line"># Run hook</span><br><span class="line">node <span class="string">&quot;./node_modules/yorkie/src/runner.js&quot;</span> commit-msg || <span class="punctuation">&#123;</span></span><br><span class="line">  echo</span><br><span class="line">  echo <span class="string">&quot;commit-msg hook failed (add --no-verify to bypass)&quot;</span></span><br><span class="line">  exit <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">**<span class="comment">// pre-commit**</span></span><br><span class="line">#!/bin/sh</span><br><span class="line">#yorkie <span class="number">2.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">command_exists () <span class="punctuation">&#123;</span></span><br><span class="line">  command -v <span class="string">&quot;$1&quot;</span> &gt;/dev/<span class="literal"><span class="keyword">null</span></span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">has_hook_script () <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> -f package.json <span class="punctuation">]</span> &amp;&amp; cat package.json | grep -q <span class="string">&quot;\\&quot;</span>$<span class="number">1</span>\\<span class="string">&quot;[[:space:]]*:&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">load_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm is not loaded<span class="punctuation">,</span> load it</span><br><span class="line">  command_exists nvm || <span class="punctuation">&#123;</span></span><br><span class="line">    export NVM_DIR=<span class="string">&quot;$1&quot;</span></span><br><span class="line">    <span class="punctuation">[</span> -s <span class="string">&quot;$1/nvm.sh&quot;</span> <span class="punctuation">]</span> &amp;&amp; . <span class="string">&quot;$1/nvm.sh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">run_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm has been loaded correctly<span class="punctuation">,</span> use project .nvmrc</span><br><span class="line">  command_exists nvm &amp;&amp; <span class="punctuation">[</span> -f .nvmrc <span class="punctuation">]</span> &amp;&amp; nvm use</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">cd <span class="string">&quot;.&quot;</span></span><br><span class="line"></span><br><span class="line"># Check if pre-push is defined<span class="punctuation">,</span> skip if not</span><br><span class="line">has_hook_script pre-push || exit <span class="number">0</span></span><br><span class="line"></span><br><span class="line"># Add common path where Node can be found</span><br><span class="line"># Brew standard installation path /usr/local/bin</span><br><span class="line"># Node standard installation path /usr/local</span><br><span class="line">export PATH=<span class="string">&quot;$PATH:/usr/local/bin:/usr/local&quot;</span></span><br><span class="line"></span><br><span class="line"># Try to load nvm using path of standard installation</span><br><span class="line">load_nvm /Users/heyhaiyang/.nvm</span><br><span class="line">run_nvm</span><br><span class="line"></span><br><span class="line"># Export Git hook params</span><br><span class="line">export GIT_PARAMS=<span class="string">&quot;$*&quot;</span></span><br><span class="line"></span><br><span class="line"># Run hook</span><br><span class="line">node <span class="string">&quot;./node_modules/yorkie/src/runner.js&quot;</span> pre-push || <span class="punctuation">&#123;</span></span><br><span class="line">  echo</span><br><span class="line">  echo <span class="string">&quot;pre-push hook failed (add --no-verify to bypass)&quot;</span></span><br><span class="line">  exit <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">**<span class="comment">// push-to-checkout**</span></span><br><span class="line">#!/bin/sh</span><br><span class="line">#yorkie <span class="number">2.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">command_exists () <span class="punctuation">&#123;</span></span><br><span class="line">  command -v <span class="string">&quot;$1&quot;</span> &gt;/dev/<span class="literal"><span class="keyword">null</span></span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">has_hook_script () <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> -f package.json <span class="punctuation">]</span> &amp;&amp; cat package.json | grep -q <span class="string">&quot;\\&quot;</span>$<span class="number">1</span>\\<span class="string">&quot;[[:space:]]*:&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">load_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm is not loaded<span class="punctuation">,</span> load it</span><br><span class="line">  command_exists nvm || <span class="punctuation">&#123;</span></span><br><span class="line">    export NVM_DIR=<span class="string">&quot;$1&quot;</span></span><br><span class="line">    <span class="punctuation">[</span> -s <span class="string">&quot;$1/nvm.sh&quot;</span> <span class="punctuation">]</span> &amp;&amp; . <span class="string">&quot;$1/nvm.sh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">run_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm has been loaded correctly<span class="punctuation">,</span> use project .nvmrc</span><br><span class="line">  command_exists nvm &amp;&amp; <span class="punctuation">[</span> -f .nvmrc <span class="punctuation">]</span> &amp;&amp; nvm use</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">cd <span class="string">&quot;.&quot;</span></span><br><span class="line"></span><br><span class="line"># Check if push-to-checkout is defined<span class="punctuation">,</span> skip if not</span><br><span class="line">has_hook_script push-to-checkout || exit <span class="number">0</span></span><br><span class="line"></span><br><span class="line"># Add common path where Node can be found</span><br><span class="line"># Brew standard installation path /usr/local/bin</span><br><span class="line"># Node standard installation path /usr/local</span><br><span class="line">export PATH=<span class="string">&quot;$PATH:/usr/local/bin:/usr/local&quot;</span></span><br><span class="line"></span><br><span class="line"># Try to load nvm using path of standard installation</span><br><span class="line">load_nvm /Users/heyhaiyang/.nvm</span><br><span class="line">run_nvm</span><br><span class="line"></span><br><span class="line"># Export Git hook params</span><br><span class="line">export GIT_PARAMS=<span class="string">&quot;$*&quot;</span></span><br><span class="line"></span><br><span class="line"># Run hook</span><br><span class="line">node <span class="string">&quot;./node_modules/yorkie/src/runner.js&quot;</span> push-to-checkout || <span class="punctuation">&#123;</span></span><br><span class="line">  echo</span><br><span class="line">  echo <span class="string">&quot;push-to-checkout hook failed (add --no-verify to bypass)&quot;</span></span><br><span class="line">  exit <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">**<span class="comment">// pre-push**</span></span><br><span class="line">#!/bin/sh</span><br><span class="line">#yorkie <span class="number">2.0</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">command_exists () <span class="punctuation">&#123;</span></span><br><span class="line">  command -v <span class="string">&quot;$1&quot;</span> &gt;/dev/<span class="literal"><span class="keyword">null</span></span> <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">has_hook_script () <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span> -f package.json <span class="punctuation">]</span> &amp;&amp; cat package.json | grep -q <span class="string">&quot;\\&quot;</span>$<span class="number">1</span>\\<span class="string">&quot;[[:space:]]*:&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">load_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm is not loaded<span class="punctuation">,</span> load it</span><br><span class="line">  command_exists nvm || <span class="punctuation">&#123;</span></span><br><span class="line">    export NVM_DIR=<span class="string">&quot;$1&quot;</span></span><br><span class="line">    <span class="punctuation">[</span> -s <span class="string">&quot;$1/nvm.sh&quot;</span> <span class="punctuation">]</span> &amp;&amp; . <span class="string">&quot;$1/nvm.sh&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"># OS X and Linux only</span><br><span class="line">run_nvm () <span class="punctuation">&#123;</span></span><br><span class="line">  # If nvm has been loaded correctly<span class="punctuation">,</span> use project .nvmrc</span><br><span class="line">  command_exists nvm &amp;&amp; <span class="punctuation">[</span> -f .nvmrc <span class="punctuation">]</span> &amp;&amp; nvm use</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">cd <span class="string">&quot;.&quot;</span></span><br><span class="line"></span><br><span class="line"># Check if pre-push is defined<span class="punctuation">,</span> skip if not</span><br><span class="line">has_hook_script pre-push || exit <span class="number">0</span></span><br><span class="line"></span><br><span class="line"># Add common path where Node can be found</span><br><span class="line"># Brew standard installation path /usr/local/bin</span><br><span class="line"># Node standard installation path /usr/local</span><br><span class="line">export PATH=<span class="string">&quot;$PATH:/usr/local/bin:/usr/local&quot;</span></span><br><span class="line"></span><br><span class="line"># Try to load nvm using path of standard installation</span><br><span class="line">load_nvm /Users/heyhaiyang/.nvm</span><br><span class="line">run_nvm</span><br><span class="line"></span><br><span class="line"># Export Git hook params</span><br><span class="line">export GIT_PARAMS=<span class="string">&quot;$*&quot;</span></span><br><span class="line"></span><br><span class="line"># Run hook</span><br><span class="line">node <span class="string">&quot;./node_modules/yorkie/src/runner.js&quot;</span> pre-push || <span class="punctuation">&#123;</span></span><br><span class="line">  echo</span><br><span class="line">  echo <span class="string">&quot;pre-push hook failed (add --no-verify to bypass)&quot;</span></span><br><span class="line">  exit <span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a0ac6e85-da51-4f0d-b5f7-b13f934cf119/commit-msg.txt">commit-msg</a></p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4618190b-fb30-4f0f-ac55-290b1c8e3674/pre-commit.txt">pre-commit</a></p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8e6e0bbd-1370-4960-9bc8-a6671b5b9327/pre-push.txt">pre-push</a></p><p><a href="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/18ffdb64-6ddd-4ac9-bd35-4ffc476363cf/push-to-checkout.txt">push-to-checkout</a></p><h3 id="附加配置——选择性添加-lint-脚本"><a href="#附加配置——选择性添加-lint-脚本" class="headerlink" title="附加配置——选择性添加 lint 脚本"></a>附加配置——选择性添加 lint 脚本</h3><p><a href="https://juejin.cn/post/6991728251034959885">https://juejin.cn/post/6991728251034959885</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据我自己的项目，npm 要替换成 pnpm ，用不同的包管理器</span></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc &amp;&amp; vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="comment">// 主要配置 触发pre-commit 进行elint stylelint 格式校验</span></span><br><span class="line"> <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run lint:js &amp;&amp; npm run lint:style &amp;&amp; npm run lint:prettier&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;lint:js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint --cache --ext .js,.jsx,.ts,.tsx --format=pretty ./src&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;lint:prettier&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --check &quot;</span>**<span class="comment">/*&quot; --end-of-line auto&quot;,</span></span><br><span class="line"><span class="comment"> &quot;lint:style&quot;: &quot;stylelint --fix &quot;src/**/</span>*.less<span class="string">&quot; --syntax less&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;lint-staged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lint-staged&quot;</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;lint-staged:js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint --ext .js,.jsx,.ts,.tsx &quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><h3 id="验证-10"><a href="#验证-10" class="headerlink" title="验证"></a><strong>验证</strong></h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 已验证，后续过程中继续验证</span></span><br></pre></td></tr></table></figure><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/vite-vue-ts-antd.git">https://gitee.com/heyhaiyon/vite-vue-ts-antd.git</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> Ant-Design-Vue </tag>
            
            <tag> VUE3 </tag>
            
            <tag> TypeScript </tag>
            
            <tag> Vite </tag>
            
            <tag> VueRouter4 </tag>
            
            <tag> Vuex4 </tag>
            
            <tag> less </tag>
            
            <tag> tsx </tag>
            
            <tag> jsx </tag>
            
            <tag> Eslint </tag>
            
            <tag> Prettier </tag>
            
            <tag> Stylelint </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用ant design vue日期组件——年份(year)时间组件踩坑记录</title>
      <link href="/2022/02/18/code/2021.03.18-%E4%BD%BF%E7%94%A8a-date-picker%E5%B0%81%E8%A3%85%E7%8B%AC%E7%AB%8B%E5%B9%B4%E4%BB%BD%E7%BB%84%E4%BB%B6/"/>
      <url>/2022/02/18/code/2021.03.18-%E4%BD%BF%E7%94%A8a-date-picker%E5%B0%81%E8%A3%85%E7%8B%AC%E7%AB%8B%E5%B9%B4%E4%BB%BD%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>遇到的问题：</strong></p><p>使用ant design vue组件库，a-date-picker标签写年份选择输入框</p><ol><li>无法获取选中的值</li><li>日期下拉面板的显示与收起控制</li><li>使用<code>allowClear</code>属性时，点击右侧清空表单 ‘ X ’ ，无法清空输入框</li></ol></blockquote><h2 id="演示实例"><a href="#演示实例" class="headerlink" title="演示实例"></a>演示实例</h2><p><img src="/../../assets/post-headers/20210318/a-year-picker%E5%B9%B4%E4%BB%BD%E6%97%B6%E9%97%B4%E7%8B%AC%E7%AB%8B%E7%BB%84%E4%BB%B6%E6%BC%94%E7%A4%BA%E5%AE%9E%E4%BE%8B.gif" alt="a-year-picker年份时间独立组件演示实例"></p><blockquote><p><strong>版本信息</strong></p><ol><li><p>vue 2.6.11</p></li><li><p>ant-design-vue 1.7.1</p></li><li><p>moment.js（日期转换依赖）</p></li></ol></blockquote><h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><p>根据官方提供的文档，了解到其中有3个事件属性：<code>change</code>,<code>panelChange</code>,<code>openChange</code>，3个事件属性分别对应：<strong>value改变的回调</strong>，<strong>面板切换的回调</strong>（选中值或者月份等切换月份都会触发），<strong>面板显示与收起的回调</strong>。</p><h2 id="具体代码过程"><a href="#具体代码过程" class="headerlink" title="具体代码过程"></a>具体代码过程</h2><h3 id="1-template模板区域"><a href="#1-template模板区域" class="headerlink" title="1. template模板区域"></a>1. template模板区域</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 50px 50px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-date-picker</span></span></span><br><span class="line"><span class="tag">      <span class="attr">format</span>=<span class="string">&quot;YYYY年&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">mode</span>=<span class="string">&quot;year&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:value</span>=<span class="string">&quot;createValue&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">&quot;选择年份&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:open</span>=<span class="string">&quot;isopen&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">change</span>=<span class="string">&quot;onChange&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">openChange</span>=<span class="string">&quot;openChange&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">panelChange</span>=<span class="string">&quot;panelChange&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a-date-picker</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-js区域"><a href="#2-js区域" class="headerlink" title="2. js区域"></a>2. js区域</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;aYearPicker&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;&#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">isopen</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">createValue</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="title class_">Year</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    moment,</span><br><span class="line">    <span class="comment">// 使用change事件来清除输入框中的值</span></span><br><span class="line">    onChange () &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">createValue</span> = <span class="literal">null</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">Year</span> = <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 使用openChange事件控制日期下拉面板显示与收起</span></span><br><span class="line">    openChange (isopen) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isopen) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">isopen</span> = <span class="literal">true</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">isopen</span> = <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 使用panelChange事件控制选中年份的方法</span></span><br><span class="line">    panelChange (value) &#123;</span><br><span class="line">      <span class="comment">// 接收panelChange返回的值</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">createValue</span> = value</span><br><span class="line">      <span class="comment">// 用monent格式化时间为年，格式化为4位字符串，如果有需要传递数据时为字符串可以这样单独格式化为一份数据</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">Year</span> = <span class="title function_">moment</span>(value).<span class="title function_">format</span>(<span class="string">&#x27;YYYY&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">isopen</span> = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/ant-vue-admin.git">https://gitee.com/heyhaiyon/ant-vue-admin.git</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> Ant-Design-Vue </tag>
            
            <tag> 组件封装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用ant design vue的日历组件，实现一个简单交易日与非交易日的切换</title>
      <link href="/2022/02/18/code/2021.03.20-%E4%BD%BF%E7%94%A8ant%20design%20vue%E7%9A%84%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E4%BA%A4%E6%98%93%E6%97%A5%E4%B8%8E%E9%9D%9E%E4%BA%A4%E6%98%93%E6%97%A5%E7%9A%84%E5%88%87%E6%8D%A2/"/>
      <url>/2022/02/18/code/2021.03.20-%E4%BD%BF%E7%94%A8ant%20design%20vue%E7%9A%84%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E4%BA%A4%E6%98%93%E6%97%A5%E4%B8%8E%E9%9D%9E%E4%BA%A4%E6%98%93%E6%97%A5%E7%9A%84%E5%88%87%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>需求：</p><ol><li>日历区分交易日、非交易日</li><li>可以切换面板查看整年交易日信息</li><li>可以在手动调整交易日、非交易日</li></ol></blockquote><h2 id="演示实例"><a href="#演示实例" class="headerlink" title="演示实例"></a>演示实例</h2><p><img src="/../../assets/post-headers/20210320/a-calendar%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8.gif" alt="a-calendar日历组件使用"></p><h2 id="序——使用软件及框架版本"><a href="#序——使用软件及框架版本" class="headerlink" title="序——使用软件及框架版本"></a>序——使用软件及框架版本</h2><ol><li>vue 2.6.11</li><li>ant-design-vue 1.7.1</li><li>moment.js（日期转换依赖）</li></ol><h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><ol><li>使用组件库的a-calendar标签可以实现一个日历的基本框架</li><li>每日模块实现交易日、非交易日的区分显示</li><li>以及过期和当日的日期灰色显示，且不能切换交易状态</li><li>将来的日期可以点击使用a-popconfirm标签来切换交易状态，或者使用右键点击切换</li></ol><h2 id="具体代码过程"><a href="#具体代码过程" class="headerlink" title="具体代码过程"></a>具体代码过程</h2><h3 id="1-template模板区域"><a href="#1-template模板区域" class="headerlink" title="1. template模板区域"></a>1. template模板区域</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div style=&quot;margin: 0 auto&quot;&gt;</span><br><span class="line">    &lt;h1 style=&quot;text-align: center&quot;&gt;日历组件&lt;/h1&gt;</span><br><span class="line">    &lt;a-row class=&quot;calendarContent&quot; style=&quot;margin: 0 auto; width: 100%&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;calendarBox&quot;&gt;</span><br><span class="line">        &lt;a-calendar :value=&quot;value&quot; @panelChange=&quot;panelChange&quot; @select=&quot;selectDate&quot;&gt;</span><br><span class="line">          &lt;ul slot=&quot;dateCellRender&quot; slot-scope=&quot;value&quot; class=&quot;events&quot;&gt;</span><br><span class="line">            &lt;li v-for=&quot;item in getListData(value)&quot; :key=&quot;item.date&quot;&gt;</span><br><span class="line">              &lt;a-tooltip</span><br><span class="line">                v-if=&quot;item.date&lt;nowDate || item.date == nowDate&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                  &lt;span&gt;只能在下个交易日才可设置&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">                &lt;div class=&quot;cellBlockOld&quot; v-if=&quot;item.date &lt; nowDate&quot;&gt;</span><br><span class="line">                  &lt;span v-if=&quot;item.workFlag==&#x27;0&#x27;&quot;&gt;交易日&lt;/span&gt;</span><br><span class="line">                  &lt;span v-if=&quot;item.workFlag==&#x27;1&#x27; &amp;&amp; item.date !=next&quot;&gt;非交易日&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;cellBlockNow&quot; v-if=&quot;item.date == nowDate&quot;&gt;</span><br><span class="line">                  &lt;span v-if=&quot;item.workFlag==&#x27;0&#x27; &amp;&amp; item.date == nowDate&quot;&gt;交易日&lt;/span&gt;</span><br><span class="line">                  &lt;span v-if=&quot;item.workFlag==&#x27;1&#x27; &amp;&amp; item.date == nowDate&quot;&gt;非交易日&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/a-tooltip&gt;</span><br><span class="line">              &lt;a-popconfirm</span><br><span class="line">                v-if=&quot;item.workFlag == &#x27;1&#x27; &amp;&amp; item.date&gt;nowDate&quot;</span><br><span class="line">                title=&quot;设为交易日&quot;</span><br><span class="line">                @confirm=&quot;setDate(0)&quot;</span><br><span class="line">                @cancel=&quot;cancel&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;div class=&quot;cellBlockNext1&quot;&gt;</span><br><span class="line">                &lt;span v-if=&quot;item.workFlag== &#x27;1&#x27;&quot;&gt;非交易日</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/a-popconfirm&gt;</span><br><span class="line">              &lt;a-popconfirm</span><br><span class="line">                v-if=&quot;item.workFlag == &#x27;0&#x27; &amp;&amp; item.date&gt;nowDate&quot;</span><br><span class="line">                title=&quot;设为非交易日&quot;</span><br><span class="line">                @confirm=&quot;setDate(1)&quot;</span><br><span class="line">                @cancel=&quot;cancel&quot;</span><br><span class="line">              &gt;</span><br><span class="line">                &lt;div class=&quot;cellBlockNext0&quot;&gt;</span><br><span class="line">                  &lt;span v-if=&quot;item.workFlag== &#x27;0&#x27; &amp;&amp; item.date != next&quot;&gt;交易日&lt;/span&gt;</span><br><span class="line">                  &lt;span v-if=&quot;item.workFlag== &#x27;0&#x27; &amp;&amp; item.date == next&quot;&gt;下一交易日</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/a-popconfirm&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/a-calendar&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/a-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p><strong>注意事项与难点：</strong></p><ol><li>a-calendar标签的数据绑定，与数据遍历逻辑，这里数据绑定在a- calendar标签上，日期面板的切换和选中日期的事件都在绑定在此；内层嵌套插槽渲染以一周7天渲染日期，绑定数据几乎不用变化，可以直接拿来用。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;a-calendar :value=&quot;value&quot; @panelChange=&quot;panelChange&quot; @select=&quot;selectDate&quot;&gt;</span><br><span class="line">  &lt;ul slot=&quot;dateCellRender&quot; slot-scope=&quot;value&quot; class=&quot;events&quot;&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in getListData(value)&quot; :key=&quot;item.date&quot;&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/a-calendar&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>交易状态与样式的控制，在模板区域添加多个判断条件区分</p></li><li><p>嵌入<code>a-popconfirm</code>来通过气泡事件修改交易状态</p></li></ol><h3 id="2-js区域"><a href="#2-js区域" class="headerlink" title="2. js区域"></a>2. js区域</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;&#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">value</span>: <span class="title function_">moment</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()),</span><br><span class="line">      <span class="attr">dataList</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">date</span>: <span class="string">&#x27;20210228&#x27;</span>,</span><br><span class="line">          <span class="attr">workFlag</span>: <span class="string">&#x27;1&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">date</span>: <span class="string">&#x27;20210301&#x27;</span>,</span><br><span class="line">          <span class="attr">workFlag</span>: <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 此处省略造的数据，大家可以使用mock或者在data中造一些数据，此案例简单造了一个月的数据用与演示</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">now</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">      <span class="attr">selectDateValue</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    moment,</span><br><span class="line">    panelChange (value) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;面板中点击、切换事件&#x27;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">value</span> = value</span><br><span class="line">    &#125;,</span><br><span class="line">    selectDate (value) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;选中日期事件&#x27;</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(value)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">selectDateValue</span> = value.<span class="title function_">format</span>(<span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 切换交易日与非交易日方法，切换交易状态的同时面板交易状态改变，同时向后台发送请求（自行添加请求）</span></span><br><span class="line">    setDate (val) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(val)</span><br><span class="line">      <span class="keyword">var</span> newDataList = []</span><br><span class="line">      <span class="comment">// 此处大家可以思考一下，forEach和map两种方法对数组的操作</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dataList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">date</span> === <span class="variable language_">this</span>.<span class="property">selectDateValue</span>) &#123;</span><br><span class="line">          e.<span class="property">workFlag</span> = val</span><br><span class="line">          newDataList.<span class="title function_">push</span>(e)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          newDataList.<span class="title function_">push</span>(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dataList</span> = newDataList</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">dataList</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    cancel () &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    getListData (value) &#123;</span><br><span class="line">      <span class="keyword">var</span> listData = []</span><br><span class="line">      <span class="comment">// 注意事项1：通过比对日期确定将每日的交易状态与日历日期匹配</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">dataList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 让数组与日历日期匹配</span></span><br><span class="line">        <span class="keyword">if</span> (e.<span class="property">date</span> === value.<span class="title function_">format</span>(<span class="string">&#x27;YYYYMMDD&#x27;</span>)) &#123;</span><br><span class="line">          listData.<span class="title function_">push</span>(e)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> listData</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="attr">nowDate</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> nowDate = <span class="title function_">moment</span>(<span class="variable language_">this</span>.<span class="property">now</span>).<span class="title function_">format</span>(<span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> nowDate</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">next</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> next</span><br><span class="line">      <span class="keyword">var</span> nextDate = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="variable language_">this</span>.<span class="property">now</span> - <span class="number">0</span> + <span class="number">86400000</span>)</span><br><span class="line">      next = <span class="title function_">moment</span>(nextDate).<span class="title function_">format</span>(<span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> next</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="注意事项与难点："><a href="#注意事项与难点：" class="headerlink" title="注意事项与难点："></a>注意事项与难点：</h4><ol><li>通过比对日期确定每日的交易状态与日历日期匹配</li><li>修改交易状态的方法</li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>一个简单的日历组件就算搭建这样就基本完成了，具体代码可以到下面gitee里面看，如果有错误和改进的地方，欢迎大家指正交流。</p><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/ant-vue-admin.git">https://gitee.com/heyhaiyon/ant-vue-admin.git</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> Ant-Design-Vue </tag>
            
            <tag> 组件封装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用ant design vue封装一个日期组件，提交数据为字符串</title>
      <link href="/2022/02/18/code/2021.03.14-dateStingPicker%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/"/>
      <url>/2022/02/18/code/2021.03.14-dateStingPicker%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p>需求：</p><ol><li>页面中使用日期选择框，输入框中回显日期格式“XXXX年XX月XX日”</li><li>提交数据时将日期格式转换为字符串，如：“20210314”</li><li>查看时，回显数据日期格式同样为“XXXX年XX月XX日”</li></ol></blockquote><h2 id="演示实例"><a href="#演示实例" class="headerlink" title="演示实例"></a>演示实例</h2><p><img src="/../../assets/post-headers/20210314/dateStringPicker%E6%BC%94%E7%A4%BA%E5%AE%9E%E4%BE%8B.gif" alt="dateStringPicker演示实例"></p><h2 id="序——使用软件及框架版本"><a href="#序——使用软件及框架版本" class="headerlink" title="序——使用软件及框架版本"></a>序——使用软件及框架版本</h2><ol><li>vue 2.6.11</li><li>ant-design-vue 1.7.1</li><li>moment.js（日期转换依赖）</li></ol><h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><ol><li>根据需求，可以知道需要回显格式需要为“XXXX年XX月XX日”，查看组件库<code>a-date-picker</code>，了解到<code>format</code>属性可以将在输入框中数据转换为特定格式。</li><li>在提交数据时，由于我们是封装组件，给其他页面中使用，所以需要<strong>将需要提交的值由子组件置到父组件</strong>上，所以在日期组件中选中日期出发的事件<code>change</code>&#x2F;<code>input</code>，在选中日期的时候需要使用到<code>$emit</code>，将值置到上层副组件。</li><li>在回显数据时，查看页面数据的时候，表单上显示数据，此时从后台数据中拿到的是字符串“20210314”，同时需要将数据格式化为“XXXX年XX月XX日”，显示在输入框中。</li></ol><h2 id="具体代码过程"><a href="#具体代码过程" class="headerlink" title="具体代码过程"></a>具体代码过程</h2><h3 id="1-template模板区域"><a href="#1-template模板区域" class="headerlink" title="1. template模板区域"></a>1. template模板区域</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!--  这里momVal是momentValue的缩写，因为value的真实值是moment对象  --&gt;</span><br><span class="line">    &lt;a-date-picker</span><br><span class="line">      :value=&quot;momVal&quot;</span><br><span class="line">      :allowClear=&quot;allowClear&quot;</span><br><span class="line">      :disabled=&quot;disabled&quot;</span><br><span class="line">      :format=&quot;dateFormat&quot;</span><br><span class="line">      :mode=&quot;mode&quot;</span><br><span class="line">      :placeholder=&quot;placeholder&quot;</span><br><span class="line">      @change=&quot;dateChanged&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/a-date-picker&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>在这里用到几个属性，</p><ol><li>由于是封装组件，所以使用<code>value</code>实现数据的双向绑定，在表单中使用<code>allClear</code>的时候在点击清除按钮时也可以清除表单显示和底层数据。</li><li>mode是输入框显示模式，date、month、year可选，但是year模式时不太好用，具体可以参考下一篇，year年份组件封装。</li><li>当然组件上不止有<code>@change</code>事件，<code>@blur</code>，<code>@select</code>都是可以使用的，可以根据项目需求来具体使用，不过在父组件上使用事件时，需要在子组件<code>props</code> 中声明，并在模板部分使用双向绑定<code>:select=&quot;select&quot;</code>。</li></ol><h3 id="2-js区域"><a href="#2-js区域" class="headerlink" title="2. js区域"></a>2. js区域</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;dateStringPicker&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>],</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 返回的日期格式</span></span><br><span class="line">    <span class="attr">dateFormat</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&#x27;YYYY年MM月DD日&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 类型,选择年份请传入&quot;year&quot;,选择年月请传入&quot;month&quot;</span></span><br><span class="line">    <span class="attr">mode</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&#x27;date&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">placeholder</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&#x27;请选择日期&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">disabled</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">allowClear</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 判断输入的两种状态input/change</span></span><br><span class="line">    <span class="attr">triggerChange</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">const</span> dateStr = <span class="variable language_">this</span>.<span class="property">value</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 由于vue是数据驱动页面加载的，所以在data中需要给value一个初始值</span></span><br><span class="line">      <span class="attr">momVal</span>: !dateStr ? <span class="literal">null</span> : <span class="title function_">moment</span>(dateStr, <span class="variable language_">this</span>.<span class="property">dateFormat</span>),</span><br><span class="line">      <span class="attr">lastValue</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="comment">// 此处的监听,用来实现设计思路3</span></span><br><span class="line">    value (val) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!val) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">momVal</span> = <span class="literal">null</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">momVal</span> = <span class="title function_">moment</span>(val, <span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    moment,</span><br><span class="line">    <span class="comment">// 此处change事件，用来实现设计思路2，此处有注意事项，当时写的时候还是遇到一些问题的</span></span><br><span class="line">    dateChanged (mom) &#123;</span><br><span class="line">      <span class="comment">// 参考注意事项3</span></span><br><span class="line">      <span class="keyword">if</span> (!mom) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">triggerChange</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&#x27;change&#x27;</span>, <span class="literal">null</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, <span class="literal">null</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 参考注意事项1</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lastValue</span> = <span class="title function_">moment</span>(mom).<span class="title function_">format</span>(<span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br><span class="line">        <span class="comment">// 参考注意事项2</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">triggerChange</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&#x27;change&#x27;</span>, <span class="variable language_">this</span>.<span class="property">lastValue</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, <span class="variable language_">this</span>.<span class="property">lastValue</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h4><ol><li><p>在提交数据的时候需要提交给表单的数据我们通过<code>lastValue</code>传递；如果不需要格式转换可以直接使用<code>this.momVal = value</code>这样传递的数据类型还是moment对象。</p></li><li><p>生造一个<code>triggerChange</code>属性的原因是，在ant-design-vue组件中，使用a-form表单组件的时候，分了两种情况</p><ul><li>提交数据时不需要校验规则，使用<code>v-model</code>绑定数据</li><li>提交数据时需要校验规则，使用<code>v-decorator</code></li></ul><p>在使用<code>v-model</code>时，点击日期触发的事件时<code>input</code>，而在使用<code>v-decorator</code>时，点击日期触发的事件时<code>change</code></p></li><li><p>为什么要在提交数据的<code>change</code> 事件中，添加一个<code>!mom</code>的条件判断，原因是：在表单上添加<code>allClear</code>属性之后，表单中会出现可以清除当前输入框数据的符号“❌”，在清除表单数据的时候，表单上回显示<code>no valid</code>或者<code>NaN</code>，原因可能是清除之后表单的初始值数据类型不对，这点我也不是太清楚。总之，解决方法就是添加一个<code>!mom</code>的条件判断，在清除表单数据的时候重新给表单value赋一个空值<code>null</code>，因为value的类型是对象，所以不能是<code>&quot;&quot;</code>。</p></li></ol><h3 id="测试demo实例"><a href="#测试demo实例" class="headerlink" title="测试demo实例"></a>测试demo实例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">      &lt;h1&gt;this is dateStringPiker&lt;/h1&gt;</span><br><span class="line">      &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">        &lt;a-button type=&quot;primary&quot; @click=&quot;click&quot;&gt; 提交数据&lt;/a-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;a-form :form=&quot;editForm&quot; layout=&quot;inline&quot;&gt;</span><br><span class="line">        &lt;!--  使用v-model时，是以input事件从子组件抛出value值  --&gt;</span><br><span class="line">        &lt;a-form-item label=&quot;v-model形式的绑定的 日期&quot;&gt;</span><br><span class="line">          &lt;date-string-picker</span><br><span class="line">            v-model=&quot;editForm.date&quot;</span><br><span class="line">            :trigger-change=&quot;false&quot;&gt;</span><br><span class="line">          &lt;/date-string-picker&gt;</span><br><span class="line">        &lt;/a-form-item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 在需要校验的情况下，在表单中使用v-decorator的形式绑定，</span><br><span class="line">        同时自组件要以change的形式将value抛出到上层副组件 --&gt;</span><br><span class="line">        &lt;!--        &lt;a-form-item label=&quot;v-decorator形式绑定的 日期&quot;&gt;--&gt;</span><br><span class="line">        &lt;!--          &lt;date-string-picker--&gt;</span><br><span class="line">        &lt;!--            v-decorator=&quot;[&#x27;date&#x27;,&#123;initialValue:&#x27;&#x27;&#125;]&quot;--&gt;</span><br><span class="line">        &lt;!--            :trigger-change=&quot;true&quot;&gt;--&gt;</span><br><span class="line">        &lt;!--          &lt;/date-string-picker&gt;--&gt;</span><br><span class="line">        &lt;!--        &lt;/a-form-item&gt;--&gt;</span><br><span class="line">      &lt;/a-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import dateStringPicker from &#x27;@/component/dateStringPicker&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;demo&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    dateStringPicker</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 使用v-decorator要使用下面方法注册form表单</span><br><span class="line">      // editForm: this.$form.createForm(this)</span><br><span class="line"></span><br><span class="line">      // v-model的形式，form表单注册则比较简单</span><br><span class="line">      editForm: &#123;</span><br><span class="line">        date: &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    click() &#123;</span><br><span class="line">      console.log(&#x27;点击按钮&#x27;)</span><br><span class="line">      // v-model绑定测试提交</span><br><span class="line">      // console.log(this.editForm)</span><br><span class="line"></span><br><span class="line">      // v-decorator绑定，测试数据提交</span><br><span class="line">      this.editForm.validateFields((err, value) =&gt; &#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">        console.log(value)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.box &#123;</span><br><span class="line">  margin: 30px 30px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn &#123;</span><br><span class="line">  margin: 30px 30px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/ant-vue-admin.git">https://gitee.com/heyhaiyon/ant-vue-admin.git</a></p><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> Ant-Design-Vue </tag>
            
            <tag> 组件封装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用vite从0开始搭建vue项目</title>
      <link href="/2022/02/18/code/2021.03.06-%E4%BD%BF%E7%94%A8vite%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE/"/>
      <url>/2022/02/18/code/2021.03.06-%E4%BD%BF%E7%94%A8vite%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>既然是第一次用vite搭建项目，最正确的姿势当然是阅读<a href="https://vitejs.dev/guide/">vite官网</a>的说明，虽然是英文的，如果英文不好也没关系，浏览上谷歌翻译一下也是可以的。废话少说，我们开始吧。</p></blockquote><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>这里根据vite的兼容性说明，要求<code>node.js</code>版本&gt;&#x3D;<code>12.0.0</code></p><p>提供了<code>npm</code>,<code>yarn</code>,两种包管理工具的创建方式</p><p>用NPM：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init @vitejs/app</span><br></pre></td></tr></table></figure><p>使用yarn：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn create @vitejs/app</span><br></pre></td></tr></table></figure><p>然后按照提示进行操作！</p><h3 id="这里我们使用yarn来创建一个vue项目（这里我使用的Mac，与PC步骤基本一致）"><a href="#这里我们使用yarn来创建一个vue项目（这里我使用的Mac，与PC步骤基本一致）" class="headerlink" title="这里我们使用yarn来创建一个vue项目（这里我使用的Mac，与PC步骤基本一致）"></a>这里我们使用<code>yarn</code>来创建一个vue项目（这里我使用的Mac，与PC步骤基本一致）</h3><ol><li><p>在我们想要创建的项目都目录下打开终端（命令行工具）</p></li><li><p>输入如下命令</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// Mac  其中sudo是获取系统权限的标识</span><br><span class="line">sudo yarn create @vitejs/app</span><br><span class="line"></span><br><span class="line">// PC</span><br><span class="line">yarn create @vitejs/app</span><br></pre></td></tr></table></figure><p>我这里使用了sudo，所以要输入开机密码，输入之后回车，这里终端显示安装依赖，提示我们输入项目名称</p><p>  <img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20210306203418779.png" alt="image-20210306203418779"></p></li><li><p>输入项目名称<code>vite-vue</code>，回车</p><p> <img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/image-20210306203830618.png" alt="image-20210306203830618"></p></li><li><p>键盘上下↕️移动，选择要创建的项目模板，这里我们选择vue并回车</p><p><img src="https://gitee.com/heyhaiyon/upic/raw/master/uPic/iShot2021-03-06%2020.49.38.png" alt="iShot2021-03-06 20.49.38"></p></li><li><p>此时我们依次执行上面三条命令，就一个简单的项目就创建并启动了。</p></li></ol><h3 id="这里我自己还使用了另一种包管理工具pnpm，来管理依赖包"><a href="#这里我自己还使用了另一种包管理工具pnpm，来管理依赖包" class="headerlink" title="这里我自己还使用了另一种包管理工具pnpm，来管理依赖包"></a>这里我自己还使用了另一种包管理工具pnpm，来管理依赖包</h3><blockquote><p>原因是：pnpm安装依赖的包的速度远远快于npm、yarn，也是偶然看到公众号的推文，试了一下，果然真香。</p><p>想要了解原理的同学，可以看<strong>苍青浪</strong>的<a href="https://jishuin.proginn.com/p/763bfbd3bcff">为什么现在我更推荐 pnpm 而不是 npm&#x2F;yarn?</a>，也可以去<a href="https://pnpm.js.org/en/">pnpm官网</a>查看</p></blockquote><p>创建项目的步骤1、2、3都一样，从第四步开始不一样</p><ol start="4"><li><p>使用<code>pnpm install</code>安装依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install</span><br></pre></td></tr></table></figure></li><li><p>运行项目</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm dev</span><br></pre></td></tr></table></figure></li></ol><p>这样就使用了pnpm的包管理工具安装依赖，至于依赖的安装，pnpm类似于yarn，使用<code>pnpm add 依赖包名称</code>，具体的更多命令大家就看一下官网，使用起来和npm、yarn都是类似的。</p><h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>之前在看winter采访尤大的时候，尤大就提到在打磨vite，vite的打包速度会非常的快，今天试过之后确实真香，还内置了热部署等功能，非常好用；至于提到的pnpm，也是一个体验非常好的包管理工具，真的香。</p><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>微信公众号：heyhaiyang</p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p><p>博客园：<a href="https://www.cnblogs.com/heyhaiyang/">heyhaiyang</a></p><p>头条号：heyhaiyang</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
            <tag> VUE3 </tag>
            
            <tag> todolist </tag>
            
            <tag> 配置手册 </tag>
            
            <tag> pnpm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webpack5-配置手册</title>
      <link href="/2022/02/18/code/2021.02.28-Webpack5%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C/"/>
      <url>/2022/02/18/code/2021.02.28-Webpack5%E9%85%8D%E7%BD%AE%E6%89%8B%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<blockquote><p>针对新手入门搭建项目，Webpack5 配置手册（从0开始）</p></blockquote><p><img src="/../../assets/post-headers/20210228/webpack5(2).jpg" alt="v2-2ab72a692acd2cb83e43271dd4cfc3d8_1440w"></p><h2 id="webpack安装顺序"><a href="#webpack安装顺序" class="headerlink" title="webpack安装顺序"></a>webpack安装顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1. `npm init -y`，初始化包管理文件 package.json</span><br><span class="line">2. 新建src源代码目录</span><br><span class="line">3. 新建index.html</span><br><span class="line">4. `yarn add webpack webpack-cli`,安装webpack相关包</span><br><span class="line">5. 在项目根目录中，创建webpack.config.js 的配置文件</span><br><span class="line">6. `yarn add webpack-dev-server`,安装支持项目自动打包的工具，并配置</span><br><span class="line">7. `yarn add html-webpack-plugin`,安装生成预览页面插件并配置</span><br><span class="line">8. `yarn add style-loader css-loader`,安装处理css文件的loader</span><br><span class="line">9. `yarn add less-loader less`,安装处理less文件的loader</span><br><span class="line">10. `yarn add sass-loader node-sass`,安装处理scss文件的loader</span><br><span class="line">11. `yarn add postcss postcss-loader postcss-preset-env autoprefixer`,配置postCSS自动添加css的兼容前缀（可选）</span><br><span class="line">12. `yarn add url-loader file-loader`,安装处理css文件中的图片和字体文件</span><br><span class="line">13. `yarn add html-loader`,安装处理html文件中的图片和字体文件</span><br><span class="line">14. `yarn add @babel/core babel-loader @babel/preset-env 前面3个是必须的，后面的看需要 @babel/plugin-transform-runtime @babel/plugin-proposal-class-properties`,安装处理js高级语法（ES6以上）</span><br><span class="line">15. 之后看下面的插件安装代码。</span><br></pre></td></tr></table></figure><p>yarn版本 基础版</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">yarn add html-webpack-plugin</span><br><span class="line">yarn add style-loader css-loader</span><br><span class="line">yarn add less-loader less</span><br><span class="line">yarn add sass-loader node-sass</span><br><span class="line">yarn add url-loader file-loader</span><br><span class="line">yarn add html-loader</span><br><span class="line">yarn add @babel/core babel-loader @babel/preset-env 前面3个是必须的，后面的看需要 @babel/plugin-transform-runtime @babel/plugin-proposal-class-properties</span><br><span class="line">yarn add postcss postcss-loader postcss-preset-env</span><br><span class="line">yarn add mini-css-extract-plugin</span><br><span class="line">yarn add optimize-css-assets-webpack-plugin</span><br><span class="line">// eslint-loader即将被废弃</span><br><span class="line">yarn add eslint eslint-webpack-plugin</span><br><span class="line">yarn add eslint-config-airbnb-base 或 eslint-config-airbnb 或 vue的eslint</span><br><span class="line">yarn add clean-webpack-plugin</span><br></pre></td></tr></table></figure><p>pnpm版本 react版本，添加解析react的babel</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pnpm add html-webpack-plugin</span><br><span class="line">pnpm add style-loader css-loader</span><br><span class="line">pnpm add less-loader less</span><br><span class="line">pnpm add sass-loader node-sass</span><br><span class="line">pnpm add url-loader file-loader</span><br><span class="line">pnpm add html-loader</span><br><span class="line">pnpm add @babel/core babel-loader @babel/preset-env 前面3个是必须的，后面的看需要 @babel/plugin-transform-runtime @babel/plugin-proposal-class-properties</span><br><span class="line">pnpm add postcss postcss-loader postcss-preset-env</span><br><span class="line">pnpm add mini-css-extract-plugin</span><br><span class="line">pnpm add optimize-css-assets-webpack-plugin</span><br><span class="line">// eslint-loader即将被废弃</span><br><span class="line">pnpm add eslint eslint-webpack-plugin</span><br><span class="line">pnpm add eslint-config-airbnb-base 或 eslint-config-airbnb 或 vue的eslint</span><br><span class="line">pnpm add clean-webpack-plugin</span><br></pre></td></tr></table></figure><p><strong>使用<code>npx babel-upgrade</code>将所有关于babel的插件都升级都最新版本以适应兼容性</strong> </p><h2 id="在-babelrc-中配置，或者在package-json中直接添加"><a href="#在-babelrc-中配置，或者在package-json中直接添加" class="headerlink" title="在.babelrc 中配置，或者在package.json中直接添加"></a>在.babelrc 中配置，或者在package.json中直接添加</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [&quot;@babel/preset-env&quot;],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;@babel/plugin-transform-runtime&quot;,</span><br><span class="line">    &quot;@babel/plugin-proposal-class-properties&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="webpack-config-js中配置插件"><a href="#webpack-config-js中配置插件" class="headerlink" title="webpack.config.js中配置插件"></a>webpack.config.js中配置插件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./src/main.js&#x27;</span>),</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 插件</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// html</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title function_">htmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./src/index.html&#x27;</span>),</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// 打包前清除dist</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// Loaders 部分</span></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// test设置需要匹配的文件类型，支持正则</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="comment">// use表示该文件类型需要调用的loader</span></span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;less-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|gif|bmp|jpg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">limit</span>: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">            <span class="comment">// 图片取10位hash和文件扩展名</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class="line">            <span class="comment">// 关闭es6模块化</span></span><br><span class="line">            <span class="attr">esModule</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">//  图片资源的输出路径</span></span><br><span class="line">            <span class="attr">outputPath</span>: <span class="string">&#x27;images&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 处理html中img资源</span></span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/.\html$/</span>,</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&quot;html-loader&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//  处理其他资源(一般指的就是字体资源等)</span></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//     exclude: /\.(html|js|css|less|scss|jpg|png|gif)/,</span></span><br><span class="line">      <span class="comment">//     loader: &quot;file-loader&quot;,</span></span><br><span class="line">      <span class="comment">//     outputPath:&#x27;media&#x27;</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(woff(2)?|eot|ttf|otf|svg|)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset/inline&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">            <span class="attr">plugins</span>: [<span class="string">&#x27;@babel/plugin-proposal-class-properties&#x27;</span>],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 使用webpck-dev-server时配置</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">historyApiFallback</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">quiet</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="webpack-config-js中配置插件-1"><a href="#webpack-config-js中配置插件-1" class="headerlink" title="webpack.config.js中配置插件"></a>webpack.config.js中配置插件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">OptimizeCssAssetsWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ESLintPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;eslint-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="comment">// 导入每次删除文件夹的插件</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复用loader加载器</span></span><br><span class="line"><span class="keyword">const</span> commonCssLoader = [</span><br><span class="line">  <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">  <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">  <span class="comment">// css兼容性处理</span></span><br><span class="line">  <span class="comment">// 还需要在package.json中定义browserlist</span></span><br><span class="line">  <span class="string">&#x27;postcss-loader&#x27;</span></span><br><span class="line">  <span class="comment">// 下面是根据路径找配置文件</span></span><br><span class="line">  <span class="comment">// &#123;</span></span><br><span class="line">  <span class="comment">//   loader: &#x27;postcss-loader&#x27;,</span></span><br><span class="line">  <span class="comment">//   options: &#123;</span></span><br><span class="line">  <span class="comment">//     postcssOptions:&#123;</span></span><br><span class="line">  <span class="comment">//       config:&#x27;./postcss.config.js&#x27;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义node.js到环境变量，决定使用browserslist的哪个环境</span></span><br><span class="line">process.<span class="property">env</span>.<span class="property">NODE_ENV</span> = <span class="string">&#x27;production&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;js/bundle.js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          ...commonCssLoader,</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          ...commonCssLoader,</span><br><span class="line">          <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// &#123;</span></span><br><span class="line">      <span class="comment">//   // eslint语法检查，在package.json中eslintConfig --&gt; airbnb的校验规则</span></span><br><span class="line">      <span class="comment">//   test: /\.js$/,</span></span><br><span class="line">      <span class="comment">//   exclude: /node_modules/,</span></span><br><span class="line">      <span class="comment">//   // 优先执行，先执行eslint在执行babel</span></span><br><span class="line">      <span class="comment">//   enforce: &#x27;pre&#x27;,</span></span><br><span class="line">      <span class="comment">//   loader: &#x27;eslint-loader&#x27;,</span></span><br><span class="line">      <span class="comment">//   options: &#123;</span></span><br><span class="line">      <span class="comment">//     fix: true</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// js代码兼容性处理</span></span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">presets</span>: [</span><br><span class="line">            [<span class="string">&#x27;@babel/preset-env&#x27;</span>, <span class="comment">//基础预设</span></span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">useBuiltIns</span>: <span class="string">&#x27;usage&#x27;</span>, <span class="comment">// 按需加载</span></span><br><span class="line">                <span class="attr">corejs</span>: &#123;</span><br><span class="line">                  <span class="attr">version</span>: <span class="number">3</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">targets</span>: &#123;</span><br><span class="line">                  <span class="comment">// 兼容到什么版本到浏览器</span></span><br><span class="line">                  <span class="attr">chrome</span>: <span class="string">&#x27;60&#x27;</span>,</span><br><span class="line">                  <span class="attr">firefox</span>: <span class="string">&#x27;50&#x27;</span>,</span><br><span class="line">                  <span class="attr">ie</span>: <span class="string">&#x27;9&#x27;</span>,</span><br><span class="line">                  <span class="attr">safari</span>: <span class="string">&#x27;10&#x27;</span>,</span><br><span class="line">                  <span class="attr">edge</span>: <span class="string">&#x27;17&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            ]],</span><br><span class="line">          <span class="attr">plugins</span>: [<span class="string">&#x27;@babel/transform-runtime&#x27;</span>,<span class="string">&#x27;@babel/plugin-proposal-class-properties&#x27;</span>],</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|gif|bmp|jpg)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">limit</span>: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">            <span class="comment">// 图片取10位hash和文件扩展名</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class="line">            <span class="comment">// 关闭es6模块化</span></span><br><span class="line">            <span class="attr">esModule</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">//  图片资源的输出路径</span></span><br><span class="line">            <span class="attr">outputPath</span>: <span class="string">&#x27;images&#x27;</span>,</span><br><span class="line">            <span class="comment">// publicPath :  这个则是生成的页面中对图片路径的引用时，加上publicPath。</span></span><br><span class="line">            <span class="attr">publicPath</span>: <span class="string">&quot;../images&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 处理html中img资源</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/.\html$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 处理其他⽂件</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/\.(js|css|less|html|jpg|png|gif)/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123; <span class="attr">outputPath</span>: <span class="string">&#x27;media&#x27;</span>, &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// css代码单独抽离</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;css/bundle.css&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// css代码压缩</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">OptimizeCssAssetsWebpackPlugin</span>(),</span><br><span class="line">    <span class="comment">// html文件压缩</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>,</span><br><span class="line">      <span class="attr">minify</span>: &#123;</span><br><span class="line">        <span class="comment">// 移除空格</span></span><br><span class="line">        <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 移除注释</span></span><br><span class="line">        <span class="attr">removeComments</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// new ESLintPlugin(&#123;</span></span><br><span class="line">    <span class="comment">//   exclude:&#x27;node_modules&#x27;,</span></span><br><span class="line">    <span class="comment">//   fix:true</span></span><br><span class="line">    <span class="comment">// &#125;),</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">  ]</span><br><span class="line">  ,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="postcss-config-js配置"><a href="#postcss-config-js配置" class="headerlink" title="postcss.config.js配置"></a>postcss.config.js配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// You can specify any options from https://postcss.org/api/#processoptions here</span></span><br><span class="line">  <span class="comment">// parser: &#x27;sugarss&#x27;,</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// Plugins for PostCSS</span></span><br><span class="line">    <span class="comment">// [&quot;postcss-short&quot;, &#123; prefix: &quot;x&quot; &#125;],</span></span><br><span class="line">    <span class="string">&quot;postcss-preset-env&quot;</span>,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="eslintlrc-js配置"><a href="#eslintlrc-js配置" class="headerlink" title=".eslintlrc.js配置"></a>.eslintlrc.js配置</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">commonjs</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es6</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&quot;airbnb-base&quot;</span>,</span><br><span class="line">    <span class="comment">// &#x27;plugin:vue/essential&#x27;,</span></span><br><span class="line">    <span class="comment">// &#x27;@vue/standard&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">ecmaFeatures</span>: &#123;</span><br><span class="line">      <span class="attr">jsx</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">experimentalObjectRestSpread</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="gitignore配置"><a href="#gitignore配置" class="headerlink" title=".gitignore配置"></a>.gitignore配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node_modules/*</span><br><span class="line">package-lock.json</span><br><span class="line">dist/*</span><br><span class="line">.idea/*</span><br></pre></td></tr></table></figure><h2 id="package-json配置"><a href="#package-json配置" class="headerlink" title="package.json配置"></a>package.json配置</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack serve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config webpack.config.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config webpack.pub.config.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;development&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;last 1 chrome version&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;last 1 firefox version&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;last 1 safari version&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;production&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;&gt;0.2%&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;not dead&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;not op_mini all&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol><li>开发环境，热部署devServer的重新配置，在webpack.config.js中添加热部署的部分代码，之后在package.json<br>文件内scripts中配置相应的webpack</li><li>生产环境在package.json中的配置<code>&quot;build&quot;: &quot;webpack --config webpack.pub.config.js&quot;</code></li><li>生产环境图片资源打包之后，网页显示不出来，需要在图片资源的打包中添加<code>publicPath: &quot;../images&quot;</code>,这个<br>则是生成的页面中对图片路径的引用时，加上publicPath,这样访问时姐可以放到文件的正确地址了。</li><li>css代码的兼容性处理，使用postcss-loader的配置，可以直接在use里加载postcss-loader的配置文件，也可以直接<br>使用postcss-loader,让后打包时自动在根目录中找postcss.config.js配置文件，来加载postcss配置，此项目使用的<br>外部postcss.configi.js配置文件的配置方式。注意：还需要在package.json中定义browserlist</li><li><strong>另外：目前还有生产环境懒加载和eslint校验代码的功能未完成，eslint的校验遇到问题<code>class Person &#123; static info = &#123; name: &#39;zs&#39; &#125;; &#125;</code>，在生产环境的webpack.pub.config.js中引入来插件eslint-webpack-plugin，配置了new ESLintPlugin(),<br>但是提示错误信息如下，Parsing error: Unexpected token &#x3D;</strong></li></ol><h2 id="Find-me"><a href="#Find-me" class="headerlink" title="Find me"></a>Find me</h2><p>Gitee：<a href="https://gitee.com/heyhaiyon/webpack5-config.git">https://gitee.com/heyhaiyon/webpack5-config.git</a></p><p>微信公众号：<a href="https://gitee.com/heyhaiyon/upic/raw/master/uPic/wechat-public-big.png">heyhaiyang</a></p><p>掘金：<a href="https://juejin.cn/user/3113464436127608">heyhaiyang</a></p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> WEB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB </tag>
            
            <tag> webpack5 </tag>
            
            <tag> 配置手册 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
